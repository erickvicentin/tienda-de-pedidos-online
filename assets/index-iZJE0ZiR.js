(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const f of u.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&s(f)}).observe(document,{childList:!0,subtree:!0});function n(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function s(o){if(o.ep)return;o.ep=!0;const u=n(o);fetch(o.href,u)}})();function Jv(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var vd={exports:{}},ul={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f_;function XA(){if(f_)return ul;f_=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(s,o,u){var f=null;if(u!==void 0&&(f=""+u),o.key!==void 0&&(f=""+o.key),"key"in o){u={};for(var p in o)p!=="key"&&(u[p]=o[p])}else u=o;return o=u.ref,{$$typeof:r,type:s,key:f,ref:o!==void 0?o:null,props:u}}return ul.Fragment=e,ul.jsx=n,ul.jsxs=n,ul}var d_;function $A(){return d_||(d_=1,vd.exports=XA()),vd.exports}var S=$A(),Ed={exports:{}},Se={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var m_;function ZA(){if(m_)return Se;m_=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),f=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),I=Symbol.iterator;function x(N){return N===null||typeof N!="object"?null:(N=I&&N[I]||N["@@iterator"],typeof N=="function"?N:null)}var G={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Z=Object.assign,F={};function q(N,W,ie){this.props=N,this.context=W,this.refs=F,this.updater=ie||G}q.prototype.isReactComponent={},q.prototype.setState=function(N,W){if(typeof N!="object"&&typeof N!="function"&&N!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,N,W,"setState")},q.prototype.forceUpdate=function(N){this.updater.enqueueForceUpdate(this,N,"forceUpdate")};function re(){}re.prototype=q.prototype;function se(N,W,ie){this.props=N,this.context=W,this.refs=F,this.updater=ie||G}var le=se.prototype=new re;le.constructor=se,Z(le,q.prototype),le.isPureReactComponent=!0;var Oe=Array.isArray,Ee={H:null,A:null,T:null,S:null,V:null},Me=Object.prototype.hasOwnProperty;function M(N,W,ie,ee,fe,Re){return ie=Re.ref,{$$typeof:r,type:N,key:W,ref:ie!==void 0?ie:null,props:Re}}function b(N,W){return M(N.type,W,void 0,void 0,void 0,N.props)}function R(N){return typeof N=="object"&&N!==null&&N.$$typeof===r}function O(N){var W={"=":"=0",":":"=2"};return"$"+N.replace(/[=:]/g,function(ie){return W[ie]})}var V=/\/+/g;function U(N,W){return typeof N=="object"&&N!==null&&N.key!=null?O(""+N.key):W.toString(36)}function C(){}function Mt(N){switch(N.status){case"fulfilled":return N.value;case"rejected":throw N.reason;default:switch(typeof N.status=="string"?N.then(C,C):(N.status="pending",N.then(function(W){N.status==="pending"&&(N.status="fulfilled",N.value=W)},function(W){N.status==="pending"&&(N.status="rejected",N.reason=W)})),N.status){case"fulfilled":return N.value;case"rejected":throw N.reason}}throw N}function rt(N,W,ie,ee,fe){var Re=typeof N;(Re==="undefined"||Re==="boolean")&&(N=null);var ve=!1;if(N===null)ve=!0;else switch(Re){case"bigint":case"string":case"number":ve=!0;break;case"object":switch(N.$$typeof){case r:case e:ve=!0;break;case T:return ve=N._init,rt(ve(N._payload),W,ie,ee,fe)}}if(ve)return fe=fe(N),ve=ee===""?"."+U(N,0):ee,Oe(fe)?(ie="",ve!=null&&(ie=ve.replace(V,"$&/")+"/"),rt(fe,W,ie,"",function(zn){return zn})):fe!=null&&(R(fe)&&(fe=b(fe,ie+(fe.key==null||N&&N.key===fe.key?"":(""+fe.key).replace(V,"$&/")+"/")+ve)),W.push(fe)),1;ve=0;var wt=ee===""?".":ee+":";if(Oe(N))for(var Ze=0;Ze<N.length;Ze++)ee=N[Ze],Re=wt+U(ee,Ze),ve+=rt(ee,W,ie,Re,fe);else if(Ze=x(N),typeof Ze=="function")for(N=Ze.call(N),Ze=0;!(ee=N.next()).done;)ee=ee.value,Re=wt+U(ee,Ze++),ve+=rt(ee,W,ie,Re,fe);else if(Re==="object"){if(typeof N.then=="function")return rt(Mt(N),W,ie,ee,fe);throw W=String(N),Error("Objects are not valid as a React child (found: "+(W==="[object Object]"?"object with keys {"+Object.keys(N).join(", ")+"}":W)+"). If you meant to render a collection of children, use an array instead.")}return ve}function Q(N,W,ie){if(N==null)return N;var ee=[],fe=0;return rt(N,ee,"","",function(Re){return W.call(ie,Re,fe++)}),ee}function ne(N){if(N._status===-1){var W=N._result;W=W(),W.then(function(ie){(N._status===0||N._status===-1)&&(N._status=1,N._result=ie)},function(ie){(N._status===0||N._status===-1)&&(N._status=2,N._result=ie)}),N._status===-1&&(N._status=0,N._result=W)}if(N._status===1)return N._result.default;throw N._result}var ce=typeof reportError=="function"?reportError:function(N){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var W=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof N=="object"&&N!==null&&typeof N.message=="string"?String(N.message):String(N),error:N});if(!window.dispatchEvent(W))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",N);return}console.error(N)};function je(){}return Se.Children={map:Q,forEach:function(N,W,ie){Q(N,function(){W.apply(this,arguments)},ie)},count:function(N){var W=0;return Q(N,function(){W++}),W},toArray:function(N){return Q(N,function(W){return W})||[]},only:function(N){if(!R(N))throw Error("React.Children.only expected to receive a single React element child.");return N}},Se.Component=q,Se.Fragment=n,Se.Profiler=o,Se.PureComponent=se,Se.StrictMode=s,Se.Suspense=g,Se.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Ee,Se.__COMPILER_RUNTIME={__proto__:null,c:function(N){return Ee.H.useMemoCache(N)}},Se.cache=function(N){return function(){return N.apply(null,arguments)}},Se.cloneElement=function(N,W,ie){if(N==null)throw Error("The argument must be a React element, but you passed "+N+".");var ee=Z({},N.props),fe=N.key,Re=void 0;if(W!=null)for(ve in W.ref!==void 0&&(Re=void 0),W.key!==void 0&&(fe=""+W.key),W)!Me.call(W,ve)||ve==="key"||ve==="__self"||ve==="__source"||ve==="ref"&&W.ref===void 0||(ee[ve]=W[ve]);var ve=arguments.length-2;if(ve===1)ee.children=ie;else if(1<ve){for(var wt=Array(ve),Ze=0;Ze<ve;Ze++)wt[Ze]=arguments[Ze+2];ee.children=wt}return M(N.type,fe,void 0,void 0,Re,ee)},Se.createContext=function(N){return N={$$typeof:f,_currentValue:N,_currentValue2:N,_threadCount:0,Provider:null,Consumer:null},N.Provider=N,N.Consumer={$$typeof:u,_context:N},N},Se.createElement=function(N,W,ie){var ee,fe={},Re=null;if(W!=null)for(ee in W.key!==void 0&&(Re=""+W.key),W)Me.call(W,ee)&&ee!=="key"&&ee!=="__self"&&ee!=="__source"&&(fe[ee]=W[ee]);var ve=arguments.length-2;if(ve===1)fe.children=ie;else if(1<ve){for(var wt=Array(ve),Ze=0;Ze<ve;Ze++)wt[Ze]=arguments[Ze+2];fe.children=wt}if(N&&N.defaultProps)for(ee in ve=N.defaultProps,ve)fe[ee]===void 0&&(fe[ee]=ve[ee]);return M(N,Re,void 0,void 0,null,fe)},Se.createRef=function(){return{current:null}},Se.forwardRef=function(N){return{$$typeof:p,render:N}},Se.isValidElement=R,Se.lazy=function(N){return{$$typeof:T,_payload:{_status:-1,_result:N},_init:ne}},Se.memo=function(N,W){return{$$typeof:y,type:N,compare:W===void 0?null:W}},Se.startTransition=function(N){var W=Ee.T,ie={};Ee.T=ie;try{var ee=N(),fe=Ee.S;fe!==null&&fe(ie,ee),typeof ee=="object"&&ee!==null&&typeof ee.then=="function"&&ee.then(je,ce)}catch(Re){ce(Re)}finally{Ee.T=W}},Se.unstable_useCacheRefresh=function(){return Ee.H.useCacheRefresh()},Se.use=function(N){return Ee.H.use(N)},Se.useActionState=function(N,W,ie){return Ee.H.useActionState(N,W,ie)},Se.useCallback=function(N,W){return Ee.H.useCallback(N,W)},Se.useContext=function(N){return Ee.H.useContext(N)},Se.useDebugValue=function(){},Se.useDeferredValue=function(N,W){return Ee.H.useDeferredValue(N,W)},Se.useEffect=function(N,W,ie){var ee=Ee.H;if(typeof ie=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ee.useEffect(N,W)},Se.useId=function(){return Ee.H.useId()},Se.useImperativeHandle=function(N,W,ie){return Ee.H.useImperativeHandle(N,W,ie)},Se.useInsertionEffect=function(N,W){return Ee.H.useInsertionEffect(N,W)},Se.useLayoutEffect=function(N,W){return Ee.H.useLayoutEffect(N,W)},Se.useMemo=function(N,W){return Ee.H.useMemo(N,W)},Se.useOptimistic=function(N,W){return Ee.H.useOptimistic(N,W)},Se.useReducer=function(N,W,ie){return Ee.H.useReducer(N,W,ie)},Se.useRef=function(N){return Ee.H.useRef(N)},Se.useState=function(N){return Ee.H.useState(N)},Se.useSyncExternalStore=function(N,W,ie){return Ee.H.useSyncExternalStore(N,W,ie)},Se.useTransition=function(){return Ee.H.useTransition()},Se.version="19.1.0",Se}var p_;function um(){return p_||(p_=1,Ed.exports=ZA()),Ed.exports}var Ot=um();const WA=Jv(Ot);var Td={exports:{}},cl={},Ad={exports:{}},Sd={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var g_;function JA(){return g_||(g_=1,function(r){function e(Q,ne){var ce=Q.length;Q.push(ne);e:for(;0<ce;){var je=ce-1>>>1,N=Q[je];if(0<o(N,ne))Q[je]=ne,Q[ce]=N,ce=je;else break e}}function n(Q){return Q.length===0?null:Q[0]}function s(Q){if(Q.length===0)return null;var ne=Q[0],ce=Q.pop();if(ce!==ne){Q[0]=ce;e:for(var je=0,N=Q.length,W=N>>>1;je<W;){var ie=2*(je+1)-1,ee=Q[ie],fe=ie+1,Re=Q[fe];if(0>o(ee,ce))fe<N&&0>o(Re,ee)?(Q[je]=Re,Q[fe]=ce,je=fe):(Q[je]=ee,Q[ie]=ce,je=ie);else if(fe<N&&0>o(Re,ce))Q[je]=Re,Q[fe]=ce,je=fe;else break e}}return ne}function o(Q,ne){var ce=Q.sortIndex-ne.sortIndex;return ce!==0?ce:Q.id-ne.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;r.unstable_now=function(){return u.now()}}else{var f=Date,p=f.now();r.unstable_now=function(){return f.now()-p}}var g=[],y=[],T=1,I=null,x=3,G=!1,Z=!1,F=!1,q=!1,re=typeof setTimeout=="function"?setTimeout:null,se=typeof clearTimeout=="function"?clearTimeout:null,le=typeof setImmediate<"u"?setImmediate:null;function Oe(Q){for(var ne=n(y);ne!==null;){if(ne.callback===null)s(y);else if(ne.startTime<=Q)s(y),ne.sortIndex=ne.expirationTime,e(g,ne);else break;ne=n(y)}}function Ee(Q){if(F=!1,Oe(Q),!Z)if(n(g)!==null)Z=!0,Me||(Me=!0,U());else{var ne=n(y);ne!==null&&rt(Ee,ne.startTime-Q)}}var Me=!1,M=-1,b=5,R=-1;function O(){return q?!0:!(r.unstable_now()-R<b)}function V(){if(q=!1,Me){var Q=r.unstable_now();R=Q;var ne=!0;try{e:{Z=!1,F&&(F=!1,se(M),M=-1),G=!0;var ce=x;try{t:{for(Oe(Q),I=n(g);I!==null&&!(I.expirationTime>Q&&O());){var je=I.callback;if(typeof je=="function"){I.callback=null,x=I.priorityLevel;var N=je(I.expirationTime<=Q);if(Q=r.unstable_now(),typeof N=="function"){I.callback=N,Oe(Q),ne=!0;break t}I===n(g)&&s(g),Oe(Q)}else s(g);I=n(g)}if(I!==null)ne=!0;else{var W=n(y);W!==null&&rt(Ee,W.startTime-Q),ne=!1}}break e}finally{I=null,x=ce,G=!1}ne=void 0}}finally{ne?U():Me=!1}}}var U;if(typeof le=="function")U=function(){le(V)};else if(typeof MessageChannel<"u"){var C=new MessageChannel,Mt=C.port2;C.port1.onmessage=V,U=function(){Mt.postMessage(null)}}else U=function(){re(V,0)};function rt(Q,ne){M=re(function(){Q(r.unstable_now())},ne)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(Q){Q.callback=null},r.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<Q?Math.floor(1e3/Q):5},r.unstable_getCurrentPriorityLevel=function(){return x},r.unstable_next=function(Q){switch(x){case 1:case 2:case 3:var ne=3;break;default:ne=x}var ce=x;x=ne;try{return Q()}finally{x=ce}},r.unstable_requestPaint=function(){q=!0},r.unstable_runWithPriority=function(Q,ne){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var ce=x;x=Q;try{return ne()}finally{x=ce}},r.unstable_scheduleCallback=function(Q,ne,ce){var je=r.unstable_now();switch(typeof ce=="object"&&ce!==null?(ce=ce.delay,ce=typeof ce=="number"&&0<ce?je+ce:je):ce=je,Q){case 1:var N=-1;break;case 2:N=250;break;case 5:N=1073741823;break;case 4:N=1e4;break;default:N=5e3}return N=ce+N,Q={id:T++,callback:ne,priorityLevel:Q,startTime:ce,expirationTime:N,sortIndex:-1},ce>je?(Q.sortIndex=ce,e(y,Q),n(g)===null&&Q===n(y)&&(F?(se(M),M=-1):F=!0,rt(Ee,ce-je))):(Q.sortIndex=N,e(g,Q),Z||G||(Z=!0,Me||(Me=!0,U()))),Q},r.unstable_shouldYield=O,r.unstable_wrapCallback=function(Q){var ne=x;return function(){var ce=x;x=ne;try{return Q.apply(this,arguments)}finally{x=ce}}}}(Sd)),Sd}var y_;function eS(){return y_||(y_=1,Ad.exports=JA()),Ad.exports}var bd={exports:{}},Ft={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var __;function tS(){if(__)return Ft;__=1;var r=um();function e(g){var y="https://react.dev/errors/"+g;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var T=2;T<arguments.length;T++)y+="&args[]="+encodeURIComponent(arguments[T])}return"Minified React error #"+g+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(g,y,T){var I=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:I==null?null:""+I,children:g,containerInfo:y,implementation:T}}var f=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(g,y){if(g==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return Ft.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Ft.createPortal=function(g,y){var T=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(e(299));return u(g,y,null,T)},Ft.flushSync=function(g){var y=f.T,T=s.p;try{if(f.T=null,s.p=2,g)return g()}finally{f.T=y,s.p=T,s.d.f()}},Ft.preconnect=function(g,y){typeof g=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,s.d.C(g,y))},Ft.prefetchDNS=function(g){typeof g=="string"&&s.d.D(g)},Ft.preinit=function(g,y){if(typeof g=="string"&&y&&typeof y.as=="string"){var T=y.as,I=p(T,y.crossOrigin),x=typeof y.integrity=="string"?y.integrity:void 0,G=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;T==="style"?s.d.S(g,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:I,integrity:x,fetchPriority:G}):T==="script"&&s.d.X(g,{crossOrigin:I,integrity:x,fetchPriority:G,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},Ft.preinitModule=function(g,y){if(typeof g=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var T=p(y.as,y.crossOrigin);s.d.M(g,{crossOrigin:T,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&s.d.M(g)},Ft.preload=function(g,y){if(typeof g=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var T=y.as,I=p(T,y.crossOrigin);s.d.L(g,T,{crossOrigin:I,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},Ft.preloadModule=function(g,y){if(typeof g=="string")if(y){var T=p(y.as,y.crossOrigin);s.d.m(g,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:T,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else s.d.m(g)},Ft.requestFormReset=function(g){s.d.r(g)},Ft.unstable_batchedUpdates=function(g,y){return g(y)},Ft.useFormState=function(g,y,T){return f.H.useFormState(g,y,T)},Ft.useFormStatus=function(){return f.H.useHostTransitionStatus()},Ft.version="19.1.0",Ft}var v_;function nS(){if(v_)return bd.exports;v_=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),bd.exports=tS(),bd.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var E_;function iS(){if(E_)return cl;E_=1;var r=eS(),e=um(),n=nS();function s(t){var i="https://react.dev/errors/"+t;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function u(t){var i=t,a=t;if(t.alternate)for(;i.return;)i=i.return;else{t=i;do i=t,(i.flags&4098)!==0&&(a=i.return),t=i.return;while(t)}return i.tag===3?a:null}function f(t){if(t.tag===13){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function p(t){if(u(t)!==t)throw Error(s(188))}function g(t){var i=t.alternate;if(!i){if(i=u(t),i===null)throw Error(s(188));return i!==t?null:t}for(var a=t,l=i;;){var h=a.return;if(h===null)break;var d=h.alternate;if(d===null){if(l=h.return,l!==null){a=l;continue}break}if(h.child===d.child){for(d=h.child;d;){if(d===a)return p(h),t;if(d===l)return p(h),i;d=d.sibling}throw Error(s(188))}if(a.return!==l.return)a=h,l=d;else{for(var v=!1,E=h.child;E;){if(E===a){v=!0,a=h,l=d;break}if(E===l){v=!0,l=h,a=d;break}E=E.sibling}if(!v){for(E=d.child;E;){if(E===a){v=!0,a=d,l=h;break}if(E===l){v=!0,l=d,a=h;break}E=E.sibling}if(!v)throw Error(s(189))}}if(a.alternate!==l)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?t:i}function y(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t;for(t=t.child;t!==null;){if(i=y(t),i!==null)return i;t=t.sibling}return null}var T=Object.assign,I=Symbol.for("react.element"),x=Symbol.for("react.transitional.element"),G=Symbol.for("react.portal"),Z=Symbol.for("react.fragment"),F=Symbol.for("react.strict_mode"),q=Symbol.for("react.profiler"),re=Symbol.for("react.provider"),se=Symbol.for("react.consumer"),le=Symbol.for("react.context"),Oe=Symbol.for("react.forward_ref"),Ee=Symbol.for("react.suspense"),Me=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),O=Symbol.for("react.memo_cache_sentinel"),V=Symbol.iterator;function U(t){return t===null||typeof t!="object"?null:(t=V&&t[V]||t["@@iterator"],typeof t=="function"?t:null)}var C=Symbol.for("react.client.reference");function Mt(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===C?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Z:return"Fragment";case q:return"Profiler";case F:return"StrictMode";case Ee:return"Suspense";case Me:return"SuspenseList";case R:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case G:return"Portal";case le:return(t.displayName||"Context")+".Provider";case se:return(t._context.displayName||"Context")+".Consumer";case Oe:var i=t.render;return t=t.displayName,t||(t=i.displayName||i.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case M:return i=t.displayName||null,i!==null?i:Mt(t.type)||"Memo";case b:i=t._payload,t=t._init;try{return Mt(t(i))}catch{}}return null}var rt=Array.isArray,Q=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ne=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ce={pending:!1,data:null,method:null,action:null},je=[],N=-1;function W(t){return{current:t}}function ie(t){0>N||(t.current=je[N],je[N]=null,N--)}function ee(t,i){N++,je[N]=t.current,t.current=i}var fe=W(null),Re=W(null),ve=W(null),wt=W(null);function Ze(t,i){switch(ee(ve,i),ee(Re,t),ee(fe,null),i.nodeType){case 9:case 11:t=(t=i.documentElement)&&(t=t.namespaceURI)?zy(t):0;break;default:if(t=i.tagName,i=i.namespaceURI)i=zy(i),t=By(i,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}ie(fe),ee(fe,t)}function zn(){ie(fe),ie(Re),ie(ve)}function Hi(t){t.memoizedState!==null&&ee(wt,t);var i=fe.current,a=By(i,t.type);i!==a&&(ee(Re,t),ee(fe,a))}function ci(t){Re.current===t&&(ie(fe),ie(Re)),wt.current===t&&(ie(wt),rl._currentValue=ce)}var zr=Object.prototype.hasOwnProperty,Br=r.unstable_scheduleCallback,qr=r.unstable_cancelCallback,eo=r.unstable_shouldYield,Hl=r.unstable_requestPaint,gn=r.unstable_now,_h=r.unstable_getCurrentPriorityLevel,to=r.unstable_ImmediatePriority,Vs=r.unstable_UserBlockingPriority,Hr=r.unstable_NormalPriority,vh=r.unstable_LowPriority,Ps=r.unstable_IdlePriority,no=r.log,Gl=r.unstable_setDisableYieldValue,st=null,He=null;function an(t){if(typeof no=="function"&&Gl(t),He&&typeof He.setStrictMode=="function")try{He.setStrictMode(st,t)}catch{}}var Ht=Math.clz32?Math.clz32:Gr,Fl=Math.log,Eh=Math.LN2;function Gr(t){return t>>>=0,t===0?32:31-(Fl(t)/Eh|0)|0}var Fr=256,Qr=4194304;function Nn(t){var i=t&42;if(i!==0)return i;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Us(t,i,a){var l=t.pendingLanes;if(l===0)return 0;var h=0,d=t.suspendedLanes,v=t.pingedLanes;t=t.warmLanes;var E=l&134217727;return E!==0?(l=E&~d,l!==0?h=Nn(l):(v&=E,v!==0?h=Nn(v):a||(a=E&~t,a!==0&&(h=Nn(a))))):(E=l&~d,E!==0?h=Nn(E):v!==0?h=Nn(v):a||(a=l&~t,a!==0&&(h=Nn(a)))),h===0?0:i!==0&&i!==h&&(i&d)===0&&(d=h&-h,a=i&-i,d>=a||d===32&&(a&4194048)!==0)?i:h}function Kr(t,i){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&i)===0}function io(t,i){switch(t){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ro(){var t=Fr;return Fr<<=1,(Fr&4194048)===0&&(Fr=256),t}function so(){var t=Qr;return Qr<<=1,(Qr&62914560)===0&&(Qr=4194304),t}function hi(t){for(var i=[],a=0;31>a;a++)i.push(t);return i}function fi(t,i){t.pendingLanes|=i,i!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function ao(t,i,a,l,h,d){var v=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var E=t.entanglements,w=t.expirationTimes,j=t.hiddenUpdates;for(a=v&~a;0<a;){var K=31-Ht(a),X=1<<K;E[K]=0,w[K]=-1;var z=j[K];if(z!==null)for(j[K]=null,K=0;K<z.length;K++){var B=z[K];B!==null&&(B.lane&=-536870913)}a&=~X}l!==0&&Bn(t,l,0),d!==0&&h===0&&t.tag!==0&&(t.suspendedLanes|=d&~(v&~i))}function Bn(t,i,a){t.pendingLanes|=i,t.suspendedLanes&=~i;var l=31-Ht(i);t.entangledLanes|=i,t.entanglements[l]=t.entanglements[l]|1073741824|a&4194090}function oo(t,i){var a=t.entangledLanes|=i;for(t=t.entanglements;a;){var l=31-Ht(a),h=1<<l;h&i|t[l]&i&&(t[l]|=i),a&=~h}}function Gi(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Ls(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Fi(){var t=ne.p;return t!==0?t:(t=window.event,t===void 0?32:a_(t.type))}function Ql(t,i){var a=ne.p;try{return ne.p=t,i()}finally{ne.p=a}}var Je=Math.random().toString(36).slice(2),yt="__reactFiber$"+Je,ft="__reactProps$"+Je,yn="__reactContainer$"+Je,lo="__reactEvents$"+Je,Th="__reactListeners$"+Je,Qi="__reactHandles$"+Je,Kl="__reactResources$"+Je,Yr="__reactMarker$"+Je;function Ki(t){delete t[yt],delete t[ft],delete t[lo],delete t[Th],delete t[Qi]}function di(t){var i=t[yt];if(i)return i;for(var a=t.parentNode;a;){if(i=a[yn]||a[yt]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(t=Fy(t);t!==null;){if(a=t[yt])return a;t=Fy(t)}return i}t=a,a=t.parentNode}return null}function qn(t){if(t=t[yt]||t[yn]){var i=t.tag;if(i===5||i===6||i===13||i===26||i===27||i===3)return t}return null}function Hn(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t.stateNode;throw Error(s(33))}function $t(t){var i=t[Kl];return i||(i=t[Kl]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function lt(t){t[Yr]=!0}var uo=new Set,ks={};function Dn(t,i){mi(t,i),mi(t+"Capture",i)}function mi(t,i){for(ks[t]=i,t=0;t<i.length;t++)uo.add(i[t])}var Yl=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Xl={},Xr={};function $l(t){return zr.call(Xr,t)?!0:zr.call(Xl,t)?!1:Yl.test(t)?Xr[t]=!0:(Xl[t]=!0,!1)}function Yi(t,i,a){if($l(i))if(a===null)t.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(i);return;case"boolean":var l=i.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(i);return}}t.setAttribute(i,""+a)}}function Gn(t,i,a){if(a===null)t.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(i);return}t.setAttribute(i,""+a)}}function Vt(t,i,a,l){if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(i,a,""+l)}}var $r,Zl;function pi(t){if($r===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);$r=i&&i[1]||"",Zl=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+$r+t+Zl}var js=!1;function zs(t,i){if(!t||js)return"";js=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(i){var X=function(){throw Error()};if(Object.defineProperty(X.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(X,[])}catch(B){var z=B}Reflect.construct(t,[],X)}else{try{X.call()}catch(B){z=B}t.call(X.prototype)}}else{try{throw Error()}catch(B){z=B}(X=t())&&typeof X.catch=="function"&&X.catch(function(){})}}catch(B){if(B&&z&&typeof B.stack=="string")return[B.stack,z.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=l.DetermineComponentFrameRoot(),v=d[0],E=d[1];if(v&&E){var w=v.split(`
`),j=E.split(`
`);for(h=l=0;l<w.length&&!w[l].includes("DetermineComponentFrameRoot");)l++;for(;h<j.length&&!j[h].includes("DetermineComponentFrameRoot");)h++;if(l===w.length||h===j.length)for(l=w.length-1,h=j.length-1;1<=l&&0<=h&&w[l]!==j[h];)h--;for(;1<=l&&0<=h;l--,h--)if(w[l]!==j[h]){if(l!==1||h!==1)do if(l--,h--,0>h||w[l]!==j[h]){var K=`
`+w[l].replace(" at new "," at ");return t.displayName&&K.includes("<anonymous>")&&(K=K.replace("<anonymous>",t.displayName)),K}while(1<=l&&0<=h);break}}}finally{js=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?pi(a):""}function co(t){switch(t.tag){case 26:case 27:case 5:return pi(t.type);case 16:return pi("Lazy");case 13:return pi("Suspense");case 19:return pi("SuspenseList");case 0:case 15:return zs(t.type,!1);case 11:return zs(t.type.render,!1);case 1:return zs(t.type,!0);case 31:return pi("Activity");default:return""}}function Bs(t){try{var i="";do i+=co(t),t=t.return;while(t);return i}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function Zt(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function ho(t){var i=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Ah(t){var i=ho(t)?"checked":"value",a=Object.getOwnPropertyDescriptor(t.constructor.prototype,i),l=""+t[i];if(!t.hasOwnProperty(i)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var h=a.get,d=a.set;return Object.defineProperty(t,i,{configurable:!0,get:function(){return h.call(this)},set:function(v){l=""+v,d.call(this,v)}}),Object.defineProperty(t,i,{enumerable:a.enumerable}),{getValue:function(){return l},setValue:function(v){l=""+v},stopTracking:function(){t._valueTracker=null,delete t[i]}}}}function qs(t){t._valueTracker||(t._valueTracker=Ah(t))}function fo(t){if(!t)return!1;var i=t._valueTracker;if(!i)return!0;var a=i.getValue(),l="";return t&&(l=ho(t)?t.checked?"true":"false":t.value),t=l,t!==a?(i.setValue(t),!0):!1}function Zr(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Sh=/[\n"\\]/g;function dt(t){return t.replace(Sh,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function on(t,i,a,l,h,d,v,E){t.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?t.type=v:t.removeAttribute("type"),i!=null?v==="number"?(i===0&&t.value===""||t.value!=i)&&(t.value=""+Zt(i)):t.value!==""+Zt(i)&&(t.value=""+Zt(i)):v!=="submit"&&v!=="reset"||t.removeAttribute("value"),i!=null?Xi(t,v,Zt(i)):a!=null?Xi(t,v,Zt(a)):l!=null&&t.removeAttribute("value"),h==null&&d!=null&&(t.defaultChecked=!!d),h!=null&&(t.checked=h&&typeof h!="function"&&typeof h!="symbol"),E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?t.name=""+Zt(E):t.removeAttribute("name")}function Wr(t,i,a,l,h,d,v,E){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(t.type=d),i!=null||a!=null){if(!(d!=="submit"&&d!=="reset"||i!=null))return;a=a!=null?""+Zt(a):"",i=i!=null?""+Zt(i):a,E||i===t.value||(t.value=i),t.defaultValue=i}l=l??h,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=E?t.checked:!!l,t.defaultChecked=!!l,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(t.name=v)}function Xi(t,i,a){i==="number"&&Zr(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function gi(t,i,a,l){if(t=t.options,i){i={};for(var h=0;h<a.length;h++)i["$"+a[h]]=!0;for(a=0;a<t.length;a++)h=i.hasOwnProperty("$"+t[a].value),t[a].selected!==h&&(t[a].selected=h),h&&l&&(t[a].defaultSelected=!0)}else{for(a=""+Zt(a),i=null,h=0;h<t.length;h++){if(t[h].value===a){t[h].selected=!0,l&&(t[h].defaultSelected=!0);return}i!==null||t[h].disabled||(i=t[h])}i!==null&&(i.selected=!0)}}function Qe(t,i,a){if(i!=null&&(i=""+Zt(i),i!==t.value&&(t.value=i),a==null)){t.defaultValue!==i&&(t.defaultValue=i);return}t.defaultValue=a!=null?""+Zt(a):""}function Jr(t,i,a,l){if(i==null){if(l!=null){if(a!=null)throw Error(s(92));if(rt(l)){if(1<l.length)throw Error(s(93));l=l[0]}a=l}a==null&&(a=""),i=a}a=Zt(i),t.defaultValue=a,l=t.textContent,l===a&&l!==""&&l!==null&&(t.value=l)}function _n(t,i){if(i){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=i;return}}t.textContent=i}var es=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Wl(t,i,a){var l=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?t.setProperty(i,""):i==="float"?t.cssFloat="":t[i]="":l?t.setProperty(i,a):typeof a!="number"||a===0||es.has(i)?i==="float"?t.cssFloat=a:t[i]=(""+a).trim():t[i]=a+"px"}function mo(t,i,a){if(i!=null&&typeof i!="object")throw Error(s(62));if(t=t.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||i!=null&&i.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var h in i)l=i[h],i.hasOwnProperty(h)&&a[h]!==l&&Wl(t,h,l)}else for(var d in i)i.hasOwnProperty(d)&&Wl(t,d,i[d])}function po(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var bh=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),wh=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Hs(t){return wh.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var yi=null;function vn(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var _i=null,vi=null;function go(t){var i=qn(t);if(i&&(t=i.stateNode)){var a=t[ft]||null;e:switch(t=i.stateNode,i.type){case"input":if(on(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+dt(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var l=a[i];if(l!==t&&l.form===t.form){var h=l[ft]||null;if(!h)throw Error(s(90));on(l,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(i=0;i<a.length;i++)l=a[i],l.form===t.form&&fo(l)}break e;case"textarea":Qe(t,a.value,a.defaultValue);break e;case"select":i=a.value,i!=null&&gi(t,!!a.multiple,i,!1)}}}var Fn=!1;function Jl(t,i,a){if(Fn)return t(i,a);Fn=!0;try{var l=t(i);return l}finally{if(Fn=!1,(_i!==null||vi!==null)&&(Qu(),_i&&(i=_i,t=vi,vi=_i=null,go(i),t)))for(i=0;i<t.length;i++)go(t[i])}}function ts(t,i){var a=t.stateNode;if(a===null)return null;var l=a[ft]||null;if(l===null)return null;a=l[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(s(231,i,typeof a));return a}var On=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),En=!1;if(On)try{var ns={};Object.defineProperty(ns,"passive",{get:function(){En=!0}}),window.addEventListener("test",ns,ns),window.removeEventListener("test",ns,ns)}catch{En=!1}var Qn=null,$i=null,Ei=null;function yo(){if(Ei)return Ei;var t,i=$i,a=i.length,l,h="value"in Qn?Qn.value:Qn.textContent,d=h.length;for(t=0;t<a&&i[t]===h[t];t++);var v=a-t;for(l=1;l<=v&&i[a-l]===h[d-l];l++);return Ei=h.slice(t,1<l?1-l:void 0)}function Kn(t){var i=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&i===13&&(t=13)):t=i,t===10&&(t=13),32<=t||t===13?t:0}function Yn(){return!0}function _o(){return!1}function Rt(t){function i(a,l,h,d,v){this._reactName=a,this._targetInst=h,this.type=l,this.nativeEvent=d,this.target=v,this.currentTarget=null;for(var E in t)t.hasOwnProperty(E)&&(a=t[E],this[E]=a?a(d):d[E]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?Yn:_o,this.isPropagationStopped=_o,this}return T(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Yn)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Yn)},persist:function(){},isPersistent:Yn}),i}var Be={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Gs=Rt(Be),is=T({},Be,{view:0,detail:0}),eu=Rt(is),Fs,Qs,Xn,rs=T({},is,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:os,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Xn&&(Xn&&t.type==="mousemove"?(Fs=t.screenX-Xn.screenX,Qs=t.screenY-Xn.screenY):Qs=Fs=0,Xn=t),Fs)},movementY:function(t){return"movementY"in t?t.movementY:Qs}}),Tn=Rt(rs),tu=T({},rs,{dataTransfer:0}),Rh=Rt(tu),ss=T({},is,{relatedTarget:0}),Ks=Rt(ss),vo=T({},Be,{animationName:0,elapsedTime:0,pseudoElement:0}),Ys=Rt(vo),nu=T({},Be,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Xs=Rt(nu),Ih=T({},Be,{data:0}),Eo=Rt(Ih),as={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},iu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ru={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function To(t){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(t):(t=ru[t])?!!i[t]:!1}function os(){return To}var su=T({},is,{key:function(t){if(t.key){var i=as[t.key]||t.key;if(i!=="Unidentified")return i}return t.type==="keypress"?(t=Kn(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?iu[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:os,charCode:function(t){return t.type==="keypress"?Kn(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Kn(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),$s=Rt(su),au=T({},rs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ao=Rt(au),Ti=T({},is,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:os}),ou=Rt(Ti),lu=T({},Be,{propertyName:0,elapsedTime:0,pseudoElement:0}),uu=Rt(lu),cu=T({},rs,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Zs=Rt(cu),Wt=T({},Be,{newState:0,oldState:0}),hu=Rt(Wt),fu=[9,13,27,32],$n=On&&"CompositionEvent"in window,c=null;On&&"documentMode"in document&&(c=document.documentMode);var m=On&&"TextEvent"in window&&!c,_=On&&(!$n||c&&8<c&&11>=c),A=" ",L=!1;function H(t,i){switch(t){case"keyup":return fu.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function te(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ve=!1;function _t(t,i){switch(t){case"compositionend":return te(i);case"keypress":return i.which!==32?null:(L=!0,A);case"textInput":return t=i.data,t===A&&L?null:t;default:return null}}function Pe(t,i){if(Ve)return t==="compositionend"||!$n&&H(t,i)?(t=yo(),Ei=$i=Qn=null,Ve=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return _&&i.locale!=="ko"?null:i.data;default:return null}}var It={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function vt(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i==="input"?!!It[t.type]:i==="textarea"}function Ai(t,i,a,l){_i?vi?vi.push(l):vi=[l]:_i=l,i=Wu(i,"onChange"),0<i.length&&(a=new Gs("onChange","change",null,a,l),t.push({event:a,listeners:i}))}var Pt=null,Zn=null;function So(t){Py(t,0)}function du(t){var i=Hn(t);if(fo(i))return t}function np(t,i){if(t==="change")return i}var ip=!1;if(On){var Ch;if(On){var xh="oninput"in document;if(!xh){var rp=document.createElement("div");rp.setAttribute("oninput","return;"),xh=typeof rp.oninput=="function"}Ch=xh}else Ch=!1;ip=Ch&&(!document.documentMode||9<document.documentMode)}function sp(){Pt&&(Pt.detachEvent("onpropertychange",ap),Zn=Pt=null)}function ap(t){if(t.propertyName==="value"&&du(Zn)){var i=[];Ai(i,Zn,t,vn(t)),Jl(So,i)}}function wT(t,i,a){t==="focusin"?(sp(),Pt=i,Zn=a,Pt.attachEvent("onpropertychange",ap)):t==="focusout"&&sp()}function RT(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return du(Zn)}function IT(t,i){if(t==="click")return du(i)}function CT(t,i){if(t==="input"||t==="change")return du(i)}function xT(t,i){return t===i&&(t!==0||1/t===1/i)||t!==t&&i!==i}var ln=typeof Object.is=="function"?Object.is:xT;function bo(t,i){if(ln(t,i))return!0;if(typeof t!="object"||t===null||typeof i!="object"||i===null)return!1;var a=Object.keys(t),l=Object.keys(i);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var h=a[l];if(!zr.call(i,h)||!ln(t[h],i[h]))return!1}return!0}function op(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function lp(t,i){var a=op(t);t=0;for(var l;a;){if(a.nodeType===3){if(l=t+a.textContent.length,t<=i&&l>=i)return{node:a,offset:i-t};t=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=op(a)}}function up(t,i){return t&&i?t===i?!0:t&&t.nodeType===3?!1:i&&i.nodeType===3?up(t,i.parentNode):"contains"in t?t.contains(i):t.compareDocumentPosition?!!(t.compareDocumentPosition(i)&16):!1:!1}function cp(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var i=Zr(t.document);i instanceof t.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)t=i.contentWindow;else break;i=Zr(t.document)}return i}function Nh(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i&&(i==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||i==="textarea"||t.contentEditable==="true")}var NT=On&&"documentMode"in document&&11>=document.documentMode,Ws=null,Dh=null,wo=null,Oh=!1;function hp(t,i,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Oh||Ws==null||Ws!==Zr(l)||(l=Ws,"selectionStart"in l&&Nh(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),wo&&bo(wo,l)||(wo=l,l=Wu(Dh,"onSelect"),0<l.length&&(i=new Gs("onSelect","select",null,i,a),t.push({event:i,listeners:l}),i.target=Ws)))}function ls(t,i){var a={};return a[t.toLowerCase()]=i.toLowerCase(),a["Webkit"+t]="webkit"+i,a["Moz"+t]="moz"+i,a}var Js={animationend:ls("Animation","AnimationEnd"),animationiteration:ls("Animation","AnimationIteration"),animationstart:ls("Animation","AnimationStart"),transitionrun:ls("Transition","TransitionRun"),transitionstart:ls("Transition","TransitionStart"),transitioncancel:ls("Transition","TransitionCancel"),transitionend:ls("Transition","TransitionEnd")},Mh={},fp={};On&&(fp=document.createElement("div").style,"AnimationEvent"in window||(delete Js.animationend.animation,delete Js.animationiteration.animation,delete Js.animationstart.animation),"TransitionEvent"in window||delete Js.transitionend.transition);function us(t){if(Mh[t])return Mh[t];if(!Js[t])return t;var i=Js[t],a;for(a in i)if(i.hasOwnProperty(a)&&a in fp)return Mh[t]=i[a];return t}var dp=us("animationend"),mp=us("animationiteration"),pp=us("animationstart"),DT=us("transitionrun"),OT=us("transitionstart"),MT=us("transitioncancel"),gp=us("transitionend"),yp=new Map,Vh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Vh.push("scrollEnd");function Mn(t,i){yp.set(t,i),Dn(i,[t])}var _p=new WeakMap;function An(t,i){if(typeof t=="object"&&t!==null){var a=_p.get(t);return a!==void 0?a:(i={value:t,source:i,stack:Bs(i)},_p.set(t,i),i)}return{value:t,source:i,stack:Bs(i)}}var Sn=[],ea=0,Ph=0;function mu(){for(var t=ea,i=Ph=ea=0;i<t;){var a=Sn[i];Sn[i++]=null;var l=Sn[i];Sn[i++]=null;var h=Sn[i];Sn[i++]=null;var d=Sn[i];if(Sn[i++]=null,l!==null&&h!==null){var v=l.pending;v===null?h.next=h:(h.next=v.next,v.next=h),l.pending=h}d!==0&&vp(a,h,d)}}function pu(t,i,a,l){Sn[ea++]=t,Sn[ea++]=i,Sn[ea++]=a,Sn[ea++]=l,Ph|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function Uh(t,i,a,l){return pu(t,i,a,l),gu(t)}function ta(t,i){return pu(t,null,null,i),gu(t)}function vp(t,i,a){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a);for(var h=!1,d=t.return;d!==null;)d.childLanes|=a,l=d.alternate,l!==null&&(l.childLanes|=a),d.tag===22&&(t=d.stateNode,t===null||t._visibility&1||(h=!0)),t=d,d=d.return;return t.tag===3?(d=t.stateNode,h&&i!==null&&(h=31-Ht(a),t=d.hiddenUpdates,l=t[h],l===null?t[h]=[i]:l.push(i),i.lane=a|536870912),d):null}function gu(t){if(50<$o)throw $o=0,Hf=null,Error(s(185));for(var i=t.return;i!==null;)t=i,i=t.return;return t.tag===3?t.stateNode:null}var na={};function VT(t,i,a,l){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function un(t,i,a,l){return new VT(t,i,a,l)}function Lh(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Si(t,i){var a=t.alternate;return a===null?(a=un(t.tag,i,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=i,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,i=t.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function Ep(t,i){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=i,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,i=a.dependencies,t.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),t}function yu(t,i,a,l,h,d){var v=0;if(l=t,typeof t=="function")Lh(t)&&(v=1);else if(typeof t=="string")v=UA(t,a,fe.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case R:return t=un(31,a,i,h),t.elementType=R,t.lanes=d,t;case Z:return cs(a.children,h,d,i);case F:v=8,h|=24;break;case q:return t=un(12,a,i,h|2),t.elementType=q,t.lanes=d,t;case Ee:return t=un(13,a,i,h),t.elementType=Ee,t.lanes=d,t;case Me:return t=un(19,a,i,h),t.elementType=Me,t.lanes=d,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case re:case le:v=10;break e;case se:v=9;break e;case Oe:v=11;break e;case M:v=14;break e;case b:v=16,l=null;break e}v=29,a=Error(s(130,t===null?"null":typeof t,"")),l=null}return i=un(v,a,i,h),i.elementType=t,i.type=l,i.lanes=d,i}function cs(t,i,a,l){return t=un(7,t,l,i),t.lanes=a,t}function kh(t,i,a){return t=un(6,t,null,i),t.lanes=a,t}function jh(t,i,a){return i=un(4,t.children!==null?t.children:[],t.key,i),i.lanes=a,i.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},i}var ia=[],ra=0,_u=null,vu=0,bn=[],wn=0,hs=null,bi=1,wi="";function fs(t,i){ia[ra++]=vu,ia[ra++]=_u,_u=t,vu=i}function Tp(t,i,a){bn[wn++]=bi,bn[wn++]=wi,bn[wn++]=hs,hs=t;var l=bi;t=wi;var h=32-Ht(l)-1;l&=~(1<<h),a+=1;var d=32-Ht(i)+h;if(30<d){var v=h-h%5;d=(l&(1<<v)-1).toString(32),l>>=v,h-=v,bi=1<<32-Ht(i)+h|a<<h|l,wi=d+t}else bi=1<<d|a<<h|l,wi=t}function zh(t){t.return!==null&&(fs(t,1),Tp(t,1,0))}function Bh(t){for(;t===_u;)_u=ia[--ra],ia[ra]=null,vu=ia[--ra],ia[ra]=null;for(;t===hs;)hs=bn[--wn],bn[wn]=null,wi=bn[--wn],bn[wn]=null,bi=bn[--wn],bn[wn]=null}var Jt=null,at=null,ze=!1,ds=null,Wn=!1,qh=Error(s(519));function ms(t){var i=Error(s(418,""));throw Co(An(i,t)),qh}function Ap(t){var i=t.stateNode,a=t.type,l=t.memoizedProps;switch(i[yt]=t,i[ft]=l,a){case"dialog":xe("cancel",i),xe("close",i);break;case"iframe":case"object":case"embed":xe("load",i);break;case"video":case"audio":for(a=0;a<Wo.length;a++)xe(Wo[a],i);break;case"source":xe("error",i);break;case"img":case"image":case"link":xe("error",i),xe("load",i);break;case"details":xe("toggle",i);break;case"input":xe("invalid",i),Wr(i,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0),qs(i);break;case"select":xe("invalid",i);break;case"textarea":xe("invalid",i),Jr(i,l.value,l.defaultValue,l.children),qs(i)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||l.suppressHydrationWarning===!0||jy(i.textContent,a)?(l.popover!=null&&(xe("beforetoggle",i),xe("toggle",i)),l.onScroll!=null&&xe("scroll",i),l.onScrollEnd!=null&&xe("scrollend",i),l.onClick!=null&&(i.onclick=Ju),i=!0):i=!1,i||ms(t)}function Sp(t){for(Jt=t.return;Jt;)switch(Jt.tag){case 5:case 13:Wn=!1;return;case 27:case 3:Wn=!0;return;default:Jt=Jt.return}}function Ro(t){if(t!==Jt)return!1;if(!ze)return Sp(t),ze=!0,!1;var i=t.tag,a;if((a=i!==3&&i!==27)&&((a=i===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||sd(t.type,t.memoizedProps)),a=!a),a&&at&&ms(t),Sp(t),i===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));e:{for(t=t.nextSibling,i=0;t;){if(t.nodeType===8)if(a=t.data,a==="/$"){if(i===0){at=Pn(t.nextSibling);break e}i--}else a!=="$"&&a!=="$!"&&a!=="$?"||i++;t=t.nextSibling}at=null}}else i===27?(i=at,fr(t.type)?(t=ud,ud=null,at=t):at=i):at=Jt?Pn(t.stateNode.nextSibling):null;return!0}function Io(){at=Jt=null,ze=!1}function bp(){var t=ds;return t!==null&&(nn===null?nn=t:nn.push.apply(nn,t),ds=null),t}function Co(t){ds===null?ds=[t]:ds.push(t)}var Hh=W(null),ps=null,Ri=null;function Zi(t,i,a){ee(Hh,i._currentValue),i._currentValue=a}function Ii(t){t._currentValue=Hh.current,ie(Hh)}function Gh(t,i,a){for(;t!==null;){var l=t.alternate;if((t.childLanes&i)!==i?(t.childLanes|=i,l!==null&&(l.childLanes|=i)):l!==null&&(l.childLanes&i)!==i&&(l.childLanes|=i),t===a)break;t=t.return}}function Fh(t,i,a,l){var h=t.child;for(h!==null&&(h.return=t);h!==null;){var d=h.dependencies;if(d!==null){var v=h.child;d=d.firstContext;e:for(;d!==null;){var E=d;d=h;for(var w=0;w<i.length;w++)if(E.context===i[w]){d.lanes|=a,E=d.alternate,E!==null&&(E.lanes|=a),Gh(d.return,a,t),l||(v=null);break e}d=E.next}}else if(h.tag===18){if(v=h.return,v===null)throw Error(s(341));v.lanes|=a,d=v.alternate,d!==null&&(d.lanes|=a),Gh(v,a,t),v=null}else v=h.child;if(v!==null)v.return=h;else for(v=h;v!==null;){if(v===t){v=null;break}if(h=v.sibling,h!==null){h.return=v.return,v=h;break}v=v.return}h=v}}function xo(t,i,a,l){t=null;for(var h=i,d=!1;h!==null;){if(!d){if((h.flags&524288)!==0)d=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var v=h.alternate;if(v===null)throw Error(s(387));if(v=v.memoizedProps,v!==null){var E=h.type;ln(h.pendingProps.value,v.value)||(t!==null?t.push(E):t=[E])}}else if(h===wt.current){if(v=h.alternate,v===null)throw Error(s(387));v.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(t!==null?t.push(rl):t=[rl])}h=h.return}t!==null&&Fh(i,t,a,l),i.flags|=262144}function Eu(t){for(t=t.firstContext;t!==null;){if(!ln(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function gs(t){ps=t,Ri=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Gt(t){return wp(ps,t)}function Tu(t,i){return ps===null&&gs(t),wp(t,i)}function wp(t,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},Ri===null){if(t===null)throw Error(s(308));Ri=i,t.dependencies={lanes:0,firstContext:i},t.flags|=524288}else Ri=Ri.next=i;return a}var PT=typeof AbortController<"u"?AbortController:function(){var t=[],i=this.signal={aborted:!1,addEventListener:function(a,l){t.push(l)}};this.abort=function(){i.aborted=!0,t.forEach(function(a){return a()})}},UT=r.unstable_scheduleCallback,LT=r.unstable_NormalPriority,Et={$$typeof:le,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Qh(){return{controller:new PT,data:new Map,refCount:0}}function No(t){t.refCount--,t.refCount===0&&UT(LT,function(){t.controller.abort()})}var Do=null,Kh=0,sa=0,aa=null;function kT(t,i){if(Do===null){var a=Do=[];Kh=0,sa=$f(),aa={status:"pending",value:void 0,then:function(l){a.push(l)}}}return Kh++,i.then(Rp,Rp),i}function Rp(){if(--Kh===0&&Do!==null){aa!==null&&(aa.status="fulfilled");var t=Do;Do=null,sa=0,aa=null;for(var i=0;i<t.length;i++)(0,t[i])()}}function jT(t,i){var a=[],l={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return t.then(function(){l.status="fulfilled",l.value=i;for(var h=0;h<a.length;h++)(0,a[h])(i)},function(h){for(l.status="rejected",l.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),l}var Ip=Q.S;Q.S=function(t,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&kT(t,i),Ip!==null&&Ip(t,i)};var ys=W(null);function Yh(){var t=ys.current;return t!==null?t:We.pooledCache}function Au(t,i){i===null?ee(ys,ys.current):ee(ys,i.pool)}function Cp(){var t=Yh();return t===null?null:{parent:Et._currentValue,pool:t}}var Oo=Error(s(460)),xp=Error(s(474)),Su=Error(s(542)),Xh={then:function(){}};function Np(t){return t=t.status,t==="fulfilled"||t==="rejected"}function bu(){}function Dp(t,i,a){switch(a=t[a],a===void 0?t.push(i):a!==i&&(i.then(bu,bu),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,Mp(t),t;default:if(typeof i.status=="string")i.then(bu,bu);else{if(t=We,t!==null&&100<t.shellSuspendCounter)throw Error(s(482));t=i,t.status="pending",t.then(function(l){if(i.status==="pending"){var h=i;h.status="fulfilled",h.value=l}},function(l){if(i.status==="pending"){var h=i;h.status="rejected",h.reason=l}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,Mp(t),t}throw Mo=i,Oo}}var Mo=null;function Op(){if(Mo===null)throw Error(s(459));var t=Mo;return Mo=null,t}function Mp(t){if(t===Oo||t===Su)throw Error(s(483))}var Wi=!1;function $h(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Zh(t,i){t=t.updateQueue,i.updateQueue===t&&(i.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Ji(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function er(t,i,a){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(Ge&2)!==0){var h=l.pending;return h===null?i.next=i:(i.next=h.next,h.next=i),l.pending=i,i=gu(t),vp(t,null,a),i}return pu(t,l,i,a),gu(t)}function Vo(t,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194048)!==0)){var l=i.lanes;l&=t.pendingLanes,a|=l,i.lanes=a,oo(t,a)}}function Wh(t,i){var a=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var h=null,d=null;if(a=a.firstBaseUpdate,a!==null){do{var v={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};d===null?h=d=v:d=d.next=v,a=a.next}while(a!==null);d===null?h=d=i:d=d.next=i}else h=d=i;a={baseState:l.baseState,firstBaseUpdate:h,lastBaseUpdate:d,shared:l.shared,callbacks:l.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=i:t.next=i,a.lastBaseUpdate=i}var Jh=!1;function Po(){if(Jh){var t=aa;if(t!==null)throw t}}function Uo(t,i,a,l){Jh=!1;var h=t.updateQueue;Wi=!1;var d=h.firstBaseUpdate,v=h.lastBaseUpdate,E=h.shared.pending;if(E!==null){h.shared.pending=null;var w=E,j=w.next;w.next=null,v===null?d=j:v.next=j,v=w;var K=t.alternate;K!==null&&(K=K.updateQueue,E=K.lastBaseUpdate,E!==v&&(E===null?K.firstBaseUpdate=j:E.next=j,K.lastBaseUpdate=w))}if(d!==null){var X=h.baseState;v=0,K=j=w=null,E=d;do{var z=E.lane&-536870913,B=z!==E.lane;if(B?(Ue&z)===z:(l&z)===z){z!==0&&z===sa&&(Jh=!0),K!==null&&(K=K.next={lane:0,tag:E.tag,payload:E.payload,callback:null,next:null});e:{var _e=t,me=E;z=i;var Xe=a;switch(me.tag){case 1:if(_e=me.payload,typeof _e=="function"){X=_e.call(Xe,X,z);break e}X=_e;break e;case 3:_e.flags=_e.flags&-65537|128;case 0:if(_e=me.payload,z=typeof _e=="function"?_e.call(Xe,X,z):_e,z==null)break e;X=T({},X,z);break e;case 2:Wi=!0}}z=E.callback,z!==null&&(t.flags|=64,B&&(t.flags|=8192),B=h.callbacks,B===null?h.callbacks=[z]:B.push(z))}else B={lane:z,tag:E.tag,payload:E.payload,callback:E.callback,next:null},K===null?(j=K=B,w=X):K=K.next=B,v|=z;if(E=E.next,E===null){if(E=h.shared.pending,E===null)break;B=E,E=B.next,B.next=null,h.lastBaseUpdate=B,h.shared.pending=null}}while(!0);K===null&&(w=X),h.baseState=w,h.firstBaseUpdate=j,h.lastBaseUpdate=K,d===null&&(h.shared.lanes=0),lr|=v,t.lanes=v,t.memoizedState=X}}function Vp(t,i){if(typeof t!="function")throw Error(s(191,t));t.call(i)}function Pp(t,i){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)Vp(a[t],i)}var oa=W(null),wu=W(0);function Up(t,i){t=Vi,ee(wu,t),ee(oa,i),Vi=t|i.baseLanes}function ef(){ee(wu,Vi),ee(oa,oa.current)}function tf(){Vi=wu.current,ie(oa),ie(wu)}var tr=0,be=null,Ke=null,mt=null,Ru=!1,la=!1,_s=!1,Iu=0,Lo=0,ua=null,zT=0;function ut(){throw Error(s(321))}function nf(t,i){if(i===null)return!1;for(var a=0;a<i.length&&a<t.length;a++)if(!ln(t[a],i[a]))return!1;return!0}function rf(t,i,a,l,h,d){return tr=d,be=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,Q.H=t===null||t.memoizedState===null?vg:Eg,_s=!1,d=a(l,h),_s=!1,la&&(d=kp(i,a,l,h)),Lp(t),d}function Lp(t){Q.H=Mu;var i=Ke!==null&&Ke.next!==null;if(tr=0,mt=Ke=be=null,Ru=!1,Lo=0,ua=null,i)throw Error(s(300));t===null||Ct||(t=t.dependencies,t!==null&&Eu(t)&&(Ct=!0))}function kp(t,i,a,l){be=t;var h=0;do{if(la&&(ua=null),Lo=0,la=!1,25<=h)throw Error(s(301));if(h+=1,mt=Ke=null,t.updateQueue!=null){var d=t.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}Q.H=KT,d=i(a,l)}while(la);return d}function BT(){var t=Q.H,i=t.useState()[0];return i=typeof i.then=="function"?ko(i):i,t=t.useState()[0],(Ke!==null?Ke.memoizedState:null)!==t&&(be.flags|=1024),i}function sf(){var t=Iu!==0;return Iu=0,t}function af(t,i,a){i.updateQueue=t.updateQueue,i.flags&=-2053,t.lanes&=~a}function of(t){if(Ru){for(t=t.memoizedState;t!==null;){var i=t.queue;i!==null&&(i.pending=null),t=t.next}Ru=!1}tr=0,mt=Ke=be=null,la=!1,Lo=Iu=0,ua=null}function en(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return mt===null?be.memoizedState=mt=t:mt=mt.next=t,mt}function pt(){if(Ke===null){var t=be.alternate;t=t!==null?t.memoizedState:null}else t=Ke.next;var i=mt===null?be.memoizedState:mt.next;if(i!==null)mt=i,Ke=t;else{if(t===null)throw be.alternate===null?Error(s(467)):Error(s(310));Ke=t,t={memoizedState:Ke.memoizedState,baseState:Ke.baseState,baseQueue:Ke.baseQueue,queue:Ke.queue,next:null},mt===null?be.memoizedState=mt=t:mt=mt.next=t}return mt}function lf(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ko(t){var i=Lo;return Lo+=1,ua===null&&(ua=[]),t=Dp(ua,t,i),i=be,(mt===null?i.memoizedState:mt.next)===null&&(i=i.alternate,Q.H=i===null||i.memoizedState===null?vg:Eg),t}function Cu(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return ko(t);if(t.$$typeof===le)return Gt(t)}throw Error(s(438,String(t)))}function uf(t){var i=null,a=be.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var l=be.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(i={data:l.data.map(function(h){return h.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=lf(),be.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(t),l=0;l<t;l++)a[l]=O;return i.index++,a}function Ci(t,i){return typeof i=="function"?i(t):i}function xu(t){var i=pt();return cf(i,Ke,t)}function cf(t,i,a){var l=t.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=a;var h=t.baseQueue,d=l.pending;if(d!==null){if(h!==null){var v=h.next;h.next=d.next,d.next=v}i.baseQueue=h=d,l.pending=null}if(d=t.baseState,h===null)t.memoizedState=d;else{i=h.next;var E=v=null,w=null,j=i,K=!1;do{var X=j.lane&-536870913;if(X!==j.lane?(Ue&X)===X:(tr&X)===X){var z=j.revertLane;if(z===0)w!==null&&(w=w.next={lane:0,revertLane:0,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null}),X===sa&&(K=!0);else if((tr&z)===z){j=j.next,z===sa&&(K=!0);continue}else X={lane:0,revertLane:j.revertLane,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null},w===null?(E=w=X,v=d):w=w.next=X,be.lanes|=z,lr|=z;X=j.action,_s&&a(d,X),d=j.hasEagerState?j.eagerState:a(d,X)}else z={lane:X,revertLane:j.revertLane,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null},w===null?(E=w=z,v=d):w=w.next=z,be.lanes|=X,lr|=X;j=j.next}while(j!==null&&j!==i);if(w===null?v=d:w.next=E,!ln(d,t.memoizedState)&&(Ct=!0,K&&(a=aa,a!==null)))throw a;t.memoizedState=d,t.baseState=v,t.baseQueue=w,l.lastRenderedState=d}return h===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function hf(t){var i=pt(),a=i.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=t;var l=a.dispatch,h=a.pending,d=i.memoizedState;if(h!==null){a.pending=null;var v=h=h.next;do d=t(d,v.action),v=v.next;while(v!==h);ln(d,i.memoizedState)||(Ct=!0),i.memoizedState=d,i.baseQueue===null&&(i.baseState=d),a.lastRenderedState=d}return[d,l]}function jp(t,i,a){var l=be,h=pt(),d=ze;if(d){if(a===void 0)throw Error(s(407));a=a()}else a=i();var v=!ln((Ke||h).memoizedState,a);v&&(h.memoizedState=a,Ct=!0),h=h.queue;var E=qp.bind(null,l,h,t);if(jo(2048,8,E,[t]),h.getSnapshot!==i||v||mt!==null&&mt.memoizedState.tag&1){if(l.flags|=2048,ca(9,Nu(),Bp.bind(null,l,h,a,i),null),We===null)throw Error(s(349));d||(tr&124)!==0||zp(l,i,a)}return a}function zp(t,i,a){t.flags|=16384,t={getSnapshot:i,value:a},i=be.updateQueue,i===null?(i=lf(),be.updateQueue=i,i.stores=[t]):(a=i.stores,a===null?i.stores=[t]:a.push(t))}function Bp(t,i,a,l){i.value=a,i.getSnapshot=l,Hp(i)&&Gp(t)}function qp(t,i,a){return a(function(){Hp(i)&&Gp(t)})}function Hp(t){var i=t.getSnapshot;t=t.value;try{var a=i();return!ln(t,a)}catch{return!0}}function Gp(t){var i=ta(t,2);i!==null&&mn(i,t,2)}function ff(t){var i=en();if(typeof t=="function"){var a=t;if(t=a(),_s){an(!0);try{a()}finally{an(!1)}}}return i.memoizedState=i.baseState=t,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ci,lastRenderedState:t},i}function Fp(t,i,a,l){return t.baseState=a,cf(t,Ke,typeof l=="function"?l:Ci)}function qT(t,i,a,l,h){if(Ou(t))throw Error(s(485));if(t=i.action,t!==null){var d={payload:h,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){d.listeners.push(v)}};Q.T!==null?a(!0):d.isTransition=!1,l(d),a=i.pending,a===null?(d.next=i.pending=d,Qp(i,d)):(d.next=a.next,i.pending=a.next=d)}}function Qp(t,i){var a=i.action,l=i.payload,h=t.state;if(i.isTransition){var d=Q.T,v={};Q.T=v;try{var E=a(h,l),w=Q.S;w!==null&&w(v,E),Kp(t,i,E)}catch(j){df(t,i,j)}finally{Q.T=d}}else try{d=a(h,l),Kp(t,i,d)}catch(j){df(t,i,j)}}function Kp(t,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){Yp(t,i,l)},function(l){return df(t,i,l)}):Yp(t,i,a)}function Yp(t,i,a){i.status="fulfilled",i.value=a,Xp(i),t.state=a,i=t.pending,i!==null&&(a=i.next,a===i?t.pending=null:(a=a.next,i.next=a,Qp(t,a)))}function df(t,i,a){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do i.status="rejected",i.reason=a,Xp(i),i=i.next;while(i!==l)}t.action=null}function Xp(t){t=t.listeners;for(var i=0;i<t.length;i++)(0,t[i])()}function $p(t,i){return i}function Zp(t,i){if(ze){var a=We.formState;if(a!==null){e:{var l=be;if(ze){if(at){t:{for(var h=at,d=Wn;h.nodeType!==8;){if(!d){h=null;break t}if(h=Pn(h.nextSibling),h===null){h=null;break t}}d=h.data,h=d==="F!"||d==="F"?h:null}if(h){at=Pn(h.nextSibling),l=h.data==="F!";break e}}ms(l)}l=!1}l&&(i=a[0])}}return a=en(),a.memoizedState=a.baseState=i,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:$p,lastRenderedState:i},a.queue=l,a=gg.bind(null,be,l),l.dispatch=a,l=ff(!1),d=_f.bind(null,be,!1,l.queue),l=en(),h={state:i,dispatch:null,action:t,pending:null},l.queue=h,a=qT.bind(null,be,h,d,a),h.dispatch=a,l.memoizedState=t,[i,a,!1]}function Wp(t){var i=pt();return Jp(i,Ke,t)}function Jp(t,i,a){if(i=cf(t,i,$p)[0],t=xu(Ci)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var l=ko(i)}catch(v){throw v===Oo?Su:v}else l=i;i=pt();var h=i.queue,d=h.dispatch;return a!==i.memoizedState&&(be.flags|=2048,ca(9,Nu(),HT.bind(null,h,a),null)),[l,d,t]}function HT(t,i){t.action=i}function eg(t){var i=pt(),a=Ke;if(a!==null)return Jp(i,a,t);pt(),i=i.memoizedState,a=pt();var l=a.queue.dispatch;return a.memoizedState=t,[i,l,!1]}function ca(t,i,a,l){return t={tag:t,create:a,deps:l,inst:i,next:null},i=be.updateQueue,i===null&&(i=lf(),be.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=t.next=t:(l=a.next,a.next=t,t.next=l,i.lastEffect=t),t}function Nu(){return{destroy:void 0,resource:void 0}}function tg(){return pt().memoizedState}function Du(t,i,a,l){var h=en();l=l===void 0?null:l,be.flags|=t,h.memoizedState=ca(1|i,Nu(),a,l)}function jo(t,i,a,l){var h=pt();l=l===void 0?null:l;var d=h.memoizedState.inst;Ke!==null&&l!==null&&nf(l,Ke.memoizedState.deps)?h.memoizedState=ca(i,d,a,l):(be.flags|=t,h.memoizedState=ca(1|i,d,a,l))}function ng(t,i){Du(8390656,8,t,i)}function ig(t,i){jo(2048,8,t,i)}function rg(t,i){return jo(4,2,t,i)}function sg(t,i){return jo(4,4,t,i)}function ag(t,i){if(typeof i=="function"){t=t();var a=i(t);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return t=t(),i.current=t,function(){i.current=null}}function og(t,i,a){a=a!=null?a.concat([t]):null,jo(4,4,ag.bind(null,i,t),a)}function mf(){}function lg(t,i){var a=pt();i=i===void 0?null:i;var l=a.memoizedState;return i!==null&&nf(i,l[1])?l[0]:(a.memoizedState=[t,i],t)}function ug(t,i){var a=pt();i=i===void 0?null:i;var l=a.memoizedState;if(i!==null&&nf(i,l[1]))return l[0];if(l=t(),_s){an(!0);try{t()}finally{an(!1)}}return a.memoizedState=[l,i],l}function pf(t,i,a){return a===void 0||(tr&1073741824)!==0?t.memoizedState=i:(t.memoizedState=a,t=fy(),be.lanes|=t,lr|=t,a)}function cg(t,i,a,l){return ln(a,i)?a:oa.current!==null?(t=pf(t,a,l),ln(t,i)||(Ct=!0),t):(tr&42)===0?(Ct=!0,t.memoizedState=a):(t=fy(),be.lanes|=t,lr|=t,i)}function hg(t,i,a,l,h){var d=ne.p;ne.p=d!==0&&8>d?d:8;var v=Q.T,E={};Q.T=E,_f(t,!1,i,a);try{var w=h(),j=Q.S;if(j!==null&&j(E,w),w!==null&&typeof w=="object"&&typeof w.then=="function"){var K=jT(w,l);zo(t,i,K,dn(t))}else zo(t,i,l,dn(t))}catch(X){zo(t,i,{then:function(){},status:"rejected",reason:X},dn())}finally{ne.p=d,Q.T=v}}function GT(){}function gf(t,i,a,l){if(t.tag!==5)throw Error(s(476));var h=fg(t).queue;hg(t,h,i,ce,a===null?GT:function(){return dg(t),a(l)})}function fg(t){var i=t.memoizedState;if(i!==null)return i;i={memoizedState:ce,baseState:ce,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ci,lastRenderedState:ce},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ci,lastRenderedState:a},next:null},t.memoizedState=i,t=t.alternate,t!==null&&(t.memoizedState=i),i}function dg(t){var i=fg(t).next.queue;zo(t,i,{},dn())}function yf(){return Gt(rl)}function mg(){return pt().memoizedState}function pg(){return pt().memoizedState}function FT(t){for(var i=t.return;i!==null;){switch(i.tag){case 24:case 3:var a=dn();t=Ji(a);var l=er(i,t,a);l!==null&&(mn(l,i,a),Vo(l,i,a)),i={cache:Qh()},t.payload=i;return}i=i.return}}function QT(t,i,a){var l=dn();a={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},Ou(t)?yg(i,a):(a=Uh(t,i,a,l),a!==null&&(mn(a,t,l),_g(a,i,l)))}function gg(t,i,a){var l=dn();zo(t,i,a,l)}function zo(t,i,a,l){var h={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(Ou(t))yg(i,h);else{var d=t.alternate;if(t.lanes===0&&(d===null||d.lanes===0)&&(d=i.lastRenderedReducer,d!==null))try{var v=i.lastRenderedState,E=d(v,a);if(h.hasEagerState=!0,h.eagerState=E,ln(E,v))return pu(t,i,h,0),We===null&&mu(),!1}catch{}finally{}if(a=Uh(t,i,h,l),a!==null)return mn(a,t,l),_g(a,i,l),!0}return!1}function _f(t,i,a,l){if(l={lane:2,revertLane:$f(),action:l,hasEagerState:!1,eagerState:null,next:null},Ou(t)){if(i)throw Error(s(479))}else i=Uh(t,a,l,2),i!==null&&mn(i,t,2)}function Ou(t){var i=t.alternate;return t===be||i!==null&&i===be}function yg(t,i){la=Ru=!0;var a=t.pending;a===null?i.next=i:(i.next=a.next,a.next=i),t.pending=i}function _g(t,i,a){if((a&4194048)!==0){var l=i.lanes;l&=t.pendingLanes,a|=l,i.lanes=a,oo(t,a)}}var Mu={readContext:Gt,use:Cu,useCallback:ut,useContext:ut,useEffect:ut,useImperativeHandle:ut,useLayoutEffect:ut,useInsertionEffect:ut,useMemo:ut,useReducer:ut,useRef:ut,useState:ut,useDebugValue:ut,useDeferredValue:ut,useTransition:ut,useSyncExternalStore:ut,useId:ut,useHostTransitionStatus:ut,useFormState:ut,useActionState:ut,useOptimistic:ut,useMemoCache:ut,useCacheRefresh:ut},vg={readContext:Gt,use:Cu,useCallback:function(t,i){return en().memoizedState=[t,i===void 0?null:i],t},useContext:Gt,useEffect:ng,useImperativeHandle:function(t,i,a){a=a!=null?a.concat([t]):null,Du(4194308,4,ag.bind(null,i,t),a)},useLayoutEffect:function(t,i){return Du(4194308,4,t,i)},useInsertionEffect:function(t,i){Du(4,2,t,i)},useMemo:function(t,i){var a=en();i=i===void 0?null:i;var l=t();if(_s){an(!0);try{t()}finally{an(!1)}}return a.memoizedState=[l,i],l},useReducer:function(t,i,a){var l=en();if(a!==void 0){var h=a(i);if(_s){an(!0);try{a(i)}finally{an(!1)}}}else h=i;return l.memoizedState=l.baseState=h,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:h},l.queue=t,t=t.dispatch=QT.bind(null,be,t),[l.memoizedState,t]},useRef:function(t){var i=en();return t={current:t},i.memoizedState=t},useState:function(t){t=ff(t);var i=t.queue,a=gg.bind(null,be,i);return i.dispatch=a,[t.memoizedState,a]},useDebugValue:mf,useDeferredValue:function(t,i){var a=en();return pf(a,t,i)},useTransition:function(){var t=ff(!1);return t=hg.bind(null,be,t.queue,!0,!1),en().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,i,a){var l=be,h=en();if(ze){if(a===void 0)throw Error(s(407));a=a()}else{if(a=i(),We===null)throw Error(s(349));(Ue&124)!==0||zp(l,i,a)}h.memoizedState=a;var d={value:a,getSnapshot:i};return h.queue=d,ng(qp.bind(null,l,d,t),[t]),l.flags|=2048,ca(9,Nu(),Bp.bind(null,l,d,a,i),null),a},useId:function(){var t=en(),i=We.identifierPrefix;if(ze){var a=wi,l=bi;a=(l&~(1<<32-Ht(l)-1)).toString(32)+a,i=""+i+"R"+a,a=Iu++,0<a&&(i+="H"+a.toString(32)),i+=""}else a=zT++,i=""+i+"r"+a.toString(32)+"";return t.memoizedState=i},useHostTransitionStatus:yf,useFormState:Zp,useActionState:Zp,useOptimistic:function(t){var i=en();i.memoizedState=i.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=_f.bind(null,be,!0,a),a.dispatch=i,[t,i]},useMemoCache:uf,useCacheRefresh:function(){return en().memoizedState=FT.bind(null,be)}},Eg={readContext:Gt,use:Cu,useCallback:lg,useContext:Gt,useEffect:ig,useImperativeHandle:og,useInsertionEffect:rg,useLayoutEffect:sg,useMemo:ug,useReducer:xu,useRef:tg,useState:function(){return xu(Ci)},useDebugValue:mf,useDeferredValue:function(t,i){var a=pt();return cg(a,Ke.memoizedState,t,i)},useTransition:function(){var t=xu(Ci)[0],i=pt().memoizedState;return[typeof t=="boolean"?t:ko(t),i]},useSyncExternalStore:jp,useId:mg,useHostTransitionStatus:yf,useFormState:Wp,useActionState:Wp,useOptimistic:function(t,i){var a=pt();return Fp(a,Ke,t,i)},useMemoCache:uf,useCacheRefresh:pg},KT={readContext:Gt,use:Cu,useCallback:lg,useContext:Gt,useEffect:ig,useImperativeHandle:og,useInsertionEffect:rg,useLayoutEffect:sg,useMemo:ug,useReducer:hf,useRef:tg,useState:function(){return hf(Ci)},useDebugValue:mf,useDeferredValue:function(t,i){var a=pt();return Ke===null?pf(a,t,i):cg(a,Ke.memoizedState,t,i)},useTransition:function(){var t=hf(Ci)[0],i=pt().memoizedState;return[typeof t=="boolean"?t:ko(t),i]},useSyncExternalStore:jp,useId:mg,useHostTransitionStatus:yf,useFormState:eg,useActionState:eg,useOptimistic:function(t,i){var a=pt();return Ke!==null?Fp(a,Ke,t,i):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:uf,useCacheRefresh:pg},ha=null,Bo=0;function Vu(t){var i=Bo;return Bo+=1,ha===null&&(ha=[]),Dp(ha,t,i)}function qo(t,i){i=i.props.ref,t.ref=i!==void 0?i:null}function Pu(t,i){throw i.$$typeof===I?Error(s(525)):(t=Object.prototype.toString.call(i),Error(s(31,t==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":t)))}function Tg(t){var i=t._init;return i(t._payload)}function Ag(t){function i(P,D){if(t){var k=P.deletions;k===null?(P.deletions=[D],P.flags|=16):k.push(D)}}function a(P,D){if(!t)return null;for(;D!==null;)i(P,D),D=D.sibling;return null}function l(P){for(var D=new Map;P!==null;)P.key!==null?D.set(P.key,P):D.set(P.index,P),P=P.sibling;return D}function h(P,D){return P=Si(P,D),P.index=0,P.sibling=null,P}function d(P,D,k){return P.index=k,t?(k=P.alternate,k!==null?(k=k.index,k<D?(P.flags|=67108866,D):k):(P.flags|=67108866,D)):(P.flags|=1048576,D)}function v(P){return t&&P.alternate===null&&(P.flags|=67108866),P}function E(P,D,k,Y){return D===null||D.tag!==6?(D=kh(k,P.mode,Y),D.return=P,D):(D=h(D,k),D.return=P,D)}function w(P,D,k,Y){var oe=k.type;return oe===Z?K(P,D,k.props.children,Y,k.key):D!==null&&(D.elementType===oe||typeof oe=="object"&&oe!==null&&oe.$$typeof===b&&Tg(oe)===D.type)?(D=h(D,k.props),qo(D,k),D.return=P,D):(D=yu(k.type,k.key,k.props,null,P.mode,Y),qo(D,k),D.return=P,D)}function j(P,D,k,Y){return D===null||D.tag!==4||D.stateNode.containerInfo!==k.containerInfo||D.stateNode.implementation!==k.implementation?(D=jh(k,P.mode,Y),D.return=P,D):(D=h(D,k.children||[]),D.return=P,D)}function K(P,D,k,Y,oe){return D===null||D.tag!==7?(D=cs(k,P.mode,Y,oe),D.return=P,D):(D=h(D,k),D.return=P,D)}function X(P,D,k){if(typeof D=="string"&&D!==""||typeof D=="number"||typeof D=="bigint")return D=kh(""+D,P.mode,k),D.return=P,D;if(typeof D=="object"&&D!==null){switch(D.$$typeof){case x:return k=yu(D.type,D.key,D.props,null,P.mode,k),qo(k,D),k.return=P,k;case G:return D=jh(D,P.mode,k),D.return=P,D;case b:var Y=D._init;return D=Y(D._payload),X(P,D,k)}if(rt(D)||U(D))return D=cs(D,P.mode,k,null),D.return=P,D;if(typeof D.then=="function")return X(P,Vu(D),k);if(D.$$typeof===le)return X(P,Tu(P,D),k);Pu(P,D)}return null}function z(P,D,k,Y){var oe=D!==null?D.key:null;if(typeof k=="string"&&k!==""||typeof k=="number"||typeof k=="bigint")return oe!==null?null:E(P,D,""+k,Y);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case x:return k.key===oe?w(P,D,k,Y):null;case G:return k.key===oe?j(P,D,k,Y):null;case b:return oe=k._init,k=oe(k._payload),z(P,D,k,Y)}if(rt(k)||U(k))return oe!==null?null:K(P,D,k,Y,null);if(typeof k.then=="function")return z(P,D,Vu(k),Y);if(k.$$typeof===le)return z(P,D,Tu(P,k),Y);Pu(P,k)}return null}function B(P,D,k,Y,oe){if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return P=P.get(k)||null,E(D,P,""+Y,oe);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case x:return P=P.get(Y.key===null?k:Y.key)||null,w(D,P,Y,oe);case G:return P=P.get(Y.key===null?k:Y.key)||null,j(D,P,Y,oe);case b:var Ie=Y._init;return Y=Ie(Y._payload),B(P,D,k,Y,oe)}if(rt(Y)||U(Y))return P=P.get(k)||null,K(D,P,Y,oe,null);if(typeof Y.then=="function")return B(P,D,k,Vu(Y),oe);if(Y.$$typeof===le)return B(P,D,k,Tu(D,Y),oe);Pu(D,Y)}return null}function _e(P,D,k,Y){for(var oe=null,Ie=null,ue=D,pe=D=0,Nt=null;ue!==null&&pe<k.length;pe++){ue.index>pe?(Nt=ue,ue=null):Nt=ue.sibling;var ke=z(P,ue,k[pe],Y);if(ke===null){ue===null&&(ue=Nt);break}t&&ue&&ke.alternate===null&&i(P,ue),D=d(ke,D,pe),Ie===null?oe=ke:Ie.sibling=ke,Ie=ke,ue=Nt}if(pe===k.length)return a(P,ue),ze&&fs(P,pe),oe;if(ue===null){for(;pe<k.length;pe++)ue=X(P,k[pe],Y),ue!==null&&(D=d(ue,D,pe),Ie===null?oe=ue:Ie.sibling=ue,Ie=ue);return ze&&fs(P,pe),oe}for(ue=l(ue);pe<k.length;pe++)Nt=B(ue,P,pe,k[pe],Y),Nt!==null&&(t&&Nt.alternate!==null&&ue.delete(Nt.key===null?pe:Nt.key),D=d(Nt,D,pe),Ie===null?oe=Nt:Ie.sibling=Nt,Ie=Nt);return t&&ue.forEach(function(yr){return i(P,yr)}),ze&&fs(P,pe),oe}function me(P,D,k,Y){if(k==null)throw Error(s(151));for(var oe=null,Ie=null,ue=D,pe=D=0,Nt=null,ke=k.next();ue!==null&&!ke.done;pe++,ke=k.next()){ue.index>pe?(Nt=ue,ue=null):Nt=ue.sibling;var yr=z(P,ue,ke.value,Y);if(yr===null){ue===null&&(ue=Nt);break}t&&ue&&yr.alternate===null&&i(P,ue),D=d(yr,D,pe),Ie===null?oe=yr:Ie.sibling=yr,Ie=yr,ue=Nt}if(ke.done)return a(P,ue),ze&&fs(P,pe),oe;if(ue===null){for(;!ke.done;pe++,ke=k.next())ke=X(P,ke.value,Y),ke!==null&&(D=d(ke,D,pe),Ie===null?oe=ke:Ie.sibling=ke,Ie=ke);return ze&&fs(P,pe),oe}for(ue=l(ue);!ke.done;pe++,ke=k.next())ke=B(ue,P,pe,ke.value,Y),ke!==null&&(t&&ke.alternate!==null&&ue.delete(ke.key===null?pe:ke.key),D=d(ke,D,pe),Ie===null?oe=ke:Ie.sibling=ke,Ie=ke);return t&&ue.forEach(function(YA){return i(P,YA)}),ze&&fs(P,pe),oe}function Xe(P,D,k,Y){if(typeof k=="object"&&k!==null&&k.type===Z&&k.key===null&&(k=k.props.children),typeof k=="object"&&k!==null){switch(k.$$typeof){case x:e:{for(var oe=k.key;D!==null;){if(D.key===oe){if(oe=k.type,oe===Z){if(D.tag===7){a(P,D.sibling),Y=h(D,k.props.children),Y.return=P,P=Y;break e}}else if(D.elementType===oe||typeof oe=="object"&&oe!==null&&oe.$$typeof===b&&Tg(oe)===D.type){a(P,D.sibling),Y=h(D,k.props),qo(Y,k),Y.return=P,P=Y;break e}a(P,D);break}else i(P,D);D=D.sibling}k.type===Z?(Y=cs(k.props.children,P.mode,Y,k.key),Y.return=P,P=Y):(Y=yu(k.type,k.key,k.props,null,P.mode,Y),qo(Y,k),Y.return=P,P=Y)}return v(P);case G:e:{for(oe=k.key;D!==null;){if(D.key===oe)if(D.tag===4&&D.stateNode.containerInfo===k.containerInfo&&D.stateNode.implementation===k.implementation){a(P,D.sibling),Y=h(D,k.children||[]),Y.return=P,P=Y;break e}else{a(P,D);break}else i(P,D);D=D.sibling}Y=jh(k,P.mode,Y),Y.return=P,P=Y}return v(P);case b:return oe=k._init,k=oe(k._payload),Xe(P,D,k,Y)}if(rt(k))return _e(P,D,k,Y);if(U(k)){if(oe=U(k),typeof oe!="function")throw Error(s(150));return k=oe.call(k),me(P,D,k,Y)}if(typeof k.then=="function")return Xe(P,D,Vu(k),Y);if(k.$$typeof===le)return Xe(P,D,Tu(P,k),Y);Pu(P,k)}return typeof k=="string"&&k!==""||typeof k=="number"||typeof k=="bigint"?(k=""+k,D!==null&&D.tag===6?(a(P,D.sibling),Y=h(D,k),Y.return=P,P=Y):(a(P,D),Y=kh(k,P.mode,Y),Y.return=P,P=Y),v(P)):a(P,D)}return function(P,D,k,Y){try{Bo=0;var oe=Xe(P,D,k,Y);return ha=null,oe}catch(ue){if(ue===Oo||ue===Su)throw ue;var Ie=un(29,ue,null,P.mode);return Ie.lanes=Y,Ie.return=P,Ie}finally{}}}var fa=Ag(!0),Sg=Ag(!1),Rn=W(null),Jn=null;function nr(t){var i=t.alternate;ee(Tt,Tt.current&1),ee(Rn,t),Jn===null&&(i===null||oa.current!==null||i.memoizedState!==null)&&(Jn=t)}function bg(t){if(t.tag===22){if(ee(Tt,Tt.current),ee(Rn,t),Jn===null){var i=t.alternate;i!==null&&i.memoizedState!==null&&(Jn=t)}}else ir()}function ir(){ee(Tt,Tt.current),ee(Rn,Rn.current)}function xi(t){ie(Rn),Jn===t&&(Jn=null),ie(Tt)}var Tt=W(0);function Uu(t){for(var i=t;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||ld(a)))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}function vf(t,i,a,l){i=t.memoizedState,a=a(l,i),a=a==null?i:T({},i,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var Ef={enqueueSetState:function(t,i,a){t=t._reactInternals;var l=dn(),h=Ji(l);h.payload=i,a!=null&&(h.callback=a),i=er(t,h,l),i!==null&&(mn(i,t,l),Vo(i,t,l))},enqueueReplaceState:function(t,i,a){t=t._reactInternals;var l=dn(),h=Ji(l);h.tag=1,h.payload=i,a!=null&&(h.callback=a),i=er(t,h,l),i!==null&&(mn(i,t,l),Vo(i,t,l))},enqueueForceUpdate:function(t,i){t=t._reactInternals;var a=dn(),l=Ji(a);l.tag=2,i!=null&&(l.callback=i),i=er(t,l,a),i!==null&&(mn(i,t,a),Vo(i,t,a))}};function wg(t,i,a,l,h,d,v){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,d,v):i.prototype&&i.prototype.isPureReactComponent?!bo(a,l)||!bo(h,d):!0}function Rg(t,i,a,l){t=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,l),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,l),i.state!==t&&Ef.enqueueReplaceState(i,i.state,null)}function vs(t,i){var a=i;if("ref"in i){a={};for(var l in i)l!=="ref"&&(a[l]=i[l])}if(t=t.defaultProps){a===i&&(a=T({},a));for(var h in t)a[h]===void 0&&(a[h]=t[h])}return a}var Lu=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function Ig(t){Lu(t)}function Cg(t){console.error(t)}function xg(t){Lu(t)}function ku(t,i){try{var a=t.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(l){setTimeout(function(){throw l})}}function Ng(t,i,a){try{var l=t.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function Tf(t,i,a){return a=Ji(a),a.tag=3,a.payload={element:null},a.callback=function(){ku(t,i)},a}function Dg(t){return t=Ji(t),t.tag=3,t}function Og(t,i,a,l){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var d=l.value;t.payload=function(){return h(d)},t.callback=function(){Ng(i,a,l)}}var v=a.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(t.callback=function(){Ng(i,a,l),typeof h!="function"&&(ur===null?ur=new Set([this]):ur.add(this));var E=l.stack;this.componentDidCatch(l.value,{componentStack:E!==null?E:""})})}function YT(t,i,a,l,h){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(i=a.alternate,i!==null&&xo(i,a,h,!0),a=Rn.current,a!==null){switch(a.tag){case 13:return Jn===null?Ff():a.alternate===null&&ot===0&&(ot=3),a.flags&=-257,a.flags|=65536,a.lanes=h,l===Xh?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([l]):i.add(l),Kf(t,l,h)),!1;case 22:return a.flags|=65536,l===Xh?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([l]):a.add(l)),Kf(t,l,h)),!1}throw Error(s(435,a.tag))}return Kf(t,l,h),Ff(),!1}if(ze)return i=Rn.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=h,l!==qh&&(t=Error(s(422),{cause:l}),Co(An(t,a)))):(l!==qh&&(i=Error(s(423),{cause:l}),Co(An(i,a))),t=t.current.alternate,t.flags|=65536,h&=-h,t.lanes|=h,l=An(l,a),h=Tf(t.stateNode,l,h),Wh(t,h),ot!==4&&(ot=2)),!1;var d=Error(s(520),{cause:l});if(d=An(d,a),Xo===null?Xo=[d]:Xo.push(d),ot!==4&&(ot=2),i===null)return!0;l=An(l,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,t=h&-h,a.lanes|=t,t=Tf(a.stateNode,l,t),Wh(a,t),!1;case 1:if(i=a.type,d=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(ur===null||!ur.has(d))))return a.flags|=65536,h&=-h,a.lanes|=h,h=Dg(h),Og(h,t,a,l),Wh(a,h),!1}a=a.return}while(a!==null);return!1}var Mg=Error(s(461)),Ct=!1;function Ut(t,i,a,l){i.child=t===null?Sg(i,null,a,l):fa(i,t.child,a,l)}function Vg(t,i,a,l,h){a=a.render;var d=i.ref;if("ref"in l){var v={};for(var E in l)E!=="ref"&&(v[E]=l[E])}else v=l;return gs(i),l=rf(t,i,a,v,d,h),E=sf(),t!==null&&!Ct?(af(t,i,h),Ni(t,i,h)):(ze&&E&&zh(i),i.flags|=1,Ut(t,i,l,h),i.child)}function Pg(t,i,a,l,h){if(t===null){var d=a.type;return typeof d=="function"&&!Lh(d)&&d.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=d,Ug(t,i,d,l,h)):(t=yu(a.type,null,l,i,i.mode,h),t.ref=i.ref,t.return=i,i.child=t)}if(d=t.child,!xf(t,h)){var v=d.memoizedProps;if(a=a.compare,a=a!==null?a:bo,a(v,l)&&t.ref===i.ref)return Ni(t,i,h)}return i.flags|=1,t=Si(d,l),t.ref=i.ref,t.return=i,i.child=t}function Ug(t,i,a,l,h){if(t!==null){var d=t.memoizedProps;if(bo(d,l)&&t.ref===i.ref)if(Ct=!1,i.pendingProps=l=d,xf(t,h))(t.flags&131072)!==0&&(Ct=!0);else return i.lanes=t.lanes,Ni(t,i,h)}return Af(t,i,a,l,h)}function Lg(t,i,a){var l=i.pendingProps,h=l.children,d=t!==null?t.memoizedState:null;if(l.mode==="hidden"){if((i.flags&128)!==0){if(l=d!==null?d.baseLanes|a:a,t!==null){for(h=i.child=t.child,d=0;h!==null;)d=d|h.lanes|h.childLanes,h=h.sibling;i.childLanes=d&~l}else i.childLanes=0,i.child=null;return kg(t,i,l,a)}if((a&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},t!==null&&Au(i,d!==null?d.cachePool:null),d!==null?Up(i,d):ef(),bg(i);else return i.lanes=i.childLanes=536870912,kg(t,i,d!==null?d.baseLanes|a:a,a)}else d!==null?(Au(i,d.cachePool),Up(i,d),ir(),i.memoizedState=null):(t!==null&&Au(i,null),ef(),ir());return Ut(t,i,h,a),i.child}function kg(t,i,a,l){var h=Yh();return h=h===null?null:{parent:Et._currentValue,pool:h},i.memoizedState={baseLanes:a,cachePool:h},t!==null&&Au(i,null),ef(),bg(i),t!==null&&xo(t,i,l,!0),null}function ju(t,i){var a=i.ref;if(a===null)t!==null&&t.ref!==null&&(i.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(t===null||t.ref!==a)&&(i.flags|=4194816)}}function Af(t,i,a,l,h){return gs(i),a=rf(t,i,a,l,void 0,h),l=sf(),t!==null&&!Ct?(af(t,i,h),Ni(t,i,h)):(ze&&l&&zh(i),i.flags|=1,Ut(t,i,a,h),i.child)}function jg(t,i,a,l,h,d){return gs(i),i.updateQueue=null,a=kp(i,l,a,h),Lp(t),l=sf(),t!==null&&!Ct?(af(t,i,d),Ni(t,i,d)):(ze&&l&&zh(i),i.flags|=1,Ut(t,i,a,d),i.child)}function zg(t,i,a,l,h){if(gs(i),i.stateNode===null){var d=na,v=a.contextType;typeof v=="object"&&v!==null&&(d=Gt(v)),d=new a(l,d),i.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=Ef,i.stateNode=d,d._reactInternals=i,d=i.stateNode,d.props=l,d.state=i.memoizedState,d.refs={},$h(i),v=a.contextType,d.context=typeof v=="object"&&v!==null?Gt(v):na,d.state=i.memoizedState,v=a.getDerivedStateFromProps,typeof v=="function"&&(vf(i,a,v,l),d.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(v=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),v!==d.state&&Ef.enqueueReplaceState(d,d.state,null),Uo(i,l,d,h),Po(),d.state=i.memoizedState),typeof d.componentDidMount=="function"&&(i.flags|=4194308),l=!0}else if(t===null){d=i.stateNode;var E=i.memoizedProps,w=vs(a,E);d.props=w;var j=d.context,K=a.contextType;v=na,typeof K=="object"&&K!==null&&(v=Gt(K));var X=a.getDerivedStateFromProps;K=typeof X=="function"||typeof d.getSnapshotBeforeUpdate=="function",E=i.pendingProps!==E,K||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(E||j!==v)&&Rg(i,d,l,v),Wi=!1;var z=i.memoizedState;d.state=z,Uo(i,l,d,h),Po(),j=i.memoizedState,E||z!==j||Wi?(typeof X=="function"&&(vf(i,a,X,l),j=i.memoizedState),(w=Wi||wg(i,a,w,l,z,j,v))?(K||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(i.flags|=4194308)):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=l,i.memoizedState=j),d.props=l,d.state=j,d.context=v,l=w):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),l=!1)}else{d=i.stateNode,Zh(t,i),v=i.memoizedProps,K=vs(a,v),d.props=K,X=i.pendingProps,z=d.context,j=a.contextType,w=na,typeof j=="object"&&j!==null&&(w=Gt(j)),E=a.getDerivedStateFromProps,(j=typeof E=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(v!==X||z!==w)&&Rg(i,d,l,w),Wi=!1,z=i.memoizedState,d.state=z,Uo(i,l,d,h),Po();var B=i.memoizedState;v!==X||z!==B||Wi||t!==null&&t.dependencies!==null&&Eu(t.dependencies)?(typeof E=="function"&&(vf(i,a,E,l),B=i.memoizedState),(K=Wi||wg(i,a,K,l,z,B,w)||t!==null&&t.dependencies!==null&&Eu(t.dependencies))?(j||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(l,B,w),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(l,B,w)),typeof d.componentDidUpdate=="function"&&(i.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof d.componentDidUpdate!="function"||v===t.memoizedProps&&z===t.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||v===t.memoizedProps&&z===t.memoizedState||(i.flags|=1024),i.memoizedProps=l,i.memoizedState=B),d.props=l,d.state=B,d.context=w,l=K):(typeof d.componentDidUpdate!="function"||v===t.memoizedProps&&z===t.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||v===t.memoizedProps&&z===t.memoizedState||(i.flags|=1024),l=!1)}return d=l,ju(t,i),l=(i.flags&128)!==0,d||l?(d=i.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:d.render(),i.flags|=1,t!==null&&l?(i.child=fa(i,t.child,null,h),i.child=fa(i,null,a,h)):Ut(t,i,a,h),i.memoizedState=d.state,t=i.child):t=Ni(t,i,h),t}function Bg(t,i,a,l){return Io(),i.flags|=256,Ut(t,i,a,l),i.child}var Sf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function bf(t){return{baseLanes:t,cachePool:Cp()}}function wf(t,i,a){return t=t!==null?t.childLanes&~a:0,i&&(t|=In),t}function qg(t,i,a){var l=i.pendingProps,h=!1,d=(i.flags&128)!==0,v;if((v=d)||(v=t!==null&&t.memoizedState===null?!1:(Tt.current&2)!==0),v&&(h=!0,i.flags&=-129),v=(i.flags&32)!==0,i.flags&=-33,t===null){if(ze){if(h?nr(i):ir(),ze){var E=at,w;if(w=E){e:{for(w=E,E=Wn;w.nodeType!==8;){if(!E){E=null;break e}if(w=Pn(w.nextSibling),w===null){E=null;break e}}E=w}E!==null?(i.memoizedState={dehydrated:E,treeContext:hs!==null?{id:bi,overflow:wi}:null,retryLane:536870912,hydrationErrors:null},w=un(18,null,null,0),w.stateNode=E,w.return=i,i.child=w,Jt=i,at=null,w=!0):w=!1}w||ms(i)}if(E=i.memoizedState,E!==null&&(E=E.dehydrated,E!==null))return ld(E)?i.lanes=32:i.lanes=536870912,null;xi(i)}return E=l.children,l=l.fallback,h?(ir(),h=i.mode,E=zu({mode:"hidden",children:E},h),l=cs(l,h,a,null),E.return=i,l.return=i,E.sibling=l,i.child=E,h=i.child,h.memoizedState=bf(a),h.childLanes=wf(t,v,a),i.memoizedState=Sf,l):(nr(i),Rf(i,E))}if(w=t.memoizedState,w!==null&&(E=w.dehydrated,E!==null)){if(d)i.flags&256?(nr(i),i.flags&=-257,i=If(t,i,a)):i.memoizedState!==null?(ir(),i.child=t.child,i.flags|=128,i=null):(ir(),h=l.fallback,E=i.mode,l=zu({mode:"visible",children:l.children},E),h=cs(h,E,a,null),h.flags|=2,l.return=i,h.return=i,l.sibling=h,i.child=l,fa(i,t.child,null,a),l=i.child,l.memoizedState=bf(a),l.childLanes=wf(t,v,a),i.memoizedState=Sf,i=h);else if(nr(i),ld(E)){if(v=E.nextSibling&&E.nextSibling.dataset,v)var j=v.dgst;v=j,l=Error(s(419)),l.stack="",l.digest=v,Co({value:l,source:null,stack:null}),i=If(t,i,a)}else if(Ct||xo(t,i,a,!1),v=(a&t.childLanes)!==0,Ct||v){if(v=We,v!==null&&(l=a&-a,l=(l&42)!==0?1:Gi(l),l=(l&(v.suspendedLanes|a))!==0?0:l,l!==0&&l!==w.retryLane))throw w.retryLane=l,ta(t,l),mn(v,t,l),Mg;E.data==="$?"||Ff(),i=If(t,i,a)}else E.data==="$?"?(i.flags|=192,i.child=t.child,i=null):(t=w.treeContext,at=Pn(E.nextSibling),Jt=i,ze=!0,ds=null,Wn=!1,t!==null&&(bn[wn++]=bi,bn[wn++]=wi,bn[wn++]=hs,bi=t.id,wi=t.overflow,hs=i),i=Rf(i,l.children),i.flags|=4096);return i}return h?(ir(),h=l.fallback,E=i.mode,w=t.child,j=w.sibling,l=Si(w,{mode:"hidden",children:l.children}),l.subtreeFlags=w.subtreeFlags&65011712,j!==null?h=Si(j,h):(h=cs(h,E,a,null),h.flags|=2),h.return=i,l.return=i,l.sibling=h,i.child=l,l=h,h=i.child,E=t.child.memoizedState,E===null?E=bf(a):(w=E.cachePool,w!==null?(j=Et._currentValue,w=w.parent!==j?{parent:j,pool:j}:w):w=Cp(),E={baseLanes:E.baseLanes|a,cachePool:w}),h.memoizedState=E,h.childLanes=wf(t,v,a),i.memoizedState=Sf,l):(nr(i),a=t.child,t=a.sibling,a=Si(a,{mode:"visible",children:l.children}),a.return=i,a.sibling=null,t!==null&&(v=i.deletions,v===null?(i.deletions=[t],i.flags|=16):v.push(t)),i.child=a,i.memoizedState=null,a)}function Rf(t,i){return i=zu({mode:"visible",children:i},t.mode),i.return=t,t.child=i}function zu(t,i){return t=un(22,t,null,i),t.lanes=0,t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},t}function If(t,i,a){return fa(i,t.child,null,a),t=Rf(i,i.pendingProps.children),t.flags|=2,i.memoizedState=null,t}function Hg(t,i,a){t.lanes|=i;var l=t.alternate;l!==null&&(l.lanes|=i),Gh(t.return,i,a)}function Cf(t,i,a,l,h){var d=t.memoizedState;d===null?t.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:h}:(d.isBackwards=i,d.rendering=null,d.renderingStartTime=0,d.last=l,d.tail=a,d.tailMode=h)}function Gg(t,i,a){var l=i.pendingProps,h=l.revealOrder,d=l.tail;if(Ut(t,i,l.children,a),l=Tt.current,(l&2)!==0)l=l&1|2,i.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=i.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Hg(t,a,i);else if(t.tag===19)Hg(t,a,i);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===i)break e;for(;t.sibling===null;){if(t.return===null||t.return===i)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}l&=1}switch(ee(Tt,l),h){case"forwards":for(a=i.child,h=null;a!==null;)t=a.alternate,t!==null&&Uu(t)===null&&(h=a),a=a.sibling;a=h,a===null?(h=i.child,i.child=null):(h=a.sibling,a.sibling=null),Cf(i,!1,h,a,d);break;case"backwards":for(a=null,h=i.child,i.child=null;h!==null;){if(t=h.alternate,t!==null&&Uu(t)===null){i.child=h;break}t=h.sibling,h.sibling=a,a=h,h=t}Cf(i,!0,a,null,d);break;case"together":Cf(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function Ni(t,i,a){if(t!==null&&(i.dependencies=t.dependencies),lr|=i.lanes,(a&i.childLanes)===0)if(t!==null){if(xo(t,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(t!==null&&i.child!==t.child)throw Error(s(153));if(i.child!==null){for(t=i.child,a=Si(t,t.pendingProps),i.child=a,a.return=i;t.sibling!==null;)t=t.sibling,a=a.sibling=Si(t,t.pendingProps),a.return=i;a.sibling=null}return i.child}function xf(t,i){return(t.lanes&i)!==0?!0:(t=t.dependencies,!!(t!==null&&Eu(t)))}function XT(t,i,a){switch(i.tag){case 3:Ze(i,i.stateNode.containerInfo),Zi(i,Et,t.memoizedState.cache),Io();break;case 27:case 5:Hi(i);break;case 4:Ze(i,i.stateNode.containerInfo);break;case 10:Zi(i,i.type,i.memoizedProps.value);break;case 13:var l=i.memoizedState;if(l!==null)return l.dehydrated!==null?(nr(i),i.flags|=128,null):(a&i.child.childLanes)!==0?qg(t,i,a):(nr(i),t=Ni(t,i,a),t!==null?t.sibling:null);nr(i);break;case 19:var h=(t.flags&128)!==0;if(l=(a&i.childLanes)!==0,l||(xo(t,i,a,!1),l=(a&i.childLanes)!==0),h){if(l)return Gg(t,i,a);i.flags|=128}if(h=i.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),ee(Tt,Tt.current),l)break;return null;case 22:case 23:return i.lanes=0,Lg(t,i,a);case 24:Zi(i,Et,t.memoizedState.cache)}return Ni(t,i,a)}function Fg(t,i,a){if(t!==null)if(t.memoizedProps!==i.pendingProps)Ct=!0;else{if(!xf(t,a)&&(i.flags&128)===0)return Ct=!1,XT(t,i,a);Ct=(t.flags&131072)!==0}else Ct=!1,ze&&(i.flags&1048576)!==0&&Tp(i,vu,i.index);switch(i.lanes=0,i.tag){case 16:e:{t=i.pendingProps;var l=i.elementType,h=l._init;if(l=h(l._payload),i.type=l,typeof l=="function")Lh(l)?(t=vs(l,t),i.tag=1,i=zg(null,i,l,t,a)):(i.tag=0,i=Af(null,i,l,t,a));else{if(l!=null){if(h=l.$$typeof,h===Oe){i.tag=11,i=Vg(null,i,l,t,a);break e}else if(h===M){i.tag=14,i=Pg(null,i,l,t,a);break e}}throw i=Mt(l)||l,Error(s(306,i,""))}}return i;case 0:return Af(t,i,i.type,i.pendingProps,a);case 1:return l=i.type,h=vs(l,i.pendingProps),zg(t,i,l,h,a);case 3:e:{if(Ze(i,i.stateNode.containerInfo),t===null)throw Error(s(387));l=i.pendingProps;var d=i.memoizedState;h=d.element,Zh(t,i),Uo(i,l,null,a);var v=i.memoizedState;if(l=v.cache,Zi(i,Et,l),l!==d.cache&&Fh(i,[Et],a,!0),Po(),l=v.element,d.isDehydrated)if(d={element:l,isDehydrated:!1,cache:v.cache},i.updateQueue.baseState=d,i.memoizedState=d,i.flags&256){i=Bg(t,i,l,a);break e}else if(l!==h){h=An(Error(s(424)),i),Co(h),i=Bg(t,i,l,a);break e}else{switch(t=i.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(at=Pn(t.firstChild),Jt=i,ze=!0,ds=null,Wn=!0,a=Sg(i,null,l,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Io(),l===h){i=Ni(t,i,a);break e}Ut(t,i,l,a)}i=i.child}return i;case 26:return ju(t,i),t===null?(a=Xy(i.type,null,i.pendingProps,null))?i.memoizedState=a:ze||(a=i.type,t=i.pendingProps,l=ec(ve.current).createElement(a),l[yt]=i,l[ft]=t,kt(l,a,t),lt(l),i.stateNode=l):i.memoizedState=Xy(i.type,t.memoizedProps,i.pendingProps,t.memoizedState),null;case 27:return Hi(i),t===null&&ze&&(l=i.stateNode=Qy(i.type,i.pendingProps,ve.current),Jt=i,Wn=!0,h=at,fr(i.type)?(ud=h,at=Pn(l.firstChild)):at=h),Ut(t,i,i.pendingProps.children,a),ju(t,i),t===null&&(i.flags|=4194304),i.child;case 5:return t===null&&ze&&((h=l=at)&&(l=SA(l,i.type,i.pendingProps,Wn),l!==null?(i.stateNode=l,Jt=i,at=Pn(l.firstChild),Wn=!1,h=!0):h=!1),h||ms(i)),Hi(i),h=i.type,d=i.pendingProps,v=t!==null?t.memoizedProps:null,l=d.children,sd(h,d)?l=null:v!==null&&sd(h,v)&&(i.flags|=32),i.memoizedState!==null&&(h=rf(t,i,BT,null,null,a),rl._currentValue=h),ju(t,i),Ut(t,i,l,a),i.child;case 6:return t===null&&ze&&((t=a=at)&&(a=bA(a,i.pendingProps,Wn),a!==null?(i.stateNode=a,Jt=i,at=null,t=!0):t=!1),t||ms(i)),null;case 13:return qg(t,i,a);case 4:return Ze(i,i.stateNode.containerInfo),l=i.pendingProps,t===null?i.child=fa(i,null,l,a):Ut(t,i,l,a),i.child;case 11:return Vg(t,i,i.type,i.pendingProps,a);case 7:return Ut(t,i,i.pendingProps,a),i.child;case 8:return Ut(t,i,i.pendingProps.children,a),i.child;case 12:return Ut(t,i,i.pendingProps.children,a),i.child;case 10:return l=i.pendingProps,Zi(i,i.type,l.value),Ut(t,i,l.children,a),i.child;case 9:return h=i.type._context,l=i.pendingProps.children,gs(i),h=Gt(h),l=l(h),i.flags|=1,Ut(t,i,l,a),i.child;case 14:return Pg(t,i,i.type,i.pendingProps,a);case 15:return Ug(t,i,i.type,i.pendingProps,a);case 19:return Gg(t,i,a);case 31:return l=i.pendingProps,a=i.mode,l={mode:l.mode,children:l.children},t===null?(a=zu(l,a),a.ref=i.ref,i.child=a,a.return=i,i=a):(a=Si(t.child,l),a.ref=i.ref,i.child=a,a.return=i,i=a),i;case 22:return Lg(t,i,a);case 24:return gs(i),l=Gt(Et),t===null?(h=Yh(),h===null&&(h=We,d=Qh(),h.pooledCache=d,d.refCount++,d!==null&&(h.pooledCacheLanes|=a),h=d),i.memoizedState={parent:l,cache:h},$h(i),Zi(i,Et,h)):((t.lanes&a)!==0&&(Zh(t,i),Uo(i,null,null,a),Po()),h=t.memoizedState,d=i.memoizedState,h.parent!==l?(h={parent:l,cache:l},i.memoizedState=h,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=h),Zi(i,Et,l)):(l=d.cache,Zi(i,Et,l),l!==h.cache&&Fh(i,[Et],a,!0))),Ut(t,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}function Di(t){t.flags|=4}function Qg(t,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!e_(i)){if(i=Rn.current,i!==null&&((Ue&4194048)===Ue?Jn!==null:(Ue&62914560)!==Ue&&(Ue&536870912)===0||i!==Jn))throw Mo=Xh,xp;t.flags|=8192}}function Bu(t,i){i!==null&&(t.flags|=4),t.flags&16384&&(i=t.tag!==22?so():536870912,t.lanes|=i,ga|=i)}function Ho(t,i){if(!ze)switch(t.tailMode){case"hidden":i=t.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?i||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function nt(t){var i=t.alternate!==null&&t.alternate.child===t.child,a=0,l=0;if(i)for(var h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags&65011712,l|=h.flags&65011712,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags,l|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=l,t.childLanes=a,i}function $T(t,i,a){var l=i.pendingProps;switch(Bh(i),i.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return nt(i),null;case 1:return nt(i),null;case 3:return a=i.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),i.memoizedState.cache!==l&&(i.flags|=2048),Ii(Et),zn(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(Ro(i)?Di(i):t===null||t.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,bp())),nt(i),null;case 26:return a=i.memoizedState,t===null?(Di(i),a!==null?(nt(i),Qg(i,a)):(nt(i),i.flags&=-16777217)):a?a!==t.memoizedState?(Di(i),nt(i),Qg(i,a)):(nt(i),i.flags&=-16777217):(t.memoizedProps!==l&&Di(i),nt(i),i.flags&=-16777217),null;case 27:ci(i),a=ve.current;var h=i.type;if(t!==null&&i.stateNode!=null)t.memoizedProps!==l&&Di(i);else{if(!l){if(i.stateNode===null)throw Error(s(166));return nt(i),null}t=fe.current,Ro(i)?Ap(i):(t=Qy(h,l,a),i.stateNode=t,Di(i))}return nt(i),null;case 5:if(ci(i),a=i.type,t!==null&&i.stateNode!=null)t.memoizedProps!==l&&Di(i);else{if(!l){if(i.stateNode===null)throw Error(s(166));return nt(i),null}if(t=fe.current,Ro(i))Ap(i);else{switch(h=ec(ve.current),t){case 1:t=h.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:t=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":t=h.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":t=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":t=h.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof l.is=="string"?h.createElement("select",{is:l.is}):h.createElement("select"),l.multiple?t.multiple=!0:l.size&&(t.size=l.size);break;default:t=typeof l.is=="string"?h.createElement(a,{is:l.is}):h.createElement(a)}}t[yt]=i,t[ft]=l;e:for(h=i.child;h!==null;){if(h.tag===5||h.tag===6)t.appendChild(h.stateNode);else if(h.tag!==4&&h.tag!==27&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===i)break e;for(;h.sibling===null;){if(h.return===null||h.return===i)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}i.stateNode=t;e:switch(kt(t,a,l),a){case"button":case"input":case"select":case"textarea":t=!!l.autoFocus;break e;case"img":t=!0;break e;default:t=!1}t&&Di(i)}}return nt(i),i.flags&=-16777217,null;case 6:if(t&&i.stateNode!=null)t.memoizedProps!==l&&Di(i);else{if(typeof l!="string"&&i.stateNode===null)throw Error(s(166));if(t=ve.current,Ro(i)){if(t=i.stateNode,a=i.memoizedProps,l=null,h=Jt,h!==null)switch(h.tag){case 27:case 5:l=h.memoizedProps}t[yt]=i,t=!!(t.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||jy(t.nodeValue,a)),t||ms(i)}else t=ec(t).createTextNode(l),t[yt]=i,i.stateNode=t}return nt(i),null;case 13:if(l=i.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(h=Ro(i),l!==null&&l.dehydrated!==null){if(t===null){if(!h)throw Error(s(318));if(h=i.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(s(317));h[yt]=i}else Io(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;nt(i),h=!1}else h=bp(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=h),h=!0;if(!h)return i.flags&256?(xi(i),i):(xi(i),null)}if(xi(i),(i.flags&128)!==0)return i.lanes=a,i;if(a=l!==null,t=t!==null&&t.memoizedState!==null,a){l=i.child,h=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(h=l.alternate.memoizedState.cachePool.pool);var d=null;l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(d=l.memoizedState.cachePool.pool),d!==h&&(l.flags|=2048)}return a!==t&&a&&(i.child.flags|=8192),Bu(i,i.updateQueue),nt(i),null;case 4:return zn(),t===null&&ed(i.stateNode.containerInfo),nt(i),null;case 10:return Ii(i.type),nt(i),null;case 19:if(ie(Tt),h=i.memoizedState,h===null)return nt(i),null;if(l=(i.flags&128)!==0,d=h.rendering,d===null)if(l)Ho(h,!1);else{if(ot!==0||t!==null&&(t.flags&128)!==0)for(t=i.child;t!==null;){if(d=Uu(t),d!==null){for(i.flags|=128,Ho(h,!1),t=d.updateQueue,i.updateQueue=t,Bu(i,t),i.subtreeFlags=0,t=a,a=i.child;a!==null;)Ep(a,t),a=a.sibling;return ee(Tt,Tt.current&1|2),i.child}t=t.sibling}h.tail!==null&&gn()>Gu&&(i.flags|=128,l=!0,Ho(h,!1),i.lanes=4194304)}else{if(!l)if(t=Uu(d),t!==null){if(i.flags|=128,l=!0,t=t.updateQueue,i.updateQueue=t,Bu(i,t),Ho(h,!0),h.tail===null&&h.tailMode==="hidden"&&!d.alternate&&!ze)return nt(i),null}else 2*gn()-h.renderingStartTime>Gu&&a!==536870912&&(i.flags|=128,l=!0,Ho(h,!1),i.lanes=4194304);h.isBackwards?(d.sibling=i.child,i.child=d):(t=h.last,t!==null?t.sibling=d:i.child=d,h.last=d)}return h.tail!==null?(i=h.tail,h.rendering=i,h.tail=i.sibling,h.renderingStartTime=gn(),i.sibling=null,t=Tt.current,ee(Tt,l?t&1|2:t&1),i):(nt(i),null);case 22:case 23:return xi(i),tf(),l=i.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(i.flags|=8192):l&&(i.flags|=8192),l?(a&536870912)!==0&&(i.flags&128)===0&&(nt(i),i.subtreeFlags&6&&(i.flags|=8192)):nt(i),a=i.updateQueue,a!==null&&Bu(i,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),l=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),l!==a&&(i.flags|=2048),t!==null&&ie(ys),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),Ii(Et),nt(i),null;case 25:return null;case 30:return null}throw Error(s(156,i.tag))}function ZT(t,i){switch(Bh(i),i.tag){case 1:return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 3:return Ii(Et),zn(),t=i.flags,(t&65536)!==0&&(t&128)===0?(i.flags=t&-65537|128,i):null;case 26:case 27:case 5:return ci(i),null;case 13:if(xi(i),t=i.memoizedState,t!==null&&t.dehydrated!==null){if(i.alternate===null)throw Error(s(340));Io()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 19:return ie(Tt),null;case 4:return zn(),null;case 10:return Ii(i.type),null;case 22:case 23:return xi(i),tf(),t!==null&&ie(ys),t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 24:return Ii(Et),null;case 25:return null;default:return null}}function Kg(t,i){switch(Bh(i),i.tag){case 3:Ii(Et),zn();break;case 26:case 27:case 5:ci(i);break;case 4:zn();break;case 13:xi(i);break;case 19:ie(Tt);break;case 10:Ii(i.type);break;case 22:case 23:xi(i),tf(),t!==null&&ie(ys);break;case 24:Ii(Et)}}function Go(t,i){try{var a=i.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var h=l.next;a=h;do{if((a.tag&t)===t){l=void 0;var d=a.create,v=a.inst;l=d(),v.destroy=l}a=a.next}while(a!==h)}}catch(E){$e(i,i.return,E)}}function rr(t,i,a){try{var l=i.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var d=h.next;l=d;do{if((l.tag&t)===t){var v=l.inst,E=v.destroy;if(E!==void 0){v.destroy=void 0,h=i;var w=a,j=E;try{j()}catch(K){$e(h,w,K)}}}l=l.next}while(l!==d)}}catch(K){$e(i,i.return,K)}}function Yg(t){var i=t.updateQueue;if(i!==null){var a=t.stateNode;try{Pp(i,a)}catch(l){$e(t,t.return,l)}}}function Xg(t,i,a){a.props=vs(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(l){$e(t,i,l)}}function Fo(t,i){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof a=="function"?t.refCleanup=a(l):a.current=l}}catch(h){$e(t,i,h)}}function ei(t,i){var a=t.ref,l=t.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(h){$e(t,i,h)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){$e(t,i,h)}else a.current=null}function $g(t){var i=t.type,a=t.memoizedProps,l=t.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(h){$e(t,t.return,h)}}function Nf(t,i,a){try{var l=t.stateNode;_A(l,t.type,a,i),l[ft]=i}catch(h){$e(t,t.return,h)}}function Zg(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&fr(t.type)||t.tag===4}function Df(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Zg(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&fr(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Of(t,i,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,i?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,i):(i=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,i.appendChild(t),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=Ju));else if(l!==4&&(l===27&&fr(t.type)&&(a=t.stateNode,i=null),t=t.child,t!==null))for(Of(t,i,a),t=t.sibling;t!==null;)Of(t,i,a),t=t.sibling}function qu(t,i,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,i?a.insertBefore(t,i):a.appendChild(t);else if(l!==4&&(l===27&&fr(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(qu(t,i,a),t=t.sibling;t!==null;)qu(t,i,a),t=t.sibling}function Wg(t){var i=t.stateNode,a=t.memoizedProps;try{for(var l=t.type,h=i.attributes;h.length;)i.removeAttributeNode(h[0]);kt(i,l,a),i[yt]=t,i[ft]=a}catch(d){$e(t,t.return,d)}}var Oi=!1,ct=!1,Mf=!1,Jg=typeof WeakSet=="function"?WeakSet:Set,xt=null;function WT(t,i){if(t=t.containerInfo,id=ac,t=cp(t),Nh(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var h=l.anchorOffset,d=l.focusNode;l=l.focusOffset;try{a.nodeType,d.nodeType}catch{a=null;break e}var v=0,E=-1,w=-1,j=0,K=0,X=t,z=null;t:for(;;){for(var B;X!==a||h!==0&&X.nodeType!==3||(E=v+h),X!==d||l!==0&&X.nodeType!==3||(w=v+l),X.nodeType===3&&(v+=X.nodeValue.length),(B=X.firstChild)!==null;)z=X,X=B;for(;;){if(X===t)break t;if(z===a&&++j===h&&(E=v),z===d&&++K===l&&(w=v),(B=X.nextSibling)!==null)break;X=z,z=X.parentNode}X=B}a=E===-1||w===-1?null:{start:E,end:w}}else a=null}a=a||{start:0,end:0}}else a=null;for(rd={focusedElem:t,selectionRange:a},ac=!1,xt=i;xt!==null;)if(i=xt,t=i.child,(i.subtreeFlags&1024)!==0&&t!==null)t.return=i,xt=t;else for(;xt!==null;){switch(i=xt,d=i.alternate,t=i.flags,i.tag){case 0:break;case 11:case 15:break;case 1:if((t&1024)!==0&&d!==null){t=void 0,a=i,h=d.memoizedProps,d=d.memoizedState,l=a.stateNode;try{var _e=vs(a.type,h,a.elementType===a.type);t=l.getSnapshotBeforeUpdate(_e,d),l.__reactInternalSnapshotBeforeUpdate=t}catch(me){$e(a,a.return,me)}}break;case 3:if((t&1024)!==0){if(t=i.stateNode.containerInfo,a=t.nodeType,a===9)od(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":od(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(s(163))}if(t=i.sibling,t!==null){t.return=i.return,xt=t;break}xt=i.return}}function ey(t,i,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:sr(t,a),l&4&&Go(5,a);break;case 1:if(sr(t,a),l&4)if(t=a.stateNode,i===null)try{t.componentDidMount()}catch(v){$e(a,a.return,v)}else{var h=vs(a.type,i.memoizedProps);i=i.memoizedState;try{t.componentDidUpdate(h,i,t.__reactInternalSnapshotBeforeUpdate)}catch(v){$e(a,a.return,v)}}l&64&&Yg(a),l&512&&Fo(a,a.return);break;case 3:if(sr(t,a),l&64&&(t=a.updateQueue,t!==null)){if(i=null,a.child!==null)switch(a.child.tag){case 27:case 5:i=a.child.stateNode;break;case 1:i=a.child.stateNode}try{Pp(t,i)}catch(v){$e(a,a.return,v)}}break;case 27:i===null&&l&4&&Wg(a);case 26:case 5:sr(t,a),i===null&&l&4&&$g(a),l&512&&Fo(a,a.return);break;case 12:sr(t,a);break;case 13:sr(t,a),l&4&&iy(t,a),l&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=oA.bind(null,a),wA(t,a))));break;case 22:if(l=a.memoizedState!==null||Oi,!l){i=i!==null&&i.memoizedState!==null||ct,h=Oi;var d=ct;Oi=l,(ct=i)&&!d?ar(t,a,(a.subtreeFlags&8772)!==0):sr(t,a),Oi=h,ct=d}break;case 30:break;default:sr(t,a)}}function ty(t){var i=t.alternate;i!==null&&(t.alternate=null,ty(i)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(i=t.stateNode,i!==null&&Ki(i)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var et=null,tn=!1;function Mi(t,i,a){for(a=a.child;a!==null;)ny(t,i,a),a=a.sibling}function ny(t,i,a){if(He&&typeof He.onCommitFiberUnmount=="function")try{He.onCommitFiberUnmount(st,a)}catch{}switch(a.tag){case 26:ct||ei(a,i),Mi(t,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:ct||ei(a,i);var l=et,h=tn;fr(a.type)&&(et=a.stateNode,tn=!1),Mi(t,i,a),el(a.stateNode),et=l,tn=h;break;case 5:ct||ei(a,i);case 6:if(l=et,h=tn,et=null,Mi(t,i,a),et=l,tn=h,et!==null)if(tn)try{(et.nodeType===9?et.body:et.nodeName==="HTML"?et.ownerDocument.body:et).removeChild(a.stateNode)}catch(d){$e(a,i,d)}else try{et.removeChild(a.stateNode)}catch(d){$e(a,i,d)}break;case 18:et!==null&&(tn?(t=et,Gy(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),ll(t)):Gy(et,a.stateNode));break;case 4:l=et,h=tn,et=a.stateNode.containerInfo,tn=!0,Mi(t,i,a),et=l,tn=h;break;case 0:case 11:case 14:case 15:ct||rr(2,a,i),ct||rr(4,a,i),Mi(t,i,a);break;case 1:ct||(ei(a,i),l=a.stateNode,typeof l.componentWillUnmount=="function"&&Xg(a,i,l)),Mi(t,i,a);break;case 21:Mi(t,i,a);break;case 22:ct=(l=ct)||a.memoizedState!==null,Mi(t,i,a),ct=l;break;default:Mi(t,i,a)}}function iy(t,i){if(i.memoizedState===null&&(t=i.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{ll(t)}catch(a){$e(i,i.return,a)}}function JT(t){switch(t.tag){case 13:case 19:var i=t.stateNode;return i===null&&(i=t.stateNode=new Jg),i;case 22:return t=t.stateNode,i=t._retryCache,i===null&&(i=t._retryCache=new Jg),i;default:throw Error(s(435,t.tag))}}function Vf(t,i){var a=JT(t);i.forEach(function(l){var h=lA.bind(null,t,l);a.has(l)||(a.add(l),l.then(h,h))})}function cn(t,i){var a=i.deletions;if(a!==null)for(var l=0;l<a.length;l++){var h=a[l],d=t,v=i,E=v;e:for(;E!==null;){switch(E.tag){case 27:if(fr(E.type)){et=E.stateNode,tn=!1;break e}break;case 5:et=E.stateNode,tn=!1;break e;case 3:case 4:et=E.stateNode.containerInfo,tn=!0;break e}E=E.return}if(et===null)throw Error(s(160));ny(d,v,h),et=null,tn=!1,d=h.alternate,d!==null&&(d.return=null),h.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)ry(i,t),i=i.sibling}var Vn=null;function ry(t,i){var a=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:cn(i,t),hn(t),l&4&&(rr(3,t,t.return),Go(3,t),rr(5,t,t.return));break;case 1:cn(i,t),hn(t),l&512&&(ct||a===null||ei(a,a.return)),l&64&&Oi&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var h=Vn;if(cn(i,t),hn(t),l&512&&(ct||a===null||ei(a,a.return)),l&4){var d=a!==null?a.memoizedState:null;if(l=t.memoizedState,a===null)if(l===null)if(t.stateNode===null){e:{l=t.type,a=t.memoizedProps,h=h.ownerDocument||h;t:switch(l){case"title":d=h.getElementsByTagName("title")[0],(!d||d[Yr]||d[yt]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=h.createElement(l),h.head.insertBefore(d,h.querySelector("head > title"))),kt(d,l,a),d[yt]=t,lt(d),l=d;break e;case"link":var v=Wy("link","href",h).get(l+(a.href||""));if(v){for(var E=0;E<v.length;E++)if(d=v[E],d.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&d.getAttribute("rel")===(a.rel==null?null:a.rel)&&d.getAttribute("title")===(a.title==null?null:a.title)&&d.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){v.splice(E,1);break t}}d=h.createElement(l),kt(d,l,a),h.head.appendChild(d);break;case"meta":if(v=Wy("meta","content",h).get(l+(a.content||""))){for(E=0;E<v.length;E++)if(d=v[E],d.getAttribute("content")===(a.content==null?null:""+a.content)&&d.getAttribute("name")===(a.name==null?null:a.name)&&d.getAttribute("property")===(a.property==null?null:a.property)&&d.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&d.getAttribute("charset")===(a.charSet==null?null:a.charSet)){v.splice(E,1);break t}}d=h.createElement(l),kt(d,l,a),h.head.appendChild(d);break;default:throw Error(s(468,l))}d[yt]=t,lt(d),l=d}t.stateNode=l}else Jy(h,t.type,t.stateNode);else t.stateNode=Zy(h,l,t.memoizedProps);else d!==l?(d===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):d.count--,l===null?Jy(h,t.type,t.stateNode):Zy(h,l,t.memoizedProps)):l===null&&t.stateNode!==null&&Nf(t,t.memoizedProps,a.memoizedProps)}break;case 27:cn(i,t),hn(t),l&512&&(ct||a===null||ei(a,a.return)),a!==null&&l&4&&Nf(t,t.memoizedProps,a.memoizedProps);break;case 5:if(cn(i,t),hn(t),l&512&&(ct||a===null||ei(a,a.return)),t.flags&32){h=t.stateNode;try{_n(h,"")}catch(B){$e(t,t.return,B)}}l&4&&t.stateNode!=null&&(h=t.memoizedProps,Nf(t,h,a!==null?a.memoizedProps:h)),l&1024&&(Mf=!0);break;case 6:if(cn(i,t),hn(t),l&4){if(t.stateNode===null)throw Error(s(162));l=t.memoizedProps,a=t.stateNode;try{a.nodeValue=l}catch(B){$e(t,t.return,B)}}break;case 3:if(ic=null,h=Vn,Vn=tc(i.containerInfo),cn(i,t),Vn=h,hn(t),l&4&&a!==null&&a.memoizedState.isDehydrated)try{ll(i.containerInfo)}catch(B){$e(t,t.return,B)}Mf&&(Mf=!1,sy(t));break;case 4:l=Vn,Vn=tc(t.stateNode.containerInfo),cn(i,t),hn(t),Vn=l;break;case 12:cn(i,t),hn(t);break;case 13:cn(i,t),hn(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(zf=gn()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Vf(t,l)));break;case 22:h=t.memoizedState!==null;var w=a!==null&&a.memoizedState!==null,j=Oi,K=ct;if(Oi=j||h,ct=K||w,cn(i,t),ct=K,Oi=j,hn(t),l&8192)e:for(i=t.stateNode,i._visibility=h?i._visibility&-2:i._visibility|1,h&&(a===null||w||Oi||ct||Es(t)),a=null,i=t;;){if(i.tag===5||i.tag===26){if(a===null){w=a=i;try{if(d=w.stateNode,h)v=d.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{E=w.stateNode;var X=w.memoizedProps.style,z=X!=null&&X.hasOwnProperty("display")?X.display:null;E.style.display=z==null||typeof z=="boolean"?"":(""+z).trim()}}catch(B){$e(w,w.return,B)}}}else if(i.tag===6){if(a===null){w=i;try{w.stateNode.nodeValue=h?"":w.memoizedProps}catch(B){$e(w,w.return,B)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===t)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break e;for(;i.sibling===null;){if(i.return===null||i.return===t)break e;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}l&4&&(l=t.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,Vf(t,a))));break;case 19:cn(i,t),hn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Vf(t,l)));break;case 30:break;case 21:break;default:cn(i,t),hn(t)}}function hn(t){var i=t.flags;if(i&2){try{for(var a,l=t.return;l!==null;){if(Zg(l)){a=l;break}l=l.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var h=a.stateNode,d=Df(t);qu(t,d,h);break;case 5:var v=a.stateNode;a.flags&32&&(_n(v,""),a.flags&=-33);var E=Df(t);qu(t,E,v);break;case 3:case 4:var w=a.stateNode.containerInfo,j=Df(t);Of(t,j,w);break;default:throw Error(s(161))}}catch(K){$e(t,t.return,K)}t.flags&=-3}i&4096&&(t.flags&=-4097)}function sy(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var i=t;sy(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),t=t.sibling}}function sr(t,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)ey(t,i.alternate,i),i=i.sibling}function Es(t){for(t=t.child;t!==null;){var i=t;switch(i.tag){case 0:case 11:case 14:case 15:rr(4,i,i.return),Es(i);break;case 1:ei(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&Xg(i,i.return,a),Es(i);break;case 27:el(i.stateNode);case 26:case 5:ei(i,i.return),Es(i);break;case 22:i.memoizedState===null&&Es(i);break;case 30:Es(i);break;default:Es(i)}t=t.sibling}}function ar(t,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var l=i.alternate,h=t,d=i,v=d.flags;switch(d.tag){case 0:case 11:case 15:ar(h,d,a),Go(4,d);break;case 1:if(ar(h,d,a),l=d,h=l.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(j){$e(l,l.return,j)}if(l=d,h=l.updateQueue,h!==null){var E=l.stateNode;try{var w=h.shared.hiddenCallbacks;if(w!==null)for(h.shared.hiddenCallbacks=null,h=0;h<w.length;h++)Vp(w[h],E)}catch(j){$e(l,l.return,j)}}a&&v&64&&Yg(d),Fo(d,d.return);break;case 27:Wg(d);case 26:case 5:ar(h,d,a),a&&l===null&&v&4&&$g(d),Fo(d,d.return);break;case 12:ar(h,d,a);break;case 13:ar(h,d,a),a&&v&4&&iy(h,d);break;case 22:d.memoizedState===null&&ar(h,d,a),Fo(d,d.return);break;case 30:break;default:ar(h,d,a)}i=i.sibling}}function Pf(t,i){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(t=i.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&No(a))}function Uf(t,i){t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&No(t))}function ti(t,i,a,l){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)ay(t,i,a,l),i=i.sibling}function ay(t,i,a,l){var h=i.flags;switch(i.tag){case 0:case 11:case 15:ti(t,i,a,l),h&2048&&Go(9,i);break;case 1:ti(t,i,a,l);break;case 3:ti(t,i,a,l),h&2048&&(t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&No(t)));break;case 12:if(h&2048){ti(t,i,a,l),t=i.stateNode;try{var d=i.memoizedProps,v=d.id,E=d.onPostCommit;typeof E=="function"&&E(v,i.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(w){$e(i,i.return,w)}}else ti(t,i,a,l);break;case 13:ti(t,i,a,l);break;case 23:break;case 22:d=i.stateNode,v=i.alternate,i.memoizedState!==null?d._visibility&2?ti(t,i,a,l):Qo(t,i):d._visibility&2?ti(t,i,a,l):(d._visibility|=2,da(t,i,a,l,(i.subtreeFlags&10256)!==0)),h&2048&&Pf(v,i);break;case 24:ti(t,i,a,l),h&2048&&Uf(i.alternate,i);break;default:ti(t,i,a,l)}}function da(t,i,a,l,h){for(h=h&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var d=t,v=i,E=a,w=l,j=v.flags;switch(v.tag){case 0:case 11:case 15:da(d,v,E,w,h),Go(8,v);break;case 23:break;case 22:var K=v.stateNode;v.memoizedState!==null?K._visibility&2?da(d,v,E,w,h):Qo(d,v):(K._visibility|=2,da(d,v,E,w,h)),h&&j&2048&&Pf(v.alternate,v);break;case 24:da(d,v,E,w,h),h&&j&2048&&Uf(v.alternate,v);break;default:da(d,v,E,w,h)}i=i.sibling}}function Qo(t,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=t,l=i,h=l.flags;switch(l.tag){case 22:Qo(a,l),h&2048&&Pf(l.alternate,l);break;case 24:Qo(a,l),h&2048&&Uf(l.alternate,l);break;default:Qo(a,l)}i=i.sibling}}var Ko=8192;function ma(t){if(t.subtreeFlags&Ko)for(t=t.child;t!==null;)oy(t),t=t.sibling}function oy(t){switch(t.tag){case 26:ma(t),t.flags&Ko&&t.memoizedState!==null&&kA(Vn,t.memoizedState,t.memoizedProps);break;case 5:ma(t);break;case 3:case 4:var i=Vn;Vn=tc(t.stateNode.containerInfo),ma(t),Vn=i;break;case 22:t.memoizedState===null&&(i=t.alternate,i!==null&&i.memoizedState!==null?(i=Ko,Ko=16777216,ma(t),Ko=i):ma(t));break;default:ma(t)}}function ly(t){var i=t.alternate;if(i!==null&&(t=i.child,t!==null)){i.child=null;do i=t.sibling,t.sibling=null,t=i;while(t!==null)}}function Yo(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];xt=l,cy(l,t)}ly(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)uy(t),t=t.sibling}function uy(t){switch(t.tag){case 0:case 11:case 15:Yo(t),t.flags&2048&&rr(9,t,t.return);break;case 3:Yo(t);break;case 12:Yo(t);break;case 22:var i=t.stateNode;t.memoizedState!==null&&i._visibility&2&&(t.return===null||t.return.tag!==13)?(i._visibility&=-3,Hu(t)):Yo(t);break;default:Yo(t)}}function Hu(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];xt=l,cy(l,t)}ly(t)}for(t=t.child;t!==null;){switch(i=t,i.tag){case 0:case 11:case 15:rr(8,i,i.return),Hu(i);break;case 22:a=i.stateNode,a._visibility&2&&(a._visibility&=-3,Hu(i));break;default:Hu(i)}t=t.sibling}}function cy(t,i){for(;xt!==null;){var a=xt;switch(a.tag){case 0:case 11:case 15:rr(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:No(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,xt=l;else e:for(a=t;xt!==null;){l=xt;var h=l.sibling,d=l.return;if(ty(l),l===a){xt=null;break e}if(h!==null){h.return=d,xt=h;break e}xt=d}}}var eA={getCacheForType:function(t){var i=Gt(Et),a=i.data.get(t);return a===void 0&&(a=t(),i.data.set(t,a)),a}},tA=typeof WeakMap=="function"?WeakMap:Map,Ge=0,We=null,Ce=null,Ue=0,Fe=0,fn=null,or=!1,pa=!1,Lf=!1,Vi=0,ot=0,lr=0,Ts=0,kf=0,In=0,ga=0,Xo=null,nn=null,jf=!1,zf=0,Gu=1/0,Fu=null,ur=null,Lt=0,cr=null,ya=null,_a=0,Bf=0,qf=null,hy=null,$o=0,Hf=null;function dn(){if((Ge&2)!==0&&Ue!==0)return Ue&-Ue;if(Q.T!==null){var t=sa;return t!==0?t:$f()}return Fi()}function fy(){In===0&&(In=(Ue&536870912)===0||ze?ro():536870912);var t=Rn.current;return t!==null&&(t.flags|=32),In}function mn(t,i,a){(t===We&&(Fe===2||Fe===9)||t.cancelPendingCommit!==null)&&(va(t,0),hr(t,Ue,In,!1)),fi(t,a),((Ge&2)===0||t!==We)&&(t===We&&((Ge&2)===0&&(Ts|=a),ot===4&&hr(t,Ue,In,!1)),ni(t))}function dy(t,i,a){if((Ge&6)!==0)throw Error(s(327));var l=!a&&(i&124)===0&&(i&t.expiredLanes)===0||Kr(t,i),h=l?rA(t,i):Qf(t,i,!0),d=l;do{if(h===0){pa&&!l&&hr(t,i,0,!1);break}else{if(a=t.current.alternate,d&&!nA(a)){h=Qf(t,i,!1),d=!1;continue}if(h===2){if(d=i,t.errorRecoveryDisabledLanes&d)var v=0;else v=t.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){i=v;e:{var E=t;h=Xo;var w=E.current.memoizedState.isDehydrated;if(w&&(va(E,v).flags|=256),v=Qf(E,v,!1),v!==2){if(Lf&&!w){E.errorRecoveryDisabledLanes|=d,Ts|=d,h=4;break e}d=nn,nn=h,d!==null&&(nn===null?nn=d:nn.push.apply(nn,d))}h=v}if(d=!1,h!==2)continue}}if(h===1){va(t,0),hr(t,i,0,!0);break}e:{switch(l=t,d=h,d){case 0:case 1:throw Error(s(345));case 4:if((i&4194048)!==i)break;case 6:hr(l,i,In,!or);break e;case 2:nn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((i&62914560)===i&&(h=zf+300-gn(),10<h)){if(hr(l,i,In,!or),Us(l,0,!0)!==0)break e;l.timeoutHandle=qy(my.bind(null,l,a,nn,Fu,jf,i,In,Ts,ga,or,d,2,-0,0),h);break e}my(l,a,nn,Fu,jf,i,In,Ts,ga,or,d,0,-0,0)}}break}while(!0);ni(t)}function my(t,i,a,l,h,d,v,E,w,j,K,X,z,B){if(t.timeoutHandle=-1,X=i.subtreeFlags,(X&8192||(X&16785408)===16785408)&&(il={stylesheets:null,count:0,unsuspend:LA},oy(i),X=jA(),X!==null)){t.cancelPendingCommit=X(Ty.bind(null,t,i,d,a,l,h,v,E,w,K,1,z,B)),hr(t,d,v,!j);return}Ty(t,i,d,a,l,h,v,E,w)}function nA(t){for(var i=t;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var h=a[l],d=h.getSnapshot;h=h.value;try{if(!ln(d(),h))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function hr(t,i,a,l){i&=~kf,i&=~Ts,t.suspendedLanes|=i,t.pingedLanes&=~i,l&&(t.warmLanes|=i),l=t.expirationTimes;for(var h=i;0<h;){var d=31-Ht(h),v=1<<d;l[d]=-1,h&=~v}a!==0&&Bn(t,a,i)}function Qu(){return(Ge&6)===0?(Zo(0),!1):!0}function Gf(){if(Ce!==null){if(Fe===0)var t=Ce.return;else t=Ce,Ri=ps=null,of(t),ha=null,Bo=0,t=Ce;for(;t!==null;)Kg(t.alternate,t),t=t.return;Ce=null}}function va(t,i){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,EA(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),Gf(),We=t,Ce=a=Si(t.current,null),Ue=i,Fe=0,fn=null,or=!1,pa=Kr(t,i),Lf=!1,ga=In=kf=Ts=lr=ot=0,nn=Xo=null,jf=!1,(i&8)!==0&&(i|=i&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=i;0<l;){var h=31-Ht(l),d=1<<h;i|=t[h],l&=~d}return Vi=i,mu(),a}function py(t,i){be=null,Q.H=Mu,i===Oo||i===Su?(i=Op(),Fe=3):i===xp?(i=Op(),Fe=4):Fe=i===Mg?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,fn=i,Ce===null&&(ot=1,ku(t,An(i,t.current)))}function gy(){var t=Q.H;return Q.H=Mu,t===null?Mu:t}function yy(){var t=Q.A;return Q.A=eA,t}function Ff(){ot=4,or||(Ue&4194048)!==Ue&&Rn.current!==null||(pa=!0),(lr&134217727)===0&&(Ts&134217727)===0||We===null||hr(We,Ue,In,!1)}function Qf(t,i,a){var l=Ge;Ge|=2;var h=gy(),d=yy();(We!==t||Ue!==i)&&(Fu=null,va(t,i)),i=!1;var v=ot;e:do try{if(Fe!==0&&Ce!==null){var E=Ce,w=fn;switch(Fe){case 8:Gf(),v=6;break e;case 3:case 2:case 9:case 6:Rn.current===null&&(i=!0);var j=Fe;if(Fe=0,fn=null,Ea(t,E,w,j),a&&pa){v=0;break e}break;default:j=Fe,Fe=0,fn=null,Ea(t,E,w,j)}}iA(),v=ot;break}catch(K){py(t,K)}while(!0);return i&&t.shellSuspendCounter++,Ri=ps=null,Ge=l,Q.H=h,Q.A=d,Ce===null&&(We=null,Ue=0,mu()),v}function iA(){for(;Ce!==null;)_y(Ce)}function rA(t,i){var a=Ge;Ge|=2;var l=gy(),h=yy();We!==t||Ue!==i?(Fu=null,Gu=gn()+500,va(t,i)):pa=Kr(t,i);e:do try{if(Fe!==0&&Ce!==null){i=Ce;var d=fn;t:switch(Fe){case 1:Fe=0,fn=null,Ea(t,i,d,1);break;case 2:case 9:if(Np(d)){Fe=0,fn=null,vy(i);break}i=function(){Fe!==2&&Fe!==9||We!==t||(Fe=7),ni(t)},d.then(i,i);break e;case 3:Fe=7;break e;case 4:Fe=5;break e;case 7:Np(d)?(Fe=0,fn=null,vy(i)):(Fe=0,fn=null,Ea(t,i,d,7));break;case 5:var v=null;switch(Ce.tag){case 26:v=Ce.memoizedState;case 5:case 27:var E=Ce;if(!v||e_(v)){Fe=0,fn=null;var w=E.sibling;if(w!==null)Ce=w;else{var j=E.return;j!==null?(Ce=j,Ku(j)):Ce=null}break t}}Fe=0,fn=null,Ea(t,i,d,5);break;case 6:Fe=0,fn=null,Ea(t,i,d,6);break;case 8:Gf(),ot=6;break e;default:throw Error(s(462))}}sA();break}catch(K){py(t,K)}while(!0);return Ri=ps=null,Q.H=l,Q.A=h,Ge=a,Ce!==null?0:(We=null,Ue=0,mu(),ot)}function sA(){for(;Ce!==null&&!eo();)_y(Ce)}function _y(t){var i=Fg(t.alternate,t,Vi);t.memoizedProps=t.pendingProps,i===null?Ku(t):Ce=i}function vy(t){var i=t,a=i.alternate;switch(i.tag){case 15:case 0:i=jg(a,i,i.pendingProps,i.type,void 0,Ue);break;case 11:i=jg(a,i,i.pendingProps,i.type.render,i.ref,Ue);break;case 5:of(i);default:Kg(a,i),i=Ce=Ep(i,Vi),i=Fg(a,i,Vi)}t.memoizedProps=t.pendingProps,i===null?Ku(t):Ce=i}function Ea(t,i,a,l){Ri=ps=null,of(i),ha=null,Bo=0;var h=i.return;try{if(YT(t,h,i,a,Ue)){ot=1,ku(t,An(a,t.current)),Ce=null;return}}catch(d){if(h!==null)throw Ce=h,d;ot=1,ku(t,An(a,t.current)),Ce=null;return}i.flags&32768?(ze||l===1?t=!0:pa||(Ue&536870912)!==0?t=!1:(or=t=!0,(l===2||l===9||l===3||l===6)&&(l=Rn.current,l!==null&&l.tag===13&&(l.flags|=16384))),Ey(i,t)):Ku(i)}function Ku(t){var i=t;do{if((i.flags&32768)!==0){Ey(i,or);return}t=i.return;var a=$T(i.alternate,i,Vi);if(a!==null){Ce=a;return}if(i=i.sibling,i!==null){Ce=i;return}Ce=i=t}while(i!==null);ot===0&&(ot=5)}function Ey(t,i){do{var a=ZT(t.alternate,t);if(a!==null){a.flags&=32767,Ce=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(t=t.sibling,t!==null)){Ce=t;return}Ce=t=a}while(t!==null);ot=6,Ce=null}function Ty(t,i,a,l,h,d,v,E,w){t.cancelPendingCommit=null;do Yu();while(Lt!==0);if((Ge&6)!==0)throw Error(s(327));if(i!==null){if(i===t.current)throw Error(s(177));if(d=i.lanes|i.childLanes,d|=Ph,ao(t,a,d,v,E,w),t===We&&(Ce=We=null,Ue=0),ya=i,cr=t,_a=a,Bf=d,qf=h,hy=l,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,uA(Hr,function(){return Ry(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||l){l=Q.T,Q.T=null,h=ne.p,ne.p=2,v=Ge,Ge|=4;try{WT(t,i,a)}finally{Ge=v,ne.p=h,Q.T=l}}Lt=1,Ay(),Sy(),by()}}function Ay(){if(Lt===1){Lt=0;var t=cr,i=ya,a=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||a){a=Q.T,Q.T=null;var l=ne.p;ne.p=2;var h=Ge;Ge|=4;try{ry(i,t);var d=rd,v=cp(t.containerInfo),E=d.focusedElem,w=d.selectionRange;if(v!==E&&E&&E.ownerDocument&&up(E.ownerDocument.documentElement,E)){if(w!==null&&Nh(E)){var j=w.start,K=w.end;if(K===void 0&&(K=j),"selectionStart"in E)E.selectionStart=j,E.selectionEnd=Math.min(K,E.value.length);else{var X=E.ownerDocument||document,z=X&&X.defaultView||window;if(z.getSelection){var B=z.getSelection(),_e=E.textContent.length,me=Math.min(w.start,_e),Xe=w.end===void 0?me:Math.min(w.end,_e);!B.extend&&me>Xe&&(v=Xe,Xe=me,me=v);var P=lp(E,me),D=lp(E,Xe);if(P&&D&&(B.rangeCount!==1||B.anchorNode!==P.node||B.anchorOffset!==P.offset||B.focusNode!==D.node||B.focusOffset!==D.offset)){var k=X.createRange();k.setStart(P.node,P.offset),B.removeAllRanges(),me>Xe?(B.addRange(k),B.extend(D.node,D.offset)):(k.setEnd(D.node,D.offset),B.addRange(k))}}}}for(X=[],B=E;B=B.parentNode;)B.nodeType===1&&X.push({element:B,left:B.scrollLeft,top:B.scrollTop});for(typeof E.focus=="function"&&E.focus(),E=0;E<X.length;E++){var Y=X[E];Y.element.scrollLeft=Y.left,Y.element.scrollTop=Y.top}}ac=!!id,rd=id=null}finally{Ge=h,ne.p=l,Q.T=a}}t.current=i,Lt=2}}function Sy(){if(Lt===2){Lt=0;var t=cr,i=ya,a=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||a){a=Q.T,Q.T=null;var l=ne.p;ne.p=2;var h=Ge;Ge|=4;try{ey(t,i.alternate,i)}finally{Ge=h,ne.p=l,Q.T=a}}Lt=3}}function by(){if(Lt===4||Lt===3){Lt=0,Hl();var t=cr,i=ya,a=_a,l=hy;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Lt=5:(Lt=0,ya=cr=null,wy(t,t.pendingLanes));var h=t.pendingLanes;if(h===0&&(ur=null),Ls(a),i=i.stateNode,He&&typeof He.onCommitFiberRoot=="function")try{He.onCommitFiberRoot(st,i,void 0,(i.current.flags&128)===128)}catch{}if(l!==null){i=Q.T,h=ne.p,ne.p=2,Q.T=null;try{for(var d=t.onRecoverableError,v=0;v<l.length;v++){var E=l[v];d(E.value,{componentStack:E.stack})}}finally{Q.T=i,ne.p=h}}(_a&3)!==0&&Yu(),ni(t),h=t.pendingLanes,(a&4194090)!==0&&(h&42)!==0?t===Hf?$o++:($o=0,Hf=t):$o=0,Zo(0)}}function wy(t,i){(t.pooledCacheLanes&=i)===0&&(i=t.pooledCache,i!=null&&(t.pooledCache=null,No(i)))}function Yu(t){return Ay(),Sy(),by(),Ry()}function Ry(){if(Lt!==5)return!1;var t=cr,i=Bf;Bf=0;var a=Ls(_a),l=Q.T,h=ne.p;try{ne.p=32>a?32:a,Q.T=null,a=qf,qf=null;var d=cr,v=_a;if(Lt=0,ya=cr=null,_a=0,(Ge&6)!==0)throw Error(s(331));var E=Ge;if(Ge|=4,uy(d.current),ay(d,d.current,v,a),Ge=E,Zo(0,!1),He&&typeof He.onPostCommitFiberRoot=="function")try{He.onPostCommitFiberRoot(st,d)}catch{}return!0}finally{ne.p=h,Q.T=l,wy(t,i)}}function Iy(t,i,a){i=An(a,i),i=Tf(t.stateNode,i,2),t=er(t,i,2),t!==null&&(fi(t,2),ni(t))}function $e(t,i,a){if(t.tag===3)Iy(t,t,a);else for(;i!==null;){if(i.tag===3){Iy(i,t,a);break}else if(i.tag===1){var l=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(ur===null||!ur.has(l))){t=An(a,t),a=Dg(2),l=er(i,a,2),l!==null&&(Og(a,l,i,t),fi(l,2),ni(l));break}}i=i.return}}function Kf(t,i,a){var l=t.pingCache;if(l===null){l=t.pingCache=new tA;var h=new Set;l.set(i,h)}else h=l.get(i),h===void 0&&(h=new Set,l.set(i,h));h.has(a)||(Lf=!0,h.add(a),t=aA.bind(null,t,i,a),i.then(t,t))}function aA(t,i,a){var l=t.pingCache;l!==null&&l.delete(i),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,We===t&&(Ue&a)===a&&(ot===4||ot===3&&(Ue&62914560)===Ue&&300>gn()-zf?(Ge&2)===0&&va(t,0):kf|=a,ga===Ue&&(ga=0)),ni(t)}function Cy(t,i){i===0&&(i=so()),t=ta(t,i),t!==null&&(fi(t,i),ni(t))}function oA(t){var i=t.memoizedState,a=0;i!==null&&(a=i.retryLane),Cy(t,a)}function lA(t,i){var a=0;switch(t.tag){case 13:var l=t.stateNode,h=t.memoizedState;h!==null&&(a=h.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(s(314))}l!==null&&l.delete(i),Cy(t,a)}function uA(t,i){return Br(t,i)}var Xu=null,Ta=null,Yf=!1,$u=!1,Xf=!1,As=0;function ni(t){t!==Ta&&t.next===null&&(Ta===null?Xu=Ta=t:Ta=Ta.next=t),$u=!0,Yf||(Yf=!0,hA())}function Zo(t,i){if(!Xf&&$u){Xf=!0;do for(var a=!1,l=Xu;l!==null;){if(t!==0){var h=l.pendingLanes;if(h===0)var d=0;else{var v=l.suspendedLanes,E=l.pingedLanes;d=(1<<31-Ht(42|t)+1)-1,d&=h&~(v&~E),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(a=!0,Oy(l,d))}else d=Ue,d=Us(l,l===We?d:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(d&3)===0||Kr(l,d)||(a=!0,Oy(l,d));l=l.next}while(a);Xf=!1}}function cA(){xy()}function xy(){$u=Yf=!1;var t=0;As!==0&&(vA()&&(t=As),As=0);for(var i=gn(),a=null,l=Xu;l!==null;){var h=l.next,d=Ny(l,i);d===0?(l.next=null,a===null?Xu=h:a.next=h,h===null&&(Ta=a)):(a=l,(t!==0||(d&3)!==0)&&($u=!0)),l=h}Zo(t)}function Ny(t,i){for(var a=t.suspendedLanes,l=t.pingedLanes,h=t.expirationTimes,d=t.pendingLanes&-62914561;0<d;){var v=31-Ht(d),E=1<<v,w=h[v];w===-1?((E&a)===0||(E&l)!==0)&&(h[v]=io(E,i)):w<=i&&(t.expiredLanes|=E),d&=~E}if(i=We,a=Ue,a=Us(t,t===i?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,a===0||t===i&&(Fe===2||Fe===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&qr(l),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||Kr(t,a)){if(i=a&-a,i===t.callbackPriority)return i;switch(l!==null&&qr(l),Ls(a)){case 2:case 8:a=Vs;break;case 32:a=Hr;break;case 268435456:a=Ps;break;default:a=Hr}return l=Dy.bind(null,t),a=Br(a,l),t.callbackPriority=i,t.callbackNode=a,i}return l!==null&&l!==null&&qr(l),t.callbackPriority=2,t.callbackNode=null,2}function Dy(t,i){if(Lt!==0&&Lt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(Yu()&&t.callbackNode!==a)return null;var l=Ue;return l=Us(t,t===We?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(dy(t,l,i),Ny(t,gn()),t.callbackNode!=null&&t.callbackNode===a?Dy.bind(null,t):null)}function Oy(t,i){if(Yu())return null;dy(t,i,!0)}function hA(){TA(function(){(Ge&6)!==0?Br(to,cA):xy()})}function $f(){return As===0&&(As=ro()),As}function My(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Hs(""+t)}function Vy(t,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,t.id&&a.setAttribute("form",t.id),i.parentNode.insertBefore(a,i),t=new FormData(t),a.parentNode.removeChild(a),t}function fA(t,i,a,l,h){if(i==="submit"&&a&&a.stateNode===h){var d=My((h[ft]||null).action),v=l.submitter;v&&(i=(i=v[ft]||null)?My(i.formAction):v.getAttribute("formAction"),i!==null&&(d=i,v=null));var E=new Gs("action","action",null,l,h);t.push({event:E,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(As!==0){var w=v?Vy(h,v):new FormData(h);gf(a,{pending:!0,data:w,method:h.method,action:d},null,w)}}else typeof d=="function"&&(E.preventDefault(),w=v?Vy(h,v):new FormData(h),gf(a,{pending:!0,data:w,method:h.method,action:d},d,w))},currentTarget:h}]})}}for(var Zf=0;Zf<Vh.length;Zf++){var Wf=Vh[Zf],dA=Wf.toLowerCase(),mA=Wf[0].toUpperCase()+Wf.slice(1);Mn(dA,"on"+mA)}Mn(dp,"onAnimationEnd"),Mn(mp,"onAnimationIteration"),Mn(pp,"onAnimationStart"),Mn("dblclick","onDoubleClick"),Mn("focusin","onFocus"),Mn("focusout","onBlur"),Mn(DT,"onTransitionRun"),Mn(OT,"onTransitionStart"),Mn(MT,"onTransitionCancel"),Mn(gp,"onTransitionEnd"),mi("onMouseEnter",["mouseout","mouseover"]),mi("onMouseLeave",["mouseout","mouseover"]),mi("onPointerEnter",["pointerout","pointerover"]),mi("onPointerLeave",["pointerout","pointerover"]),Dn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Dn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Dn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Dn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Dn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Dn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Wo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),pA=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Wo));function Py(t,i){i=(i&4)!==0;for(var a=0;a<t.length;a++){var l=t[a],h=l.event;l=l.listeners;e:{var d=void 0;if(i)for(var v=l.length-1;0<=v;v--){var E=l[v],w=E.instance,j=E.currentTarget;if(E=E.listener,w!==d&&h.isPropagationStopped())break e;d=E,h.currentTarget=j;try{d(h)}catch(K){Lu(K)}h.currentTarget=null,d=w}else for(v=0;v<l.length;v++){if(E=l[v],w=E.instance,j=E.currentTarget,E=E.listener,w!==d&&h.isPropagationStopped())break e;d=E,h.currentTarget=j;try{d(h)}catch(K){Lu(K)}h.currentTarget=null,d=w}}}}function xe(t,i){var a=i[lo];a===void 0&&(a=i[lo]=new Set);var l=t+"__bubble";a.has(l)||(Uy(i,t,2,!1),a.add(l))}function Jf(t,i,a){var l=0;i&&(l|=4),Uy(a,t,l,i)}var Zu="_reactListening"+Math.random().toString(36).slice(2);function ed(t){if(!t[Zu]){t[Zu]=!0,uo.forEach(function(a){a!=="selectionchange"&&(pA.has(a)||Jf(a,!1,t),Jf(a,!0,t))});var i=t.nodeType===9?t:t.ownerDocument;i===null||i[Zu]||(i[Zu]=!0,Jf("selectionchange",!1,i))}}function Uy(t,i,a,l){switch(a_(i)){case 2:var h=qA;break;case 8:h=HA;break;default:h=md}a=h.bind(null,i,a,t),h=void 0,!En||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(h=!0),l?h!==void 0?t.addEventListener(i,a,{capture:!0,passive:h}):t.addEventListener(i,a,!0):h!==void 0?t.addEventListener(i,a,{passive:h}):t.addEventListener(i,a,!1)}function td(t,i,a,l,h){var d=l;if((i&1)===0&&(i&2)===0&&l!==null)e:for(;;){if(l===null)return;var v=l.tag;if(v===3||v===4){var E=l.stateNode.containerInfo;if(E===h)break;if(v===4)for(v=l.return;v!==null;){var w=v.tag;if((w===3||w===4)&&v.stateNode.containerInfo===h)return;v=v.return}for(;E!==null;){if(v=di(E),v===null)return;if(w=v.tag,w===5||w===6||w===26||w===27){l=d=v;continue e}E=E.parentNode}}l=l.return}Jl(function(){var j=d,K=vn(a),X=[];e:{var z=yp.get(t);if(z!==void 0){var B=Gs,_e=t;switch(t){case"keypress":if(Kn(a)===0)break e;case"keydown":case"keyup":B=$s;break;case"focusin":_e="focus",B=Ks;break;case"focusout":_e="blur",B=Ks;break;case"beforeblur":case"afterblur":B=Ks;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":B=Tn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":B=Rh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":B=ou;break;case dp:case mp:case pp:B=Ys;break;case gp:B=uu;break;case"scroll":case"scrollend":B=eu;break;case"wheel":B=Zs;break;case"copy":case"cut":case"paste":B=Xs;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":B=Ao;break;case"toggle":case"beforetoggle":B=hu}var me=(i&4)!==0,Xe=!me&&(t==="scroll"||t==="scrollend"),P=me?z!==null?z+"Capture":null:z;me=[];for(var D=j,k;D!==null;){var Y=D;if(k=Y.stateNode,Y=Y.tag,Y!==5&&Y!==26&&Y!==27||k===null||P===null||(Y=ts(D,P),Y!=null&&me.push(Jo(D,Y,k))),Xe)break;D=D.return}0<me.length&&(z=new B(z,_e,null,a,K),X.push({event:z,listeners:me}))}}if((i&7)===0){e:{if(z=t==="mouseover"||t==="pointerover",B=t==="mouseout"||t==="pointerout",z&&a!==yi&&(_e=a.relatedTarget||a.fromElement)&&(di(_e)||_e[yn]))break e;if((B||z)&&(z=K.window===K?K:(z=K.ownerDocument)?z.defaultView||z.parentWindow:window,B?(_e=a.relatedTarget||a.toElement,B=j,_e=_e?di(_e):null,_e!==null&&(Xe=u(_e),me=_e.tag,_e!==Xe||me!==5&&me!==27&&me!==6)&&(_e=null)):(B=null,_e=j),B!==_e)){if(me=Tn,Y="onMouseLeave",P="onMouseEnter",D="mouse",(t==="pointerout"||t==="pointerover")&&(me=Ao,Y="onPointerLeave",P="onPointerEnter",D="pointer"),Xe=B==null?z:Hn(B),k=_e==null?z:Hn(_e),z=new me(Y,D+"leave",B,a,K),z.target=Xe,z.relatedTarget=k,Y=null,di(K)===j&&(me=new me(P,D+"enter",_e,a,K),me.target=k,me.relatedTarget=Xe,Y=me),Xe=Y,B&&_e)t:{for(me=B,P=_e,D=0,k=me;k;k=Aa(k))D++;for(k=0,Y=P;Y;Y=Aa(Y))k++;for(;0<D-k;)me=Aa(me),D--;for(;0<k-D;)P=Aa(P),k--;for(;D--;){if(me===P||P!==null&&me===P.alternate)break t;me=Aa(me),P=Aa(P)}me=null}else me=null;B!==null&&Ly(X,z,B,me,!1),_e!==null&&Xe!==null&&Ly(X,Xe,_e,me,!0)}}e:{if(z=j?Hn(j):window,B=z.nodeName&&z.nodeName.toLowerCase(),B==="select"||B==="input"&&z.type==="file")var oe=np;else if(vt(z))if(ip)oe=CT;else{oe=RT;var Ie=wT}else B=z.nodeName,!B||B.toLowerCase()!=="input"||z.type!=="checkbox"&&z.type!=="radio"?j&&po(j.elementType)&&(oe=np):oe=IT;if(oe&&(oe=oe(t,j))){Ai(X,oe,a,K);break e}Ie&&Ie(t,z,j),t==="focusout"&&j&&z.type==="number"&&j.memoizedProps.value!=null&&Xi(z,"number",z.value)}switch(Ie=j?Hn(j):window,t){case"focusin":(vt(Ie)||Ie.contentEditable==="true")&&(Ws=Ie,Dh=j,wo=null);break;case"focusout":wo=Dh=Ws=null;break;case"mousedown":Oh=!0;break;case"contextmenu":case"mouseup":case"dragend":Oh=!1,hp(X,a,K);break;case"selectionchange":if(NT)break;case"keydown":case"keyup":hp(X,a,K)}var ue;if($n)e:{switch(t){case"compositionstart":var pe="onCompositionStart";break e;case"compositionend":pe="onCompositionEnd";break e;case"compositionupdate":pe="onCompositionUpdate";break e}pe=void 0}else Ve?H(t,a)&&(pe="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(pe="onCompositionStart");pe&&(_&&a.locale!=="ko"&&(Ve||pe!=="onCompositionStart"?pe==="onCompositionEnd"&&Ve&&(ue=yo()):(Qn=K,$i="value"in Qn?Qn.value:Qn.textContent,Ve=!0)),Ie=Wu(j,pe),0<Ie.length&&(pe=new Eo(pe,t,null,a,K),X.push({event:pe,listeners:Ie}),ue?pe.data=ue:(ue=te(a),ue!==null&&(pe.data=ue)))),(ue=m?_t(t,a):Pe(t,a))&&(pe=Wu(j,"onBeforeInput"),0<pe.length&&(Ie=new Eo("onBeforeInput","beforeinput",null,a,K),X.push({event:Ie,listeners:pe}),Ie.data=ue)),fA(X,t,j,a,K)}Py(X,i)})}function Jo(t,i,a){return{instance:t,listener:i,currentTarget:a}}function Wu(t,i){for(var a=i+"Capture",l=[];t!==null;){var h=t,d=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||d===null||(h=ts(t,a),h!=null&&l.unshift(Jo(t,h,d)),h=ts(t,i),h!=null&&l.push(Jo(t,h,d))),t.tag===3)return l;t=t.return}return[]}function Aa(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Ly(t,i,a,l,h){for(var d=i._reactName,v=[];a!==null&&a!==l;){var E=a,w=E.alternate,j=E.stateNode;if(E=E.tag,w!==null&&w===l)break;E!==5&&E!==26&&E!==27||j===null||(w=j,h?(j=ts(a,d),j!=null&&v.unshift(Jo(a,j,w))):h||(j=ts(a,d),j!=null&&v.push(Jo(a,j,w)))),a=a.return}v.length!==0&&t.push({event:i,listeners:v})}var gA=/\r\n?/g,yA=/\u0000|\uFFFD/g;function ky(t){return(typeof t=="string"?t:""+t).replace(gA,`
`).replace(yA,"")}function jy(t,i){return i=ky(i),ky(t)===i}function Ju(){}function Ye(t,i,a,l,h,d){switch(a){case"children":typeof l=="string"?i==="body"||i==="textarea"&&l===""||_n(t,l):(typeof l=="number"||typeof l=="bigint")&&i!=="body"&&_n(t,""+l);break;case"className":Gn(t,"class",l);break;case"tabIndex":Gn(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":Gn(t,a,l);break;case"style":mo(t,l,d);break;case"data":if(i!=="object"){Gn(t,"data",l);break}case"src":case"href":if(l===""&&(i!=="a"||a!=="href")){t.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=Hs(""+l),t.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(a==="formAction"?(i!=="input"&&Ye(t,i,"name",h.name,h,null),Ye(t,i,"formEncType",h.formEncType,h,null),Ye(t,i,"formMethod",h.formMethod,h,null),Ye(t,i,"formTarget",h.formTarget,h,null)):(Ye(t,i,"encType",h.encType,h,null),Ye(t,i,"method",h.method,h,null),Ye(t,i,"target",h.target,h,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=Hs(""+l),t.setAttribute(a,l);break;case"onClick":l!=null&&(t.onclick=Ju);break;case"onScroll":l!=null&&xe("scroll",t);break;case"onScrollEnd":l!=null&&xe("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}a=Hs(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""+l):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":l===!0?t.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,l):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(a,l):t.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(a):t.setAttribute(a,l);break;case"popover":xe("beforetoggle",t),xe("toggle",t),Yi(t,"popover",l);break;case"xlinkActuate":Vt(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Vt(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Vt(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Vt(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Vt(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Vt(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Vt(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Vt(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Vt(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Yi(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=bh.get(a)||a,Yi(t,a,l))}}function nd(t,i,a,l,h,d){switch(a){case"style":mo(t,l,d);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"children":typeof l=="string"?_n(t,l):(typeof l=="number"||typeof l=="bigint")&&_n(t,""+l);break;case"onScroll":l!=null&&xe("scroll",t);break;case"onScrollEnd":l!=null&&xe("scrollend",t);break;case"onClick":l!=null&&(t.onclick=Ju);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ks.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),i=a.slice(2,h?a.length-7:void 0),d=t[ft]||null,d=d!=null?d[a]:null,typeof d=="function"&&t.removeEventListener(i,d,h),typeof l=="function")){typeof d!="function"&&d!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(i,l,h);break e}a in t?t[a]=l:l===!0?t.setAttribute(a,""):Yi(t,a,l)}}}function kt(t,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":xe("error",t),xe("load",t);var l=!1,h=!1,d;for(d in a)if(a.hasOwnProperty(d)){var v=a[d];if(v!=null)switch(d){case"src":l=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:Ye(t,i,d,v,a,null)}}h&&Ye(t,i,"srcSet",a.srcSet,a,null),l&&Ye(t,i,"src",a.src,a,null);return;case"input":xe("invalid",t);var E=d=v=h=null,w=null,j=null;for(l in a)if(a.hasOwnProperty(l)){var K=a[l];if(K!=null)switch(l){case"name":h=K;break;case"type":v=K;break;case"checked":w=K;break;case"defaultChecked":j=K;break;case"value":d=K;break;case"defaultValue":E=K;break;case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(s(137,i));break;default:Ye(t,i,l,K,a,null)}}Wr(t,d,E,w,j,v,h,!1),qs(t);return;case"select":xe("invalid",t),l=v=d=null;for(h in a)if(a.hasOwnProperty(h)&&(E=a[h],E!=null))switch(h){case"value":d=E;break;case"defaultValue":v=E;break;case"multiple":l=E;default:Ye(t,i,h,E,a,null)}i=d,a=v,t.multiple=!!l,i!=null?gi(t,!!l,i,!1):a!=null&&gi(t,!!l,a,!0);return;case"textarea":xe("invalid",t),d=h=l=null;for(v in a)if(a.hasOwnProperty(v)&&(E=a[v],E!=null))switch(v){case"value":l=E;break;case"defaultValue":h=E;break;case"children":d=E;break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(s(91));break;default:Ye(t,i,v,E,a,null)}Jr(t,l,h,d),qs(t);return;case"option":for(w in a)if(a.hasOwnProperty(w)&&(l=a[w],l!=null))switch(w){case"selected":t.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:Ye(t,i,w,l,a,null)}return;case"dialog":xe("beforetoggle",t),xe("toggle",t),xe("cancel",t),xe("close",t);break;case"iframe":case"object":xe("load",t);break;case"video":case"audio":for(l=0;l<Wo.length;l++)xe(Wo[l],t);break;case"image":xe("error",t),xe("load",t);break;case"details":xe("toggle",t);break;case"embed":case"source":case"link":xe("error",t),xe("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(j in a)if(a.hasOwnProperty(j)&&(l=a[j],l!=null))switch(j){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:Ye(t,i,j,l,a,null)}return;default:if(po(i)){for(K in a)a.hasOwnProperty(K)&&(l=a[K],l!==void 0&&nd(t,i,K,l,a,void 0));return}}for(E in a)a.hasOwnProperty(E)&&(l=a[E],l!=null&&Ye(t,i,E,l,a,null))}function _A(t,i,a,l){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,d=null,v=null,E=null,w=null,j=null,K=null;for(B in a){var X=a[B];if(a.hasOwnProperty(B)&&X!=null)switch(B){case"checked":break;case"value":break;case"defaultValue":w=X;default:l.hasOwnProperty(B)||Ye(t,i,B,null,l,X)}}for(var z in l){var B=l[z];if(X=a[z],l.hasOwnProperty(z)&&(B!=null||X!=null))switch(z){case"type":d=B;break;case"name":h=B;break;case"checked":j=B;break;case"defaultChecked":K=B;break;case"value":v=B;break;case"defaultValue":E=B;break;case"children":case"dangerouslySetInnerHTML":if(B!=null)throw Error(s(137,i));break;default:B!==X&&Ye(t,i,z,B,l,X)}}on(t,v,E,w,j,K,d,h);return;case"select":B=v=E=z=null;for(d in a)if(w=a[d],a.hasOwnProperty(d)&&w!=null)switch(d){case"value":break;case"multiple":B=w;default:l.hasOwnProperty(d)||Ye(t,i,d,null,l,w)}for(h in l)if(d=l[h],w=a[h],l.hasOwnProperty(h)&&(d!=null||w!=null))switch(h){case"value":z=d;break;case"defaultValue":E=d;break;case"multiple":v=d;default:d!==w&&Ye(t,i,h,d,l,w)}i=E,a=v,l=B,z!=null?gi(t,!!a,z,!1):!!l!=!!a&&(i!=null?gi(t,!!a,i,!0):gi(t,!!a,a?[]:"",!1));return;case"textarea":B=z=null;for(E in a)if(h=a[E],a.hasOwnProperty(E)&&h!=null&&!l.hasOwnProperty(E))switch(E){case"value":break;case"children":break;default:Ye(t,i,E,null,l,h)}for(v in l)if(h=l[v],d=a[v],l.hasOwnProperty(v)&&(h!=null||d!=null))switch(v){case"value":z=h;break;case"defaultValue":B=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(s(91));break;default:h!==d&&Ye(t,i,v,h,l,d)}Qe(t,z,B);return;case"option":for(var _e in a)if(z=a[_e],a.hasOwnProperty(_e)&&z!=null&&!l.hasOwnProperty(_e))switch(_e){case"selected":t.selected=!1;break;default:Ye(t,i,_e,null,l,z)}for(w in l)if(z=l[w],B=a[w],l.hasOwnProperty(w)&&z!==B&&(z!=null||B!=null))switch(w){case"selected":t.selected=z&&typeof z!="function"&&typeof z!="symbol";break;default:Ye(t,i,w,z,l,B)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var me in a)z=a[me],a.hasOwnProperty(me)&&z!=null&&!l.hasOwnProperty(me)&&Ye(t,i,me,null,l,z);for(j in l)if(z=l[j],B=a[j],l.hasOwnProperty(j)&&z!==B&&(z!=null||B!=null))switch(j){case"children":case"dangerouslySetInnerHTML":if(z!=null)throw Error(s(137,i));break;default:Ye(t,i,j,z,l,B)}return;default:if(po(i)){for(var Xe in a)z=a[Xe],a.hasOwnProperty(Xe)&&z!==void 0&&!l.hasOwnProperty(Xe)&&nd(t,i,Xe,void 0,l,z);for(K in l)z=l[K],B=a[K],!l.hasOwnProperty(K)||z===B||z===void 0&&B===void 0||nd(t,i,K,z,l,B);return}}for(var P in a)z=a[P],a.hasOwnProperty(P)&&z!=null&&!l.hasOwnProperty(P)&&Ye(t,i,P,null,l,z);for(X in l)z=l[X],B=a[X],!l.hasOwnProperty(X)||z===B||z==null&&B==null||Ye(t,i,X,z,l,B)}var id=null,rd=null;function ec(t){return t.nodeType===9?t:t.ownerDocument}function zy(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function By(t,i){if(t===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&i==="foreignObject"?0:t}function sd(t,i){return t==="textarea"||t==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var ad=null;function vA(){var t=window.event;return t&&t.type==="popstate"?t===ad?!1:(ad=t,!0):(ad=null,!1)}var qy=typeof setTimeout=="function"?setTimeout:void 0,EA=typeof clearTimeout=="function"?clearTimeout:void 0,Hy=typeof Promise=="function"?Promise:void 0,TA=typeof queueMicrotask=="function"?queueMicrotask:typeof Hy<"u"?function(t){return Hy.resolve(null).then(t).catch(AA)}:qy;function AA(t){setTimeout(function(){throw t})}function fr(t){return t==="head"}function Gy(t,i){var a=i,l=0,h=0;do{var d=a.nextSibling;if(t.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"){if(0<l&&8>l){a=l;var v=t.ownerDocument;if(a&1&&el(v.documentElement),a&2&&el(v.body),a&4)for(a=v.head,el(a),v=a.firstChild;v;){var E=v.nextSibling,w=v.nodeName;v[Yr]||w==="SCRIPT"||w==="STYLE"||w==="LINK"&&v.rel.toLowerCase()==="stylesheet"||a.removeChild(v),v=E}}if(h===0){t.removeChild(d),ll(i);return}h--}else a==="$"||a==="$?"||a==="$!"?h++:l=a.charCodeAt(0)-48;else l=0;a=d}while(a);ll(i)}function od(t){var i=t.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":od(a),Ki(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function SA(t,i,a,l){for(;t.nodeType===1;){var h=a;if(t.nodeName.toLowerCase()!==i.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[Yr])switch(i){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(d=t.getAttribute("rel"),d==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(d!==h.rel||t.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||t.getAttribute("title")!==(h.title==null?null:h.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(d=t.getAttribute("src"),(d!==(h.src==null?null:h.src)||t.getAttribute("type")!==(h.type==null?null:h.type)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&d&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(i==="input"&&t.type==="hidden"){var d=h.name==null?null:""+h.name;if(h.type==="hidden"&&t.getAttribute("name")===d)return t}else return t;if(t=Pn(t.nextSibling),t===null)break}return null}function bA(t,i,a){if(i==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=Pn(t.nextSibling),t===null))return null;return t}function ld(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState==="complete"}function wA(t,i){var a=t.ownerDocument;if(t.data!=="$?"||a.readyState==="complete")i();else{var l=function(){i(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function Pn(t){for(;t!=null;t=t.nextSibling){var i=t.nodeType;if(i===1||i===3)break;if(i===8){if(i=t.data,i==="$"||i==="$!"||i==="$?"||i==="F!"||i==="F")break;if(i==="/$")return null}}return t}var ud=null;function Fy(t){t=t.previousSibling;for(var i=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"){if(i===0)return t;i--}else a==="/$"&&i++}t=t.previousSibling}return null}function Qy(t,i,a){switch(i=ec(a),t){case"html":if(t=i.documentElement,!t)throw Error(s(452));return t;case"head":if(t=i.head,!t)throw Error(s(453));return t;case"body":if(t=i.body,!t)throw Error(s(454));return t;default:throw Error(s(451))}}function el(t){for(var i=t.attributes;i.length;)t.removeAttributeNode(i[0]);Ki(t)}var Cn=new Map,Ky=new Set;function tc(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Pi=ne.d;ne.d={f:RA,r:IA,D:CA,C:xA,L:NA,m:DA,X:MA,S:OA,M:VA};function RA(){var t=Pi.f(),i=Qu();return t||i}function IA(t){var i=qn(t);i!==null&&i.tag===5&&i.type==="form"?dg(i):Pi.r(t)}var Sa=typeof document>"u"?null:document;function Yy(t,i,a){var l=Sa;if(l&&typeof i=="string"&&i){var h=dt(i);h='link[rel="'+t+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),Ky.has(h)||(Ky.add(h),t={rel:t,crossOrigin:a,href:i},l.querySelector(h)===null&&(i=l.createElement("link"),kt(i,"link",t),lt(i),l.head.appendChild(i)))}}function CA(t){Pi.D(t),Yy("dns-prefetch",t,null)}function xA(t,i){Pi.C(t,i),Yy("preconnect",t,i)}function NA(t,i,a){Pi.L(t,i,a);var l=Sa;if(l&&t&&i){var h='link[rel="preload"][as="'+dt(i)+'"]';i==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+dt(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+dt(a.imageSizes)+'"]')):h+='[href="'+dt(t)+'"]';var d=h;switch(i){case"style":d=ba(t);break;case"script":d=wa(t)}Cn.has(d)||(t=T({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:t,as:i},a),Cn.set(d,t),l.querySelector(h)!==null||i==="style"&&l.querySelector(tl(d))||i==="script"&&l.querySelector(nl(d))||(i=l.createElement("link"),kt(i,"link",t),lt(i),l.head.appendChild(i)))}}function DA(t,i){Pi.m(t,i);var a=Sa;if(a&&t){var l=i&&typeof i.as=="string"?i.as:"script",h='link[rel="modulepreload"][as="'+dt(l)+'"][href="'+dt(t)+'"]',d=h;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=wa(t)}if(!Cn.has(d)&&(t=T({rel:"modulepreload",href:t},i),Cn.set(d,t),a.querySelector(h)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(nl(d)))return}l=a.createElement("link"),kt(l,"link",t),lt(l),a.head.appendChild(l)}}}function OA(t,i,a){Pi.S(t,i,a);var l=Sa;if(l&&t){var h=$t(l).hoistableStyles,d=ba(t);i=i||"default";var v=h.get(d);if(!v){var E={loading:0,preload:null};if(v=l.querySelector(tl(d)))E.loading=5;else{t=T({rel:"stylesheet",href:t,"data-precedence":i},a),(a=Cn.get(d))&&cd(t,a);var w=v=l.createElement("link");lt(w),kt(w,"link",t),w._p=new Promise(function(j,K){w.onload=j,w.onerror=K}),w.addEventListener("load",function(){E.loading|=1}),w.addEventListener("error",function(){E.loading|=2}),E.loading|=4,nc(v,i,l)}v={type:"stylesheet",instance:v,count:1,state:E},h.set(d,v)}}}function MA(t,i){Pi.X(t,i);var a=Sa;if(a&&t){var l=$t(a).hoistableScripts,h=wa(t),d=l.get(h);d||(d=a.querySelector(nl(h)),d||(t=T({src:t,async:!0},i),(i=Cn.get(h))&&hd(t,i),d=a.createElement("script"),lt(d),kt(d,"link",t),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(h,d))}}function VA(t,i){Pi.M(t,i);var a=Sa;if(a&&t){var l=$t(a).hoistableScripts,h=wa(t),d=l.get(h);d||(d=a.querySelector(nl(h)),d||(t=T({src:t,async:!0,type:"module"},i),(i=Cn.get(h))&&hd(t,i),d=a.createElement("script"),lt(d),kt(d,"link",t),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(h,d))}}function Xy(t,i,a,l){var h=(h=ve.current)?tc(h):null;if(!h)throw Error(s(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=ba(a.href),a=$t(h).hoistableStyles,l=a.get(i),l||(l={type:"style",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=ba(a.href);var d=$t(h).hoistableStyles,v=d.get(t);if(v||(h=h.ownerDocument||h,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(t,v),(d=h.querySelector(tl(t)))&&!d._p&&(v.instance=d,v.state.loading=5),Cn.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Cn.set(t,a),d||PA(h,t,a,v.state))),i&&l===null)throw Error(s(528,""));return v}if(i&&l!==null)throw Error(s(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=wa(a),a=$t(h).hoistableScripts,l=a.get(i),l||(l={type:"script",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,t))}}function ba(t){return'href="'+dt(t)+'"'}function tl(t){return'link[rel="stylesheet"]['+t+"]"}function $y(t){return T({},t,{"data-precedence":t.precedence,precedence:null})}function PA(t,i,a,l){t.querySelector('link[rel="preload"][as="style"]['+i+"]")?l.loading=1:(i=t.createElement("link"),l.preload=i,i.addEventListener("load",function(){return l.loading|=1}),i.addEventListener("error",function(){return l.loading|=2}),kt(i,"link",a),lt(i),t.head.appendChild(i))}function wa(t){return'[src="'+dt(t)+'"]'}function nl(t){return"script[async]"+t}function Zy(t,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var l=t.querySelector('style[data-href~="'+dt(a.href)+'"]');if(l)return i.instance=l,lt(l),l;var h=T({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),lt(l),kt(l,"style",h),nc(l,a.precedence,t),i.instance=l;case"stylesheet":h=ba(a.href);var d=t.querySelector(tl(h));if(d)return i.state.loading|=4,i.instance=d,lt(d),d;l=$y(a),(h=Cn.get(h))&&cd(l,h),d=(t.ownerDocument||t).createElement("link"),lt(d);var v=d;return v._p=new Promise(function(E,w){v.onload=E,v.onerror=w}),kt(d,"link",l),i.state.loading|=4,nc(d,a.precedence,t),i.instance=d;case"script":return d=wa(a.src),(h=t.querySelector(nl(d)))?(i.instance=h,lt(h),h):(l=a,(h=Cn.get(d))&&(l=T({},a),hd(l,h)),t=t.ownerDocument||t,h=t.createElement("script"),lt(h),kt(h,"link",l),t.head.appendChild(h),i.instance=h);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(l=i.instance,i.state.loading|=4,nc(l,a.precedence,t));return i.instance}function nc(t,i,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=l.length?l[l.length-1]:null,d=h,v=0;v<l.length;v++){var E=l[v];if(E.dataset.precedence===i)d=E;else if(d!==h)break}d?d.parentNode.insertBefore(t,d.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(t,i.firstChild))}function cd(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.title==null&&(t.title=i.title)}function hd(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.integrity==null&&(t.integrity=i.integrity)}var ic=null;function Wy(t,i,a){if(ic===null){var l=new Map,h=ic=new Map;h.set(a,l)}else h=ic,l=h.get(a),l||(l=new Map,h.set(a,l));if(l.has(t))return l;for(l.set(t,null),a=a.getElementsByTagName(t),h=0;h<a.length;h++){var d=a[h];if(!(d[Yr]||d[yt]||t==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var v=d.getAttribute(i)||"";v=t+v;var E=l.get(v);E?E.push(d):l.set(v,[d])}}return l}function Jy(t,i,a){t=t.ownerDocument||t,t.head.insertBefore(a,i==="title"?t.querySelector("head > title"):null)}function UA(t,i,a){if(a===1||i.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return t=i.disabled,typeof i.precedence=="string"&&t==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function e_(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}var il=null;function LA(){}function kA(t,i,a){if(il===null)throw Error(s(475));var l=il;if(i.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var h=ba(a.href),d=t.querySelector(tl(h));if(d){t=d._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(l.count++,l=rc.bind(l),t.then(l,l)),i.state.loading|=4,i.instance=d,lt(d);return}d=t.ownerDocument||t,a=$y(a),(h=Cn.get(h))&&cd(a,h),d=d.createElement("link"),lt(d);var v=d;v._p=new Promise(function(E,w){v.onload=E,v.onerror=w}),kt(d,"link",a),i.instance=d}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(i,t),(t=i.state.preload)&&(i.state.loading&3)===0&&(l.count++,i=rc.bind(l),t.addEventListener("load",i),t.addEventListener("error",i))}}function jA(){if(il===null)throw Error(s(475));var t=il;return t.stylesheets&&t.count===0&&fd(t,t.stylesheets),0<t.count?function(i){var a=setTimeout(function(){if(t.stylesheets&&fd(t,t.stylesheets),t.unsuspend){var l=t.unsuspend;t.unsuspend=null,l()}},6e4);return t.unsuspend=i,function(){t.unsuspend=null,clearTimeout(a)}}:null}function rc(){if(this.count--,this.count===0){if(this.stylesheets)fd(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var sc=null;function fd(t,i){t.stylesheets=null,t.unsuspend!==null&&(t.count++,sc=new Map,i.forEach(zA,t),sc=null,rc.call(t))}function zA(t,i){if(!(i.state.loading&4)){var a=sc.get(t);if(a)var l=a.get(null);else{a=new Map,sc.set(t,a);for(var h=t.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<h.length;d++){var v=h[d];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(a.set(v.dataset.precedence,v),l=v)}l&&a.set(null,l)}h=i.instance,v=h.getAttribute("data-precedence"),d=a.get(v)||l,d===l&&a.set(null,h),a.set(v,h),this.count++,l=rc.bind(this),h.addEventListener("load",l),h.addEventListener("error",l),d?d.parentNode.insertBefore(h,d.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(h,t.firstChild)),i.state.loading|=4}}var rl={$$typeof:le,Provider:null,Consumer:null,_currentValue:ce,_currentValue2:ce,_threadCount:0};function BA(t,i,a,l,h,d,v,E){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=hi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=hi(0),this.hiddenUpdates=hi(null),this.identifierPrefix=l,this.onUncaughtError=h,this.onCaughtError=d,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=E,this.incompleteTransitions=new Map}function t_(t,i,a,l,h,d,v,E,w,j,K,X){return t=new BA(t,i,a,v,E,w,j,X),i=1,d===!0&&(i|=24),d=un(3,null,null,i),t.current=d,d.stateNode=t,i=Qh(),i.refCount++,t.pooledCache=i,i.refCount++,d.memoizedState={element:l,isDehydrated:a,cache:i},$h(d),t}function n_(t){return t?(t=na,t):na}function i_(t,i,a,l,h,d){h=n_(h),l.context===null?l.context=h:l.pendingContext=h,l=Ji(i),l.payload={element:a},d=d===void 0?null:d,d!==null&&(l.callback=d),a=er(t,l,i),a!==null&&(mn(a,t,i),Vo(a,t,i))}function r_(t,i){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<i?a:i}}function dd(t,i){r_(t,i),(t=t.alternate)&&r_(t,i)}function s_(t){if(t.tag===13){var i=ta(t,67108864);i!==null&&mn(i,t,67108864),dd(t,67108864)}}var ac=!0;function qA(t,i,a,l){var h=Q.T;Q.T=null;var d=ne.p;try{ne.p=2,md(t,i,a,l)}finally{ne.p=d,Q.T=h}}function HA(t,i,a,l){var h=Q.T;Q.T=null;var d=ne.p;try{ne.p=8,md(t,i,a,l)}finally{ne.p=d,Q.T=h}}function md(t,i,a,l){if(ac){var h=pd(l);if(h===null)td(t,i,l,oc,a),o_(t,l);else if(FA(h,t,i,a,l))l.stopPropagation();else if(o_(t,l),i&4&&-1<GA.indexOf(t)){for(;h!==null;){var d=qn(h);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var v=Nn(d.pendingLanes);if(v!==0){var E=d;for(E.pendingLanes|=2,E.entangledLanes|=2;v;){var w=1<<31-Ht(v);E.entanglements[1]|=w,v&=~w}ni(d),(Ge&6)===0&&(Gu=gn()+500,Zo(0))}}break;case 13:E=ta(d,2),E!==null&&mn(E,d,2),Qu(),dd(d,2)}if(d=pd(l),d===null&&td(t,i,l,oc,a),d===h)break;h=d}h!==null&&l.stopPropagation()}else td(t,i,l,null,a)}}function pd(t){return t=vn(t),gd(t)}var oc=null;function gd(t){if(oc=null,t=di(t),t!==null){var i=u(t);if(i===null)t=null;else{var a=i.tag;if(a===13){if(t=f(i),t!==null)return t;t=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;t=null}else i!==t&&(t=null)}}return oc=t,null}function a_(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(_h()){case to:return 2;case Vs:return 8;case Hr:case vh:return 32;case Ps:return 268435456;default:return 32}default:return 32}}var yd=!1,dr=null,mr=null,pr=null,sl=new Map,al=new Map,gr=[],GA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function o_(t,i){switch(t){case"focusin":case"focusout":dr=null;break;case"dragenter":case"dragleave":mr=null;break;case"mouseover":case"mouseout":pr=null;break;case"pointerover":case"pointerout":sl.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":al.delete(i.pointerId)}}function ol(t,i,a,l,h,d){return t===null||t.nativeEvent!==d?(t={blockedOn:i,domEventName:a,eventSystemFlags:l,nativeEvent:d,targetContainers:[h]},i!==null&&(i=qn(i),i!==null&&s_(i)),t):(t.eventSystemFlags|=l,i=t.targetContainers,h!==null&&i.indexOf(h)===-1&&i.push(h),t)}function FA(t,i,a,l,h){switch(i){case"focusin":return dr=ol(dr,t,i,a,l,h),!0;case"dragenter":return mr=ol(mr,t,i,a,l,h),!0;case"mouseover":return pr=ol(pr,t,i,a,l,h),!0;case"pointerover":var d=h.pointerId;return sl.set(d,ol(sl.get(d)||null,t,i,a,l,h)),!0;case"gotpointercapture":return d=h.pointerId,al.set(d,ol(al.get(d)||null,t,i,a,l,h)),!0}return!1}function l_(t){var i=di(t.target);if(i!==null){var a=u(i);if(a!==null){if(i=a.tag,i===13){if(i=f(a),i!==null){t.blockedOn=i,Ql(t.priority,function(){if(a.tag===13){var l=dn();l=Gi(l);var h=ta(a,l);h!==null&&mn(h,a,l),dd(a,l)}});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function lc(t){if(t.blockedOn!==null)return!1;for(var i=t.targetContainers;0<i.length;){var a=pd(t.nativeEvent);if(a===null){a=t.nativeEvent;var l=new a.constructor(a.type,a);yi=l,a.target.dispatchEvent(l),yi=null}else return i=qn(a),i!==null&&s_(i),t.blockedOn=a,!1;i.shift()}return!0}function u_(t,i,a){lc(t)&&a.delete(i)}function QA(){yd=!1,dr!==null&&lc(dr)&&(dr=null),mr!==null&&lc(mr)&&(mr=null),pr!==null&&lc(pr)&&(pr=null),sl.forEach(u_),al.forEach(u_)}function uc(t,i){t.blockedOn===i&&(t.blockedOn=null,yd||(yd=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,QA)))}var cc=null;function c_(t){cc!==t&&(cc=t,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){cc===t&&(cc=null);for(var i=0;i<t.length;i+=3){var a=t[i],l=t[i+1],h=t[i+2];if(typeof l!="function"){if(gd(l||a)===null)continue;break}var d=qn(a);d!==null&&(t.splice(i,3),i-=3,gf(d,{pending:!0,data:h,method:a.method,action:l},l,h))}}))}function ll(t){function i(w){return uc(w,t)}dr!==null&&uc(dr,t),mr!==null&&uc(mr,t),pr!==null&&uc(pr,t),sl.forEach(i),al.forEach(i);for(var a=0;a<gr.length;a++){var l=gr[a];l.blockedOn===t&&(l.blockedOn=null)}for(;0<gr.length&&(a=gr[0],a.blockedOn===null);)l_(a),a.blockedOn===null&&gr.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var h=a[l],d=a[l+1],v=h[ft]||null;if(typeof d=="function")v||c_(a);else if(v){var E=null;if(d&&d.hasAttribute("formAction")){if(h=d,v=d[ft]||null)E=v.formAction;else if(gd(h)!==null)continue}else E=v.action;typeof E=="function"?a[l+1]=E:(a.splice(l,3),l-=3),c_(a)}}}function _d(t){this._internalRoot=t}hc.prototype.render=_d.prototype.render=function(t){var i=this._internalRoot;if(i===null)throw Error(s(409));var a=i.current,l=dn();i_(a,l,t,i,null,null)},hc.prototype.unmount=_d.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var i=t.containerInfo;i_(t.current,2,null,t,null,null),Qu(),i[yn]=null}};function hc(t){this._internalRoot=t}hc.prototype.unstable_scheduleHydration=function(t){if(t){var i=Fi();t={blockedOn:null,target:t,priority:i};for(var a=0;a<gr.length&&i!==0&&i<gr[a].priority;a++);gr.splice(a,0,t),a===0&&l_(t)}};var h_=e.version;if(h_!=="19.1.0")throw Error(s(527,h_,"19.1.0"));ne.findDOMNode=function(t){var i=t._reactInternals;if(i===void 0)throw typeof t.render=="function"?Error(s(188)):(t=Object.keys(t).join(","),Error(s(268,t)));return t=g(i),t=t!==null?y(t):null,t=t===null?null:t.stateNode,t};var KA={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:Q,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var fc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!fc.isDisabled&&fc.supportsFiber)try{st=fc.inject(KA),He=fc}catch{}}return cl.createRoot=function(t,i){if(!o(t))throw Error(s(299));var a=!1,l="",h=Ig,d=Cg,v=xg,E=null;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(l=i.identifierPrefix),i.onUncaughtError!==void 0&&(h=i.onUncaughtError),i.onCaughtError!==void 0&&(d=i.onCaughtError),i.onRecoverableError!==void 0&&(v=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(E=i.unstable_transitionCallbacks)),i=t_(t,1,!1,null,null,a,l,h,d,v,E,null),t[yn]=i.current,ed(t),new _d(i)},cl.hydrateRoot=function(t,i,a){if(!o(t))throw Error(s(299));var l=!1,h="",d=Ig,v=Cg,E=xg,w=null,j=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(d=a.onUncaughtError),a.onCaughtError!==void 0&&(v=a.onCaughtError),a.onRecoverableError!==void 0&&(E=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(w=a.unstable_transitionCallbacks),a.formState!==void 0&&(j=a.formState)),i=t_(t,1,!0,i,a??null,l,h,d,v,E,w,j),i.context=n_(null),a=i.current,l=dn(),l=Gi(l),h=Ji(l),h.callback=null,er(a,h,l),a=l,i.current.lanes=a,fi(i,a),ni(i),t[yn]=i.current,ed(t),new hc(i)},cl.version="19.1.0",cl}var T_;function rS(){if(T_)return Td.exports;T_=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Td.exports=iS(),Td.exports}var sS=rS();const aS=Jv(sS),oS=()=>{};var A_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e0=function(r){const e=[];let n=0;for(let s=0;s<r.length;s++){let o=r.charCodeAt(s);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++s)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},lS=function(r){const e=[];let n=0,s=0;for(;n<r.length;){const o=r[n++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const u=r[n++];e[s++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=r[n++],f=r[n++],p=r[n++],g=((o&7)<<18|(u&63)<<12|(f&63)<<6|p&63)-65536;e[s++]=String.fromCharCode(55296+(g>>10)),e[s++]=String.fromCharCode(56320+(g&1023))}else{const u=r[n++],f=r[n++];e[s++]=String.fromCharCode((o&15)<<12|(u&63)<<6|f&63)}}return e.join("")},t0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<r.length;o+=3){const u=r[o],f=o+1<r.length,p=f?r[o+1]:0,g=o+2<r.length,y=g?r[o+2]:0,T=u>>2,I=(u&3)<<4|p>>4;let x=(p&15)<<2|y>>6,G=y&63;g||(G=64,f||(x=64)),s.push(n[T],n[I],n[x],n[G])}return s.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(e0(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):lS(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<r.length;){const u=n[r.charAt(o++)],p=o<r.length?n[r.charAt(o)]:0;++o;const y=o<r.length?n[r.charAt(o)]:64;++o;const I=o<r.length?n[r.charAt(o)]:64;if(++o,u==null||p==null||y==null||I==null)throw new uS;const x=u<<2|p>>4;if(s.push(x),y!==64){const G=p<<4&240|y>>2;if(s.push(G),I!==64){const Z=y<<6&192|I;s.push(Z)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class uS extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const cS=function(r){const e=e0(r);return t0.encodeByteArray(e,!0)},Nc=function(r){return cS(r).replace(/\./g,"")},n0=function(r){try{return t0.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fS=()=>hS().__FIREBASE_DEFAULTS__,dS=()=>{if(typeof process>"u"||typeof A_>"u")return;const r=A_.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},mS=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&n0(r[1]);return e&&JSON.parse(e)},$c=()=>{try{return oS()||fS()||dS()||mS()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},i0=r=>{var e,n;return(n=(e=$c())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[r]},pS=r=>{const e=i0(r);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},r0=()=>{var r;return(r=$c())===null||r===void 0?void 0:r.config},s0=r=>{var e;return(e=$c())===null||e===void 0?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gS{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ol(r){return r.endsWith(".cloudworkstations.dev")}async function a0(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yS(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",o=r.iat||0,u=r.sub||r.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}}},r);return[Nc(JSON.stringify(n)),Nc(JSON.stringify(f)),""].join(".")}const gl={};function _S(){const r={prod:[],emulator:[]};for(const e of Object.keys(gl))gl[e]?r.emulator.push(e):r.prod.push(e);return r}function vS(r){let e=document.getElementById(r),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),n=!0),{created:n,element:e}}let S_=!1;function o0(r,e){if(typeof window>"u"||typeof document>"u"||!Ol(window.location.host)||gl[r]===e||gl[r]||S_)return;gl[r]=e;function n(x){return`__firebase__banner__${x}`}const s="__firebase__banner",u=_S().prod.length>0;function f(){const x=document.getElementById(s);x&&x.remove()}function p(x){x.style.display="flex",x.style.background="#7faaf0",x.style.position="fixed",x.style.bottom="5px",x.style.left="5px",x.style.padding=".5em",x.style.borderRadius="5px",x.style.alignItems="center"}function g(x,G){x.setAttribute("width","24"),x.setAttribute("id",G),x.setAttribute("height","24"),x.setAttribute("viewBox","0 0 24 24"),x.setAttribute("fill","none"),x.style.marginLeft="-6px"}function y(){const x=document.createElement("span");return x.style.cursor="pointer",x.style.marginLeft="16px",x.style.fontSize="24px",x.innerHTML=" &times;",x.onclick=()=>{S_=!0,f()},x}function T(x,G){x.setAttribute("id",G),x.innerText="Learn more",x.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",x.setAttribute("target","__blank"),x.style.paddingLeft="5px",x.style.textDecoration="underline"}function I(){const x=vS(s),G=n("text"),Z=document.getElementById(G)||document.createElement("span"),F=n("learnmore"),q=document.getElementById(F)||document.createElement("a"),re=n("preprendIcon"),se=document.getElementById(re)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(x.created){const le=x.element;p(le),T(q,F);const Oe=y();g(se,re),le.append(se,Z,q,Oe),document.body.appendChild(le)}u?(Z.innerText="Preview backend disconnected.",se.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(se.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,Z.innerText="Preview backend running in this workspace."),Z.setAttribute("id",G)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",I):I()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function ES(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Xt())}function TS(){var r;const e=(r=$c())===null||r===void 0?void 0:r.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function AS(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function SS(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function bS(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function wS(){const r=Xt();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function RS(){return!TS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function IS(){try{return typeof indexedDB=="object"}catch{return!1}}function CS(){return new Promise((r,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(s),r(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{var u;e(((u=o.error)===null||u===void 0?void 0:u.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xS="FirebaseError";class qi extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=xS,Object.setPrototypeOf(this,qi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ml.prototype.create)}}class Ml{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},o=`${this.service}/${e}`,u=this.errors[e],f=u?NS(u,s):"Error",p=`${this.serviceName}: ${f} (${o}).`;return new qi(o,p,s)}}function NS(r,e){return r.replace(DS,(n,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const DS=/\{\$([^}]+)}/g;function OS(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function ws(r,e){if(r===e)return!0;const n=Object.keys(r),s=Object.keys(e);for(const o of n){if(!s.includes(o))return!1;const u=r[o],f=e[o];if(b_(u)&&b_(f)){if(!ws(u,f))return!1}else if(u!==f)return!1}for(const o of s)if(!n.includes(o))return!1;return!0}function b_(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vl(r){const e=[];for(const[n,s]of Object.entries(r))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function hl(r){const e={};return r.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[o,u]=s.split("=");e[decodeURIComponent(o)]=decodeURIComponent(u)}}),e}function fl(r){const e=r.indexOf("?");if(!e)return"";const n=r.indexOf("#",e);return r.substring(e,n>0?n:void 0)}function MS(r,e){const n=new VS(r,e);return n.subscribe.bind(n)}class VS{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let o;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");PS(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:s},o.next===void 0&&(o.next=wd),o.error===void 0&&(o.error=wd),o.complete===void 0&&(o.complete=wd);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function PS(r,e){if(typeof r!="object"||r===null)return!1;for(const n of e)if(n in r&&typeof r[n]=="function")return!0;return!1}function wd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bt(r){return r&&r._delegate?r._delegate:r}class Rs{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ss="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class US{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new gS;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const s=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(u){if(o)return null;throw u}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(kS(e))try{this.getOrInitializeService({instanceIdentifier:Ss})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:o});s.resolve(u)}catch{}}}}clearInstance(e=Ss){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ss){return this.instances.has(e)}getOptions(e=Ss){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[u,f]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(u);s===p&&f.resolve(o)}return o}onInit(e,n){var s;const o=this.normalizeInstanceIdentifier(n),u=(s=this.onInitCallbacks.get(o))!==null&&s!==void 0?s:new Set;u.add(e),this.onInitCallbacks.set(o,u);const f=this.instances.get(o);return f&&e(f,o),()=>{u.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const o of s)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:LS(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Ss){return this.component?this.component.multipleInstances?e:Ss:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function LS(r){return r===Ss?void 0:r}function kS(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jS{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new US(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ne;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Ne||(Ne={}));const zS={debug:Ne.DEBUG,verbose:Ne.VERBOSE,info:Ne.INFO,warn:Ne.WARN,error:Ne.ERROR,silent:Ne.SILENT},BS=Ne.INFO,qS={[Ne.DEBUG]:"log",[Ne.VERBOSE]:"log",[Ne.INFO]:"info",[Ne.WARN]:"warn",[Ne.ERROR]:"error"},HS=(r,e,...n)=>{if(e<r.logLevel)return;const s=new Date().toISOString(),o=qS[e];if(o)console[o](`[${s}]  ${r.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class cm{constructor(e){this.name=e,this._logLevel=BS,this._logHandler=HS,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ne))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?zS[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ne.DEBUG,...e),this._logHandler(this,Ne.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ne.VERBOSE,...e),this._logHandler(this,Ne.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ne.INFO,...e),this._logHandler(this,Ne.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ne.WARN,...e),this._logHandler(this,Ne.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ne.ERROR,...e),this._logHandler(this,Ne.ERROR,...e)}}const GS=(r,e)=>e.some(n=>r instanceof n);let w_,R_;function FS(){return w_||(w_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function QS(){return R_||(R_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const l0=new WeakMap,Ud=new WeakMap,u0=new WeakMap,Rd=new WeakMap,hm=new WeakMap;function KS(r){const e=new Promise((n,s)=>{const o=()=>{r.removeEventListener("success",u),r.removeEventListener("error",f)},u=()=>{n(br(r.result)),o()},f=()=>{s(r.error),o()};r.addEventListener("success",u),r.addEventListener("error",f)});return e.then(n=>{n instanceof IDBCursor&&l0.set(n,r)}).catch(()=>{}),hm.set(e,r),e}function YS(r){if(Ud.has(r))return;const e=new Promise((n,s)=>{const o=()=>{r.removeEventListener("complete",u),r.removeEventListener("error",f),r.removeEventListener("abort",f)},u=()=>{n(),o()},f=()=>{s(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",u),r.addEventListener("error",f),r.addEventListener("abort",f)});Ud.set(r,e)}let Ld={get(r,e,n){if(r instanceof IDBTransaction){if(e==="done")return Ud.get(r);if(e==="objectStoreNames")return r.objectStoreNames||u0.get(r);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return br(r[e])},set(r,e,n){return r[e]=n,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function XS(r){Ld=r(Ld)}function $S(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=r.call(Id(this),e,...n);return u0.set(s,e.sort?e.sort():[e]),br(s)}:QS().includes(r)?function(...e){return r.apply(Id(this),e),br(l0.get(this))}:function(...e){return br(r.apply(Id(this),e))}}function ZS(r){return typeof r=="function"?$S(r):(r instanceof IDBTransaction&&YS(r),GS(r,FS())?new Proxy(r,Ld):r)}function br(r){if(r instanceof IDBRequest)return KS(r);if(Rd.has(r))return Rd.get(r);const e=ZS(r);return e!==r&&(Rd.set(r,e),hm.set(e,r)),e}const Id=r=>hm.get(r);function WS(r,e,{blocked:n,upgrade:s,blocking:o,terminated:u}={}){const f=indexedDB.open(r,e),p=br(f);return s&&f.addEventListener("upgradeneeded",g=>{s(br(f.result),g.oldVersion,g.newVersion,br(f.transaction),g)}),n&&f.addEventListener("blocked",g=>n(g.oldVersion,g.newVersion,g)),p.then(g=>{u&&g.addEventListener("close",()=>u()),o&&g.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),p}const JS=["get","getKey","getAll","getAllKeys","count"],e1=["put","add","delete","clear"],Cd=new Map;function I_(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(Cd.get(e))return Cd.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,o=e1.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(o||JS.includes(n)))return;const u=async function(f,...p){const g=this.transaction(f,o?"readwrite":"readonly");let y=g.store;return s&&(y=y.index(p.shift())),(await Promise.all([y[n](...p),o&&g.done]))[0]};return Cd.set(e,u),u}XS(r=>({...r,get:(e,n,s)=>I_(e,n)||r.get(e,n,s),has:(e,n)=>!!I_(e,n)||r.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t1{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(n1(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function n1(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const kd="@firebase/app",C_="0.13.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ki=new cm("@firebase/app"),i1="@firebase/app-compat",r1="@firebase/analytics-compat",s1="@firebase/analytics",a1="@firebase/app-check-compat",o1="@firebase/app-check",l1="@firebase/auth",u1="@firebase/auth-compat",c1="@firebase/database",h1="@firebase/data-connect",f1="@firebase/database-compat",d1="@firebase/functions",m1="@firebase/functions-compat",p1="@firebase/installations",g1="@firebase/installations-compat",y1="@firebase/messaging",_1="@firebase/messaging-compat",v1="@firebase/performance",E1="@firebase/performance-compat",T1="@firebase/remote-config",A1="@firebase/remote-config-compat",S1="@firebase/storage",b1="@firebase/storage-compat",w1="@firebase/firestore",R1="@firebase/ai",I1="@firebase/firestore-compat",C1="firebase",x1="11.8.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jd="[DEFAULT]",N1={[kd]:"fire-core",[i1]:"fire-core-compat",[s1]:"fire-analytics",[r1]:"fire-analytics-compat",[o1]:"fire-app-check",[a1]:"fire-app-check-compat",[l1]:"fire-auth",[u1]:"fire-auth-compat",[c1]:"fire-rtdb",[h1]:"fire-data-connect",[f1]:"fire-rtdb-compat",[d1]:"fire-fn",[m1]:"fire-fn-compat",[p1]:"fire-iid",[g1]:"fire-iid-compat",[y1]:"fire-fcm",[_1]:"fire-fcm-compat",[v1]:"fire-perf",[E1]:"fire-perf-compat",[T1]:"fire-rc",[A1]:"fire-rc-compat",[S1]:"fire-gcs",[b1]:"fire-gcs-compat",[w1]:"fire-fst",[I1]:"fire-fst-compat",[R1]:"fire-vertex","fire-js":"fire-js",[C1]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dc=new Map,D1=new Map,zd=new Map;function x_(r,e){try{r.container.addComponent(e)}catch(n){ki.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,n)}}function ka(r){const e=r.name;if(zd.has(e))return ki.debug(`There were multiple attempts to register component ${e}.`),!1;zd.set(e,r);for(const n of Dc.values())x_(n,r);for(const n of D1.values())x_(n,r);return!0}function fm(r,e){const n=r.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),r.container.getProvider(e)}function Un(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O1={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},wr=new Ml("app","Firebase",O1);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M1{constructor(e,n,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Rs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw wr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ka=x1;function c0(r,e={}){let n=r;typeof e!="object"&&(e={name:e});const s=Object.assign({name:jd,automaticDataCollectionEnabled:!0},e),o=s.name;if(typeof o!="string"||!o)throw wr.create("bad-app-name",{appName:String(o)});if(n||(n=r0()),!n)throw wr.create("no-options");const u=Dc.get(o);if(u){if(ws(n,u.options)&&ws(s,u.config))return u;throw wr.create("duplicate-app",{appName:o})}const f=new jS(o);for(const g of zd.values())f.addComponent(g);const p=new M1(n,s,f);return Dc.set(o,p),p}function h0(r=jd){const e=Dc.get(r);if(!e&&r===jd&&r0())return c0();if(!e)throw wr.create("no-app",{appName:r});return e}function Rr(r,e,n){var s;let o=(s=N1[r])!==null&&s!==void 0?s:r;n&&(o+=`-${n}`);const u=o.match(/\s|\//),f=e.match(/\s|\//);if(u||f){const p=[`Unable to register library "${o}" with version "${e}":`];u&&p.push(`library name "${o}" contains illegal characters (whitespace or "/")`),u&&f&&p.push("and"),f&&p.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ki.warn(p.join(" "));return}ka(new Rs(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V1="firebase-heartbeat-database",P1=1,Sl="firebase-heartbeat-store";let xd=null;function f0(){return xd||(xd=WS(V1,P1,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(Sl)}catch(n){console.warn(n)}}}}).catch(r=>{throw wr.create("idb-open",{originalErrorMessage:r.message})})),xd}async function U1(r){try{const n=(await f0()).transaction(Sl),s=await n.objectStore(Sl).get(d0(r));return await n.done,s}catch(e){if(e instanceof qi)ki.warn(e.message);else{const n=wr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ki.warn(n.message)}}}async function N_(r,e){try{const s=(await f0()).transaction(Sl,"readwrite");await s.objectStore(Sl).put(e,d0(r)),await s.done}catch(n){if(n instanceof qi)ki.warn(n.message);else{const s=wr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ki.warn(s.message)}}}function d0(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L1=1024,k1=30;class j1{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new B1(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,n;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),u=D_();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===u||this._heartbeatsCache.heartbeats.some(f=>f.date===u))return;if(this._heartbeatsCache.heartbeats.push({date:u,agent:o}),this._heartbeatsCache.heartbeats.length>k1){const f=q1(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(f,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){ki.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=D_(),{heartbeatsToSend:s,unsentEntries:o}=z1(this._heartbeatsCache.heartbeats),u=Nc(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=n,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),u}catch(n){return ki.warn(n),""}}}function D_(){return new Date().toISOString().substring(0,10)}function z1(r,e=L1){const n=[];let s=r.slice();for(const o of r){const u=n.find(f=>f.agent===o.agent);if(u){if(u.dates.push(o.date),O_(n)>e){u.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),O_(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class B1{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return IS()?CS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await U1(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return N_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return N_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function O_(r){return Nc(JSON.stringify({version:2,heartbeats:r})).length}function q1(r){if(r.length===0)return-1;let e=0,n=r[0].date;for(let s=1;s<r.length;s++)r[s].date<n&&(n=r[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H1(r){ka(new Rs("platform-logger",e=>new t1(e),"PRIVATE")),ka(new Rs("heartbeat",e=>new j1(e),"PRIVATE")),Rr(kd,C_,r),Rr(kd,C_,"esm2017"),Rr("fire-js","")}H1("");function dm(r,e){var n={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&e.indexOf(s)<0&&(n[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(r);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(r,s[o])&&(n[s[o]]=r[s[o]]);return n}function m0(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const G1=m0,p0=new Ml("auth","Firebase",m0());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oc=new cm("@firebase/auth");function F1(r,...e){Oc.logLevel<=Ne.WARN&&Oc.warn(`Auth (${Ka}): ${r}`,...e)}function Ec(r,...e){Oc.logLevel<=Ne.ERROR&&Oc.error(`Auth (${Ka}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jn(r,...e){throw mm(r,...e)}function ri(r,...e){return mm(r,...e)}function g0(r,e,n){const s=Object.assign(Object.assign({},G1()),{[e]:n});return new Ml("auth","Firebase",s).create(e,{appName:r.name})}function Ir(r){return g0(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function mm(r,...e){if(typeof r!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=r.name),r._errorFactory.create(n,...s)}return p0.create(r,...e)}function ge(r,e,...n){if(!r)throw mm(e,...n)}function Ui(r){const e="INTERNAL ASSERTION FAILED: "+r;throw Ec(e),new Error(e)}function ji(r,e){r||Ui(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bd(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.href)||""}function Q1(){return M_()==="http:"||M_()==="https:"}function M_(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K1(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Q1()||SS()||"connection"in navigator)?navigator.onLine:!0}function Y1(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pl{constructor(e,n){this.shortDelay=e,this.longDelay=n,ji(n>e,"Short delay should be less than long delay!"),this.isMobile=ES()||bS()}get(){return K1()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pm(r,e){ji(r.emulator,"Emulator should always be set here");const{url:n}=r.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y0{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ui("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ui("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ui("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X1={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $1=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Z1=new Pl(3e4,6e4);function Ds(r,e){return r.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:r.tenantId}):e}async function Lr(r,e,n,s,o={}){return _0(r,o,async()=>{let u={},f={};s&&(e==="GET"?f=s:u={body:JSON.stringify(s)});const p=Vl(Object.assign({key:r.config.apiKey},f)).slice(1),g=await r._getAdditionalHeaders();g["Content-Type"]="application/json",r.languageCode&&(g["X-Firebase-Locale"]=r.languageCode);const y=Object.assign({method:e,headers:g},u);return AS()||(y.referrerPolicy="no-referrer"),r.emulatorConfig&&Ol(r.emulatorConfig.host)&&(y.credentials="include"),y0.fetch()(await v0(r,r.config.apiHost,n,p),y)})}async function _0(r,e,n){r._canInitEmulator=!1;const s=Object.assign(Object.assign({},X1),e);try{const o=new J1(r),u=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const f=await u.json();if("needConfirmation"in f)throw dc(r,"account-exists-with-different-credential",f);if(u.ok&&!("errorMessage"in f))return f;{const p=u.ok?f.errorMessage:f.error.message,[g,y]=p.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw dc(r,"credential-already-in-use",f);if(g==="EMAIL_EXISTS")throw dc(r,"email-already-in-use",f);if(g==="USER_DISABLED")throw dc(r,"user-disabled",f);const T=s[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw g0(r,T,y);jn(r,T)}}catch(o){if(o instanceof qi)throw o;jn(r,"network-request-failed",{message:String(o)})}}async function Zc(r,e,n,s,o={}){const u=await Lr(r,e,n,s,o);return"mfaPendingCredential"in u&&jn(r,"multi-factor-auth-required",{_serverResponse:u}),u}async function v0(r,e,n,s){const o=`${e}${n}?${s}`,u=r,f=u.config.emulator?pm(r.config,o):`${r.config.apiScheme}://${o}`;return $1.includes(n)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(f).toString():f}function W1(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class J1{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(ri(this.auth,"network-request-failed")),Z1.get())})}}function dc(r,e,n){const s={appName:r.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const o=ri(r,e,s);return o.customData._tokenResponse=n,o}function V_(r){return r!==void 0&&r.enterprise!==void 0}class eb{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return W1(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function tb(r,e){return Lr(r,"GET","/v2/recaptchaConfig",Ds(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nb(r,e){return Lr(r,"POST","/v1/accounts:delete",e)}async function Mc(r,e){return Lr(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yl(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function ib(r,e=!1){const n=Bt(r),s=await n.getIdToken(e),o=gm(s);ge(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,f=u==null?void 0:u.sign_in_provider;return{claims:o,token:s,authTime:yl(Nd(o.auth_time)),issuedAtTime:yl(Nd(o.iat)),expirationTime:yl(Nd(o.exp)),signInProvider:f||null,signInSecondFactor:(u==null?void 0:u.sign_in_second_factor)||null}}function Nd(r){return Number(r)*1e3}function gm(r){const[e,n,s]=r.split(".");if(e===void 0||n===void 0||s===void 0)return Ec("JWT malformed, contained fewer than 3 sections"),null;try{const o=n0(n);return o?JSON.parse(o):(Ec("Failed to decode base64 JWT payload"),null)}catch(o){return Ec("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function P_(r){const e=gm(r);return ge(e,"internal-error"),ge(typeof e.exp<"u","internal-error"),ge(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bl(r,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof qi&&rb(s)&&r.auth.currentUser===r&&await r.auth.signOut(),s}}function rb({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sb{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const o=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qd{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=yl(this.lastLoginAt),this.creationTime=yl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vc(r){var e;const n=r.auth,s=await r.getIdToken(),o=await bl(r,Mc(n,{idToken:s}));ge(o==null?void 0:o.users.length,n,"internal-error");const u=o.users[0];r._notifyReloadListener(u);const f=!((e=u.providerUserInfo)===null||e===void 0)&&e.length?E0(u.providerUserInfo):[],p=ob(r.providerData,f),g=r.isAnonymous,y=!(r.email&&u.passwordHash)&&!(p!=null&&p.length),T=g?y:!1,I={uid:u.localId,displayName:u.displayName||null,photoURL:u.photoUrl||null,email:u.email||null,emailVerified:u.emailVerified||!1,phoneNumber:u.phoneNumber||null,tenantId:u.tenantId||null,providerData:p,metadata:new qd(u.createdAt,u.lastLoginAt),isAnonymous:T};Object.assign(r,I)}async function ab(r){const e=Bt(r);await Vc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function ob(r,e){return[...r.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function E0(r){return r.map(e=>{var{providerId:n}=e,s=dm(e,["providerId"]);return{providerId:n,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lb(r,e){const n=await _0(r,{},async()=>{const s=Vl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:u}=r.config,f=await v0(r,o,"/v1/token",`key=${u}`),p=await r._getAdditionalHeaders();return p["Content-Type"]="application/x-www-form-urlencoded",y0.fetch()(f,{method:"POST",headers:p,body:s})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function ub(r,e){return Lr(r,"POST","/v2/accounts:revokeToken",Ds(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ma{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ge(e.idToken,"internal-error"),ge(typeof e.idToken<"u","internal-error"),ge(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):P_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ge(e.length!==0,"internal-error");const n=P_(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ge(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:o,expiresIn:u}=await lb(e,n);this.updateTokensAndExpiration(s,o,Number(u))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:o,expirationTime:u}=n,f=new Ma;return s&&(ge(typeof s=="string","internal-error",{appName:e}),f.refreshToken=s),o&&(ge(typeof o=="string","internal-error",{appName:e}),f.accessToken=o),u&&(ge(typeof u=="number","internal-error",{appName:e}),f.expirationTime=u),f}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ma,this.toJSON())}_performRefresh(){return Ui("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _r(r,e){ge(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class Ln{constructor(e){var{uid:n,auth:s,stsTokenManager:o}=e,u=dm(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new sb(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=s,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=u.displayName||null,this.email=u.email||null,this.emailVerified=u.emailVerified||!1,this.phoneNumber=u.phoneNumber||null,this.photoURL=u.photoURL||null,this.isAnonymous=u.isAnonymous||!1,this.tenantId=u.tenantId||null,this.providerData=u.providerData?[...u.providerData]:[],this.metadata=new qd(u.createdAt||void 0,u.lastLoginAt||void 0)}async getIdToken(e){const n=await bl(this,this.stsTokenManager.getToken(this.auth,e));return ge(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return ib(this,e)}reload(){return ab(this)}_assign(e){this!==e&&(ge(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Ln(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ge(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await Vc(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Un(this.auth.app))return Promise.reject(Ir(this.auth));const e=await this.getIdToken();return await bl(this,nb(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var s,o,u,f,p,g,y,T;const I=(s=n.displayName)!==null&&s!==void 0?s:void 0,x=(o=n.email)!==null&&o!==void 0?o:void 0,G=(u=n.phoneNumber)!==null&&u!==void 0?u:void 0,Z=(f=n.photoURL)!==null&&f!==void 0?f:void 0,F=(p=n.tenantId)!==null&&p!==void 0?p:void 0,q=(g=n._redirectEventId)!==null&&g!==void 0?g:void 0,re=(y=n.createdAt)!==null&&y!==void 0?y:void 0,se=(T=n.lastLoginAt)!==null&&T!==void 0?T:void 0,{uid:le,emailVerified:Oe,isAnonymous:Ee,providerData:Me,stsTokenManager:M}=n;ge(le&&M,e,"internal-error");const b=Ma.fromJSON(this.name,M);ge(typeof le=="string",e,"internal-error"),_r(I,e.name),_r(x,e.name),ge(typeof Oe=="boolean",e,"internal-error"),ge(typeof Ee=="boolean",e,"internal-error"),_r(G,e.name),_r(Z,e.name),_r(F,e.name),_r(q,e.name),_r(re,e.name),_r(se,e.name);const R=new Ln({uid:le,auth:e,email:x,emailVerified:Oe,displayName:I,isAnonymous:Ee,photoURL:Z,phoneNumber:G,tenantId:F,stsTokenManager:b,createdAt:re,lastLoginAt:se});return Me&&Array.isArray(Me)&&(R.providerData=Me.map(O=>Object.assign({},O))),q&&(R._redirectEventId=q),R}static async _fromIdTokenResponse(e,n,s=!1){const o=new Ma;o.updateFromServerResponse(n);const u=new Ln({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await Vc(u),u}static async _fromGetAccountInfoResponse(e,n,s){const o=n.users[0];ge(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?E0(o.providerUserInfo):[],f=!(o.email&&o.passwordHash)&&!(u!=null&&u.length),p=new Ma;p.updateFromIdToken(s);const g=new Ln({uid:o.localId,auth:e,stsTokenManager:p,isAnonymous:f}),y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new qd(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(u!=null&&u.length)};return Object.assign(g,y),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U_=new Map;function Li(r){ji(r instanceof Function,"Expected a class definition");let e=U_.get(r);return e?(ji(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,U_.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T0{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}T0.type="NONE";const L_=T0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tc(r,e,n){return`firebase:${r}:${e}:${n}`}class Va{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:o,name:u}=this.auth;this.fullUserKey=Tc(this.userKey,o.apiKey,u),this.fullPersistenceKey=Tc("persistence",o.apiKey,u),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Mc(this.auth,{idToken:e}).catch(()=>{});return n?Ln._fromGetAccountInfoResponse(this.auth,n,e):null}return Ln._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new Va(Li(L_),e,s);const o=(await Promise.all(n.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let u=o[0]||Li(L_);const f=Tc(s,e.config.apiKey,e.name);let p=null;for(const y of n)try{const T=await y._get(f);if(T){let I;if(typeof T=="string"){const x=await Mc(e,{idToken:T}).catch(()=>{});if(!x)break;I=await Ln._fromGetAccountInfoResponse(e,x,T)}else I=Ln._fromJSON(e,T);y!==u&&(p=I),u=y;break}}catch{}const g=o.filter(y=>y._shouldAllowMigration);return!u._shouldAllowMigration||!g.length?new Va(u,e,s):(u=g[0],p&&await u._set(f,p.toJSON()),await Promise.all(n.map(async y=>{if(y!==u)try{await y._remove(f)}catch{}})),new Va(u,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k_(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(w0(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(A0(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(I0(e))return"Blackberry";if(C0(e))return"Webos";if(S0(e))return"Safari";if((e.includes("chrome/")||b0(e))&&!e.includes("edge/"))return"Chrome";if(R0(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=r.match(n);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function A0(r=Xt()){return/firefox\//i.test(r)}function S0(r=Xt()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function b0(r=Xt()){return/crios\//i.test(r)}function w0(r=Xt()){return/iemobile/i.test(r)}function R0(r=Xt()){return/android/i.test(r)}function I0(r=Xt()){return/blackberry/i.test(r)}function C0(r=Xt()){return/webos/i.test(r)}function ym(r=Xt()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function cb(r=Xt()){var e;return ym(r)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function hb(){return wS()&&document.documentMode===10}function x0(r=Xt()){return ym(r)||R0(r)||C0(r)||I0(r)||/windows phone/i.test(r)||w0(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N0(r,e=[]){let n;switch(r){case"Browser":n=k_(Xt());break;case"Worker":n=`${k_(Xt())}-${r}`;break;default:n=r}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ka}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fb{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=u=>new Promise((f,p)=>{try{const g=e(u);f(g)}catch(g){p(g)}});s.onAbort=n,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function db(r,e={}){return Lr(r,"GET","/v2/passwordPolicy",Ds(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mb=6;class pb{constructor(e){var n,s,o,u;const f=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=f.minPasswordLength)!==null&&n!==void 0?n:mb,f.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=f.maxPasswordLength),f.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=f.containsLowercaseCharacter),f.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=f.containsUppercaseCharacter),f.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=f.containsNumericCharacter),f.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=f.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(s=e.allowedNonAlphanumericCharacters)===null||s===void 0?void 0:s.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(u=e.forceUpgradeOnSignin)!==null&&u!==void 0?u:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,s,o,u,f,p;const g={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,g),this.validatePasswordCharacterOptions(e,g),g.isValid&&(g.isValid=(n=g.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),g.isValid&&(g.isValid=(s=g.meetsMaxPasswordLength)!==null&&s!==void 0?s:!0),g.isValid&&(g.isValid=(o=g.containsLowercaseLetter)!==null&&o!==void 0?o:!0),g.isValid&&(g.isValid=(u=g.containsUppercaseLetter)!==null&&u!==void 0?u:!0),g.isValid&&(g.isValid=(f=g.containsNumericCharacter)!==null&&f!==void 0?f:!0),g.isValid&&(g.isValid=(p=g.containsNonAlphanumericCharacter)!==null&&p!==void 0?p:!0),g}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,o,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gb{constructor(e,n,s,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new j_(this),this.idTokenSubscription=new j_(this),this.beforeStateQueue=new fb(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=p0,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Li(n)),this._initializationPromise=this.queue(async()=>{var s,o,u;if(!this._deleted&&(this.persistenceManager=await Va.create(this,e),(s=this._resolvePersistenceManagerAvailable)===null||s===void 0||s.call(this),!this._deleted)){if(!((o=this._popupRedirectResolver)===null||o===void 0)&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((u=this.currentUser)===null||u===void 0?void 0:u.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Mc(this,{idToken:e}),s=await Ln._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Un(this.app)){const f=this.app.settings.authIdToken;return f?new Promise(p=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(f).then(p,p))}):this.directlySetCurrentUser(null)}const s=await this.assertedPersistence.getCurrentUser();let o=s,u=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const f=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,p=o==null?void 0:o._redirectEventId,g=await this.tryRedirectSignIn(e);(!f||f===p)&&(g!=null&&g.user)&&(o=g.user,u=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(u)try{await this.beforeStateQueue.runMiddleware(o)}catch(f){o=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(f))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return ge(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Vc(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Y1()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Un(this.app))return Promise.reject(Ir(this));const n=e?Bt(e):null;return n&&ge(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ge(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Un(this.app)?Promise.reject(Ir(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Un(this.app)?Promise.reject(Ir(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Li(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await db(this),n=new pb(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ml("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await ub(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Li(e)||this._popupRedirectResolver;ge(n,this,"argument-error"),this.redirectPersistenceManager=await Va.create(this,[Li(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,s;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const s=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==s&&(this.lastNotifiedUid=s,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,o){if(this._deleted)return()=>{};const u=typeof n=="function"?n:n.next.bind(n);let f=!1;const p=this._isInitialized?Promise.resolve():this._initializationPromise;if(ge(p,this,"internal-error"),p.then(()=>{f||u(this.currentUser)}),typeof n=="function"){const g=e.addObserver(n,s,o);return()=>{f=!0,g()}}else{const g=e.addObserver(n);return()=>{f=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ge(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=N0(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const s=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());s&&(n["X-Firebase-Client"]=s);const o=await this._getAppCheckToken();return o&&(n["X-Firebase-AppCheck"]=o),n}async _getAppCheckToken(){var e;if(Un(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&F1(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Ya(r){return Bt(r)}class j_{constructor(e){this.auth=e,this.observer=null,this.addObserver=MS(n=>this.observer=n)}get next(){return ge(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wc={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function yb(r){Wc=r}function D0(r){return Wc.loadJS(r)}function _b(){return Wc.recaptchaEnterpriseScript}function vb(){return Wc.gapiScript}function Eb(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class Tb{constructor(){this.enterprise=new Ab}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class Ab{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const Sb="recaptcha-enterprise",O0="NO_RECAPTCHA";class bb{constructor(e){this.type=Sb,this.auth=Ya(e)}async verify(e="verify",n=!1){async function s(u){if(!n){if(u.tenantId==null&&u._agentRecaptchaConfig!=null)return u._agentRecaptchaConfig.siteKey;if(u.tenantId!=null&&u._tenantRecaptchaConfigs[u.tenantId]!==void 0)return u._tenantRecaptchaConfigs[u.tenantId].siteKey}return new Promise(async(f,p)=>{tb(u,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)p(new Error("recaptcha Enterprise site key undefined"));else{const y=new eb(g);return u.tenantId==null?u._agentRecaptchaConfig=y:u._tenantRecaptchaConfigs[u.tenantId]=y,f(y.siteKey)}}).catch(g=>{p(g)})})}function o(u,f,p){const g=window.grecaptcha;V_(g)?g.enterprise.ready(()=>{g.enterprise.execute(u,{action:e}).then(y=>{f(y)}).catch(()=>{f(O0)})}):p(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Tb().execute("siteKey",{action:"verify"}):new Promise((u,f)=>{s(this.auth).then(p=>{if(!n&&V_(window.grecaptcha))o(p,u,f);else{if(typeof window>"u"){f(new Error("RecaptchaVerifier is only supported in browser"));return}let g=_b();g.length!==0&&(g+=p),D0(g).then(()=>{o(p,u,f)}).catch(y=>{f(y)})}}).catch(p=>{f(p)})})}}async function z_(r,e,n,s=!1,o=!1){const u=new bb(r);let f;if(o)f=O0;else try{f=await u.verify(n)}catch{f=await u.verify(n,!0)}const p=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in p){const g=p.phoneEnrollmentInfo.phoneNumber,y=p.phoneEnrollmentInfo.recaptchaToken;Object.assign(p,{phoneEnrollmentInfo:{phoneNumber:g,recaptchaToken:y,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in p){const g=p.phoneSignInInfo.recaptchaToken;Object.assign(p,{phoneSignInInfo:{recaptchaToken:g,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return p}return s?Object.assign(p,{captchaResp:f}):Object.assign(p,{captchaResponse:f}),Object.assign(p,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(p,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),p}async function B_(r,e,n,s,o){var u;if(!((u=r._getRecaptchaConfig())===null||u===void 0)&&u.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const f=await z_(r,e,n,n==="getOobCode");return s(r,f)}else return s(r,e).catch(async f=>{if(f.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const p=await z_(r,e,n,n==="getOobCode");return s(r,p)}else return Promise.reject(f)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wb(r,e){const n=fm(r,"auth");if(n.isInitialized()){const o=n.getImmediate(),u=n.getOptions();if(ws(u,e??{}))return o;jn(o,"already-initialized")}return n.initialize({options:e})}function Rb(r,e){const n=(e==null?void 0:e.persistence)||[],s=(Array.isArray(n)?n:[n]).map(Li);e!=null&&e.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function Ib(r,e,n){const s=Ya(r);ge(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,u=M0(e),{host:f,port:p}=Cb(e),g=p===null?"":`:${p}`,y={url:`${u}//${f}${g}/`},T=Object.freeze({host:f,port:p,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){ge(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),ge(ws(y,s.config.emulator)&&ws(T,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=y,s.emulatorConfig=T,s.settings.appVerificationDisabledForTesting=!0,Ol(f)?(a0(`${u}//${f}${g}`),o0("Auth",!0)):xb()}function M0(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function Cb(r){const e=M0(r),n=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const u=o[1];return{host:u,port:q_(s.substr(u.length+1))}}else{const[u,f]=s.split(":");return{host:u,port:q_(f)}}}function q_(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function xb(){function r(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _m{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Ui("not implemented")}_getIdTokenResponse(e){return Ui("not implemented")}_linkToIdToken(e,n){return Ui("not implemented")}_getReauthenticationResolver(e){return Ui("not implemented")}}async function Nb(r,e){return Lr(r,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Db(r,e){return Zc(r,"POST","/v1/accounts:signInWithPassword",Ds(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ob(r,e){return Zc(r,"POST","/v1/accounts:signInWithEmailLink",Ds(r,e))}async function Mb(r,e){return Zc(r,"POST","/v1/accounts:signInWithEmailLink",Ds(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wl extends _m{constructor(e,n,s,o=null){super("password",s),this._email=e,this._password=n,this._tenantId=o}static _fromEmailAndPassword(e,n){return new wl(e,n,"password")}static _fromEmailAndCode(e,n,s=null){return new wl(e,n,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return B_(e,n,"signInWithPassword",Db);case"emailLink":return Ob(e,{email:this._email,oobCode:this._password});default:jn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const s={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return B_(e,s,"signUpPassword",Nb);case"emailLink":return Mb(e,{idToken:n,email:this._email,oobCode:this._password});default:jn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pa(r,e){return Zc(r,"POST","/v1/accounts:signInWithIdp",Ds(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vb="http://localhost";class Is extends _m{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Is(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):jn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o}=n,u=dm(n,["providerId","signInMethod"]);if(!s||!o)return null;const f=new Is(s,o);return f.idToken=u.idToken||void 0,f.accessToken=u.accessToken||void 0,f.secret=u.secret,f.nonce=u.nonce,f.pendingToken=u.pendingToken||null,f}_getIdTokenResponse(e){const n=this.buildRequest();return Pa(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,Pa(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Pa(e,n)}buildRequest(){const e={requestUri:Vb,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Vl(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pb(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Ub(r){const e=hl(fl(r)).link,n=e?hl(fl(e)).deep_link_id:null,s=hl(fl(r)).deep_link_id;return(s?hl(fl(s)).link:null)||s||n||e||r}class vm{constructor(e){var n,s,o,u,f,p;const g=hl(fl(e)),y=(n=g.apiKey)!==null&&n!==void 0?n:null,T=(s=g.oobCode)!==null&&s!==void 0?s:null,I=Pb((o=g.mode)!==null&&o!==void 0?o:null);ge(y&&T&&I,"argument-error"),this.apiKey=y,this.operation=I,this.code=T,this.continueUrl=(u=g.continueUrl)!==null&&u!==void 0?u:null,this.languageCode=(f=g.lang)!==null&&f!==void 0?f:null,this.tenantId=(p=g.tenantId)!==null&&p!==void 0?p:null}static parseLink(e){const n=Ub(e);try{return new vm(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xa{constructor(){this.providerId=Xa.PROVIDER_ID}static credential(e,n){return wl._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const s=vm.parseLink(n);return ge(s,"argument-error"),wl._fromEmailAndCode(e,s.code,s.tenantId)}}Xa.PROVIDER_ID="password";Xa.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Xa.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V0{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ul extends V0{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr extends Ul{constructor(){super("facebook.com")}static credential(e){return Is._fromParams({providerId:vr.PROVIDER_ID,signInMethod:vr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return vr.credentialFromTaggedObject(e)}static credentialFromError(e){return vr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return vr.credential(e.oauthAccessToken)}catch{return null}}}vr.FACEBOOK_SIGN_IN_METHOD="facebook.com";vr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er extends Ul{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Is._fromParams({providerId:Er.PROVIDER_ID,signInMethod:Er.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Er.credentialFromTaggedObject(e)}static credentialFromError(e){return Er.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return Er.credential(n,s)}catch{return null}}}Er.GOOGLE_SIGN_IN_METHOD="google.com";Er.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr extends Ul{constructor(){super("github.com")}static credential(e){return Is._fromParams({providerId:Tr.PROVIDER_ID,signInMethod:Tr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Tr.credentialFromTaggedObject(e)}static credentialFromError(e){return Tr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Tr.credential(e.oauthAccessToken)}catch{return null}}}Tr.GITHUB_SIGN_IN_METHOD="github.com";Tr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ar extends Ul{constructor(){super("twitter.com")}static credential(e,n){return Is._fromParams({providerId:Ar.PROVIDER_ID,signInMethod:Ar.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Ar.credentialFromTaggedObject(e)}static credentialFromError(e){return Ar.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return Ar.credential(n,s)}catch{return null}}}Ar.TWITTER_SIGN_IN_METHOD="twitter.com";Ar.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ja{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,o=!1){const u=await Ln._fromIdTokenResponse(e,s,o),f=H_(s);return new ja({user:u,providerId:f,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const o=H_(s);return new ja({user:e,providerId:o,_tokenResponse:s,operationType:n})}}function H_(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pc extends qi{constructor(e,n,s,o){var u;super(n.code,n.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,Pc.prototype),this.customData={appName:e.name,tenantId:(u=e.tenantId)!==null&&u!==void 0?u:void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,o){return new Pc(e,n,s,o)}}function P0(r,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(r):n._getIdTokenResponse(r)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?Pc._fromErrorAndOperation(r,u,e,s):u})}async function Lb(r,e,n=!1){const s=await bl(r,e._linkToIdToken(r.auth,await r.getIdToken()),n);return ja._forOperation(r,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kb(r,e,n=!1){const{auth:s}=r;if(Un(s.app))return Promise.reject(Ir(s));const o="reauthenticate";try{const u=await bl(r,P0(s,o,e,r),n);ge(u.idToken,s,"internal-error");const f=gm(u.idToken);ge(f,s,"internal-error");const{sub:p}=f;return ge(r.uid===p,s,"user-mismatch"),ja._forOperation(r,o,u)}catch(u){throw(u==null?void 0:u.code)==="auth/user-not-found"&&jn(s,"user-mismatch"),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function U0(r,e,n=!1){if(Un(r.app))return Promise.reject(Ir(r));const s="signIn",o=await P0(r,s,e),u=await ja._fromIdTokenResponse(r,s,o);return n||await r._updateCurrentUser(u.user),u}async function jb(r,e){return U0(Ya(r),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zb(r){const e=Ya(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function Bb(r,e,n){return Un(r.app)?Promise.reject(Ir(r)):jb(Bt(r),Xa.credential(e,n)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&zb(r),s})}function qb(r,e,n,s){return Bt(r).onIdTokenChanged(e,n,s)}function Hb(r,e,n){return Bt(r).beforeAuthStateChanged(e,n)}function Gb(r,e,n,s){return Bt(r).onAuthStateChanged(e,n,s)}function Fb(r){return Bt(r).signOut()}const Uc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L0{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Uc,"1"),this.storage.removeItem(Uc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qb=1e3,Kb=10;class k0 extends L0{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=x0(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),o=this.localCache[n];s!==o&&e(n,o,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((f,p,g)=>{this.notifyListeners(f,g)});return}const s=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const f=this.storage.getItem(s);!n&&this.localCache[s]===f||this.notifyListeners(s,f)},u=this.storage.getItem(s);hb()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,Kb):o()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},Qb)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}k0.type="LOCAL";const Yb=k0;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j0 extends L0{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}j0.type="SESSION";const z0=j0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xb(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const s=new Jc(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:o,data:u}=n.data,f=this.handlersMap[o];if(!(f!=null&&f.size))return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const p=Array.from(f).map(async y=>y(n.origin,u)),g=await Xb(p);n.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:g})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Jc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Em(r="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return r+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $b{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,f;return new Promise((p,g)=>{const y=Em("",20);o.port1.start();const T=setTimeout(()=>{g(new Error("unsupported_event"))},s);f={messageChannel:o,onMessage(I){const x=I;if(x.data.eventId===y)switch(x.data.status){case"ack":clearTimeout(T),u=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),p(x.data.response);break;default:clearTimeout(T),clearTimeout(u),g(new Error("invalid_response"));break}}},this.handlers.add(f),o.port1.addEventListener("message",f.onMessage),this.target.postMessage({eventType:e,eventId:y,data:n},[o.port2])}).finally(()=>{f&&this.removeMessageHandler(f)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function si(){return window}function Zb(r){si().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B0(){return typeof si().WorkerGlobalScope<"u"&&typeof si().importScripts=="function"}async function Wb(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Jb(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)===null||r===void 0?void 0:r.controller)||null}function ew(){return B0()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q0="firebaseLocalStorageDb",tw=1,Lc="firebaseLocalStorage",H0="fbase_key";class Ll{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function eh(r,e){return r.transaction([Lc],e?"readwrite":"readonly").objectStore(Lc)}function nw(){const r=indexedDB.deleteDatabase(q0);return new Ll(r).toPromise()}function Hd(){const r=indexedDB.open(q0,tw);return new Promise((e,n)=>{r.addEventListener("error",()=>{n(r.error)}),r.addEventListener("upgradeneeded",()=>{const s=r.result;try{s.createObjectStore(Lc,{keyPath:H0})}catch(o){n(o)}}),r.addEventListener("success",async()=>{const s=r.result;s.objectStoreNames.contains(Lc)?e(s):(s.close(),await nw(),e(await Hd()))})})}async function G_(r,e,n){const s=eh(r,!0).put({[H0]:e,value:n});return new Ll(s).toPromise()}async function iw(r,e){const n=eh(r,!1).get(e),s=await new Ll(n).toPromise();return s===void 0?null:s.value}function F_(r,e){const n=eh(r,!0).delete(e);return new Ll(n).toPromise()}const rw=800,sw=3;class G0{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Hd(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>sw)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return B0()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Jc._getInstance(ew()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await Wb(),!this.activeServiceWorker)return;this.sender=new $b(this.activeServiceWorker);const s=await this.sender._send("ping",{},800);s&&!((e=s[0])===null||e===void 0)&&e.fulfilled&&!((n=s[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Jb()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Hd();return await G_(e,Uc,"1"),await F_(e,Uc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>G_(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>iw(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>F_(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const u=eh(o,!1).getAll();return new Ll(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:u}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),rw)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}G0.type="LOCAL";const aw=G0;new Pl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ow(r,e){return e?Li(e):(ge(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tm extends _m{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Pa(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Pa(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Pa(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function lw(r){return U0(r.auth,new Tm(r),r.bypassAuthState)}function uw(r){const{auth:e,user:n}=r;return ge(n,e,"internal-error"),kb(n,new Tm(r),r.bypassAuthState)}async function cw(r){const{auth:e,user:n}=r;return ge(n,e,"internal-error"),Lb(n,new Tm(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F0{constructor(e,n,s,o,u=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:o,tenantId:u,error:f,type:p}=e;if(f){this.reject(f);return}const g={auth:this.auth,requestUri:n,sessionId:s,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(p)(g))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return lw;case"linkViaPopup":case"linkViaRedirect":return cw;case"reauthViaPopup":case"reauthViaRedirect":return uw;default:jn(this.auth,"internal-error")}}resolve(e){ji(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ji(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hw=new Pl(2e3,1e4);class Oa extends F0{constructor(e,n,s,o,u){super(e,n,o,u),this.provider=s,this.authWindow=null,this.pollId=null,Oa.currentPopupAction&&Oa.currentPopupAction.cancel(),Oa.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ge(e,this.auth,"internal-error"),e}async onExecution(){ji(this.filter.length===1,"Popup operations only handle one event");const e=Em();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(ri(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(ri(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Oa.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,s;if(!((s=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||s===void 0)&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ri(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,hw.get())};e()}}Oa.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fw="pendingRedirect",Ac=new Map;class dw extends F0{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=Ac.get(this.auth._key());if(!e){try{const s=await mw(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}Ac.set(this.auth._key(),e)}return this.bypassAuthState||Ac.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function mw(r,e){const n=yw(e),s=gw(r);if(!await s._isAvailable())return!1;const o=await s._get(n)==="true";return await s._remove(n),o}function pw(r,e){Ac.set(r._key(),e)}function gw(r){return Li(r._redirectPersistence)}function yw(r){return Tc(fw,r.config.apiKey,r.name)}async function _w(r,e,n=!1){if(Un(r.app))return Promise.reject(Ir(r));const s=Ya(r),o=ow(s,e),f=await new dw(s,o,n).execute();return f&&!n&&(delete f.user._redirectEventId,await s._persistUserIfCurrent(f.user),await s._setRedirectUser(null,e)),f}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vw=10*60*1e3;class Ew{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Tw(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var s;if(e.error&&!Q0(e)){const o=((s=e.error.code)===null||s===void 0?void 0:s.split("auth/")[1])||"internal-error";n.onError(ri(this.auth,o))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=vw&&this.cachedEventUids.clear(),this.cachedEventUids.has(Q_(e))}saveEventToCache(e){this.cachedEventUids.add(Q_(e)),this.lastProcessedEventTime=Date.now()}}function Q_(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function Q0({type:r,error:e}){return r==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function Tw(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Q0(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Aw(r,e={}){return Lr(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sw=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,bw=/^https?/;async function ww(r){if(r.config.emulator)return;const{authorizedDomains:e}=await Aw(r);for(const n of e)try{if(Rw(n))return}catch{}jn(r,"unauthorized-domain")}function Rw(r){const e=Bd(),{protocol:n,hostname:s}=new URL(e);if(r.startsWith("chrome-extension://")){const f=new URL(r);return f.hostname===""&&s===""?n==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&f.hostname===s}if(!bw.test(n))return!1;if(Sw.test(r))return s===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iw=new Pl(3e4,6e4);function K_(){const r=si().___jsl;if(r!=null&&r.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let n=0;n<r.CP.length;n++)r.CP[n]=null}}function Cw(r){return new Promise((e,n)=>{var s,o,u;function f(){K_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{K_(),n(ri(r,"network-request-failed"))},timeout:Iw.get()})}if(!((o=(s=si().gapi)===null||s===void 0?void 0:s.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((u=si().gapi)===null||u===void 0)&&u.load)f();else{const p=Eb("iframefcb");return si()[p]=()=>{gapi.load?f():n(ri(r,"network-request-failed"))},D0(`${vb()}?onload=${p}`).catch(g=>n(g))}}).catch(e=>{throw Sc=null,e})}let Sc=null;function xw(r){return Sc=Sc||Cw(r),Sc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nw=new Pl(5e3,15e3),Dw="__/auth/iframe",Ow="emulator/auth/iframe",Mw={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Vw=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Pw(r){const e=r.config;ge(e.authDomain,r,"auth-domain-config-required");const n=e.emulator?pm(e,Ow):`https://${r.config.authDomain}/${Dw}`,s={apiKey:e.apiKey,appName:r.name,v:Ka},o=Vw.get(r.config.apiHost);o&&(s.eid=o);const u=r._getFrameworks();return u.length&&(s.fw=u.join(",")),`${n}?${Vl(s).slice(1)}`}async function Uw(r){const e=await xw(r),n=si().gapi;return ge(n,r,"internal-error"),e.open({where:document.body,url:Pw(r),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Mw,dontclear:!0},s=>new Promise(async(o,u)=>{await s.restyle({setHideOnLeave:!1});const f=ri(r,"network-request-failed"),p=si().setTimeout(()=>{u(f)},Nw.get());function g(){si().clearTimeout(p),o(s)}s.ping(g).then(g,()=>{u(f)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lw={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},kw=500,jw=600,zw="_blank",Bw="http://localhost";class Y_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function qw(r,e,n,s=kw,o=jw){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),f=Math.max((window.screen.availWidth-s)/2,0).toString();let p="";const g=Object.assign(Object.assign({},Lw),{width:s.toString(),height:o.toString(),top:u,left:f}),y=Xt().toLowerCase();n&&(p=b0(y)?zw:n),A0(y)&&(e=e||Bw,g.scrollbars="yes");const T=Object.entries(g).reduce((x,[G,Z])=>`${x}${G}=${Z},`,"");if(cb(y)&&p!=="_self")return Hw(e||"",p),new Y_(null);const I=window.open(e||"",p,T);ge(I,r,"popup-blocked");try{I.focus()}catch{}return new Y_(I)}function Hw(r,e){const n=document.createElement("a");n.href=r,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gw="__/auth/handler",Fw="emulator/auth/handler",Qw=encodeURIComponent("fac");async function X_(r,e,n,s,o,u){ge(r.config.authDomain,r,"auth-domain-config-required"),ge(r.config.apiKey,r,"invalid-api-key");const f={apiKey:r.config.apiKey,appName:r.name,authType:n,redirectUrl:s,v:Ka,eventId:o};if(e instanceof V0){e.setDefaultLanguage(r.languageCode),f.providerId=e.providerId||"",OS(e.getCustomParameters())||(f.customParameters=JSON.stringify(e.getCustomParameters()));for(const[T,I]of Object.entries({}))f[T]=I}if(e instanceof Ul){const T=e.getScopes().filter(I=>I!=="");T.length>0&&(f.scopes=T.join(","))}r.tenantId&&(f.tid=r.tenantId);const p=f;for(const T of Object.keys(p))p[T]===void 0&&delete p[T];const g=await r._getAppCheckToken(),y=g?`#${Qw}=${encodeURIComponent(g)}`:"";return`${Kw(r)}?${Vl(p).slice(1)}${y}`}function Kw({config:r}){return r.emulator?pm(r,Fw):`https://${r.authDomain}/${Gw}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dd="webStorageSupport";class Yw{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=z0,this._completeRedirectFn=_w,this._overrideRedirectResult=pw}async _openPopup(e,n,s,o){var u;ji((u=this.eventManagers[e._key()])===null||u===void 0?void 0:u.manager,"_initialize() not called before _openPopup()");const f=await X_(e,n,s,Bd(),o);return qw(e,f,Em())}async _openRedirect(e,n,s,o){await this._originValidation(e);const u=await X_(e,n,s,Bd(),o);return Zb(u),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:u}=this.eventManagers[n];return o?Promise.resolve(o):(ji(u,"If manager is not set, promise should be"),u)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await Uw(e),s=new Ew(e);return n.register("authEvent",o=>(ge(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Dd,{type:Dd},o=>{var u;const f=(u=o==null?void 0:o[0])===null||u===void 0?void 0:u[Dd];f!==void 0&&n(!!f),jn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=ww(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return x0()||S0()||ym()}}const Xw=Yw;var $_="@firebase/auth",Z_="1.10.6";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $w{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ge(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zw(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Ww(r){ka(new Rs("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:f,authDomain:p}=s.options;ge(f&&!f.includes(":"),"invalid-api-key",{appName:s.name});const g={apiKey:f,authDomain:p,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:N0(r)},y=new gb(s,o,u,g);return Rb(y,n),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),ka(new Rs("auth-internal",e=>{const n=Ya(e.getProvider("auth").getImmediate());return(s=>new $w(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Rr($_,Z_,Zw(r)),Rr($_,Z_,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jw=5*60,eR=s0("authIdTokenMaxAge")||Jw;let W_=null;const tR=r=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>eR)return;const o=n==null?void 0:n.token;W_!==o&&(W_=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function nR(r=h0()){const e=fm(r,"auth");if(e.isInitialized())return e.getImmediate();const n=wb(r,{popupRedirectResolver:Xw,persistence:[aw,Yb,z0]}),s=s0("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(s,location.origin);if(location.origin===u.origin){const f=tR(u.toString());Hb(n,f,()=>f(n.currentUser)),qb(n,p=>f(p))}}const o=i0("auth");return o&&Ib(n,`http://${o}`),n}function iR(){var r,e;return(e=(r=document.getElementsByTagName("head"))===null||r===void 0?void 0:r[0])!==null&&e!==void 0?e:document}yb({loadJS(r){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",r),s.onload=e,s.onerror=o=>{const u=ri("internal-error");u.customData=o,n(u)},s.type="text/javascript",s.charset="UTF-8",iR().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Ww("Browser");var rR="firebase",sR="11.8.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Rr(rR,sR,"app");var J_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Cr,K0;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(M,b){function R(){}R.prototype=b.prototype,M.D=b.prototype,M.prototype=new R,M.prototype.constructor=M,M.C=function(O,V,U){for(var C=Array(arguments.length-2),Mt=2;Mt<arguments.length;Mt++)C[Mt-2]=arguments[Mt];return b.prototype[V].apply(O,C)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,n),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(M,b,R){R||(R=0);var O=Array(16);if(typeof b=="string")for(var V=0;16>V;++V)O[V]=b.charCodeAt(R++)|b.charCodeAt(R++)<<8|b.charCodeAt(R++)<<16|b.charCodeAt(R++)<<24;else for(V=0;16>V;++V)O[V]=b[R++]|b[R++]<<8|b[R++]<<16|b[R++]<<24;b=M.g[0],R=M.g[1],V=M.g[2];var U=M.g[3],C=b+(U^R&(V^U))+O[0]+3614090360&4294967295;b=R+(C<<7&4294967295|C>>>25),C=U+(V^b&(R^V))+O[1]+3905402710&4294967295,U=b+(C<<12&4294967295|C>>>20),C=V+(R^U&(b^R))+O[2]+606105819&4294967295,V=U+(C<<17&4294967295|C>>>15),C=R+(b^V&(U^b))+O[3]+3250441966&4294967295,R=V+(C<<22&4294967295|C>>>10),C=b+(U^R&(V^U))+O[4]+4118548399&4294967295,b=R+(C<<7&4294967295|C>>>25),C=U+(V^b&(R^V))+O[5]+1200080426&4294967295,U=b+(C<<12&4294967295|C>>>20),C=V+(R^U&(b^R))+O[6]+2821735955&4294967295,V=U+(C<<17&4294967295|C>>>15),C=R+(b^V&(U^b))+O[7]+4249261313&4294967295,R=V+(C<<22&4294967295|C>>>10),C=b+(U^R&(V^U))+O[8]+1770035416&4294967295,b=R+(C<<7&4294967295|C>>>25),C=U+(V^b&(R^V))+O[9]+2336552879&4294967295,U=b+(C<<12&4294967295|C>>>20),C=V+(R^U&(b^R))+O[10]+4294925233&4294967295,V=U+(C<<17&4294967295|C>>>15),C=R+(b^V&(U^b))+O[11]+2304563134&4294967295,R=V+(C<<22&4294967295|C>>>10),C=b+(U^R&(V^U))+O[12]+1804603682&4294967295,b=R+(C<<7&4294967295|C>>>25),C=U+(V^b&(R^V))+O[13]+4254626195&4294967295,U=b+(C<<12&4294967295|C>>>20),C=V+(R^U&(b^R))+O[14]+2792965006&4294967295,V=U+(C<<17&4294967295|C>>>15),C=R+(b^V&(U^b))+O[15]+1236535329&4294967295,R=V+(C<<22&4294967295|C>>>10),C=b+(V^U&(R^V))+O[1]+4129170786&4294967295,b=R+(C<<5&4294967295|C>>>27),C=U+(R^V&(b^R))+O[6]+3225465664&4294967295,U=b+(C<<9&4294967295|C>>>23),C=V+(b^R&(U^b))+O[11]+643717713&4294967295,V=U+(C<<14&4294967295|C>>>18),C=R+(U^b&(V^U))+O[0]+3921069994&4294967295,R=V+(C<<20&4294967295|C>>>12),C=b+(V^U&(R^V))+O[5]+3593408605&4294967295,b=R+(C<<5&4294967295|C>>>27),C=U+(R^V&(b^R))+O[10]+38016083&4294967295,U=b+(C<<9&4294967295|C>>>23),C=V+(b^R&(U^b))+O[15]+3634488961&4294967295,V=U+(C<<14&4294967295|C>>>18),C=R+(U^b&(V^U))+O[4]+3889429448&4294967295,R=V+(C<<20&4294967295|C>>>12),C=b+(V^U&(R^V))+O[9]+568446438&4294967295,b=R+(C<<5&4294967295|C>>>27),C=U+(R^V&(b^R))+O[14]+3275163606&4294967295,U=b+(C<<9&4294967295|C>>>23),C=V+(b^R&(U^b))+O[3]+4107603335&4294967295,V=U+(C<<14&4294967295|C>>>18),C=R+(U^b&(V^U))+O[8]+1163531501&4294967295,R=V+(C<<20&4294967295|C>>>12),C=b+(V^U&(R^V))+O[13]+2850285829&4294967295,b=R+(C<<5&4294967295|C>>>27),C=U+(R^V&(b^R))+O[2]+4243563512&4294967295,U=b+(C<<9&4294967295|C>>>23),C=V+(b^R&(U^b))+O[7]+1735328473&4294967295,V=U+(C<<14&4294967295|C>>>18),C=R+(U^b&(V^U))+O[12]+2368359562&4294967295,R=V+(C<<20&4294967295|C>>>12),C=b+(R^V^U)+O[5]+4294588738&4294967295,b=R+(C<<4&4294967295|C>>>28),C=U+(b^R^V)+O[8]+2272392833&4294967295,U=b+(C<<11&4294967295|C>>>21),C=V+(U^b^R)+O[11]+1839030562&4294967295,V=U+(C<<16&4294967295|C>>>16),C=R+(V^U^b)+O[14]+4259657740&4294967295,R=V+(C<<23&4294967295|C>>>9),C=b+(R^V^U)+O[1]+2763975236&4294967295,b=R+(C<<4&4294967295|C>>>28),C=U+(b^R^V)+O[4]+1272893353&4294967295,U=b+(C<<11&4294967295|C>>>21),C=V+(U^b^R)+O[7]+4139469664&4294967295,V=U+(C<<16&4294967295|C>>>16),C=R+(V^U^b)+O[10]+3200236656&4294967295,R=V+(C<<23&4294967295|C>>>9),C=b+(R^V^U)+O[13]+681279174&4294967295,b=R+(C<<4&4294967295|C>>>28),C=U+(b^R^V)+O[0]+3936430074&4294967295,U=b+(C<<11&4294967295|C>>>21),C=V+(U^b^R)+O[3]+3572445317&4294967295,V=U+(C<<16&4294967295|C>>>16),C=R+(V^U^b)+O[6]+76029189&4294967295,R=V+(C<<23&4294967295|C>>>9),C=b+(R^V^U)+O[9]+3654602809&4294967295,b=R+(C<<4&4294967295|C>>>28),C=U+(b^R^V)+O[12]+3873151461&4294967295,U=b+(C<<11&4294967295|C>>>21),C=V+(U^b^R)+O[15]+530742520&4294967295,V=U+(C<<16&4294967295|C>>>16),C=R+(V^U^b)+O[2]+3299628645&4294967295,R=V+(C<<23&4294967295|C>>>9),C=b+(V^(R|~U))+O[0]+4096336452&4294967295,b=R+(C<<6&4294967295|C>>>26),C=U+(R^(b|~V))+O[7]+1126891415&4294967295,U=b+(C<<10&4294967295|C>>>22),C=V+(b^(U|~R))+O[14]+2878612391&4294967295,V=U+(C<<15&4294967295|C>>>17),C=R+(U^(V|~b))+O[5]+4237533241&4294967295,R=V+(C<<21&4294967295|C>>>11),C=b+(V^(R|~U))+O[12]+1700485571&4294967295,b=R+(C<<6&4294967295|C>>>26),C=U+(R^(b|~V))+O[3]+2399980690&4294967295,U=b+(C<<10&4294967295|C>>>22),C=V+(b^(U|~R))+O[10]+4293915773&4294967295,V=U+(C<<15&4294967295|C>>>17),C=R+(U^(V|~b))+O[1]+2240044497&4294967295,R=V+(C<<21&4294967295|C>>>11),C=b+(V^(R|~U))+O[8]+1873313359&4294967295,b=R+(C<<6&4294967295|C>>>26),C=U+(R^(b|~V))+O[15]+4264355552&4294967295,U=b+(C<<10&4294967295|C>>>22),C=V+(b^(U|~R))+O[6]+2734768916&4294967295,V=U+(C<<15&4294967295|C>>>17),C=R+(U^(V|~b))+O[13]+1309151649&4294967295,R=V+(C<<21&4294967295|C>>>11),C=b+(V^(R|~U))+O[4]+4149444226&4294967295,b=R+(C<<6&4294967295|C>>>26),C=U+(R^(b|~V))+O[11]+3174756917&4294967295,U=b+(C<<10&4294967295|C>>>22),C=V+(b^(U|~R))+O[2]+718787259&4294967295,V=U+(C<<15&4294967295|C>>>17),C=R+(U^(V|~b))+O[9]+3951481745&4294967295,M.g[0]=M.g[0]+b&4294967295,M.g[1]=M.g[1]+(V+(C<<21&4294967295|C>>>11))&4294967295,M.g[2]=M.g[2]+V&4294967295,M.g[3]=M.g[3]+U&4294967295}s.prototype.u=function(M,b){b===void 0&&(b=M.length);for(var R=b-this.blockSize,O=this.B,V=this.h,U=0;U<b;){if(V==0)for(;U<=R;)o(this,M,U),U+=this.blockSize;if(typeof M=="string"){for(;U<b;)if(O[V++]=M.charCodeAt(U++),V==this.blockSize){o(this,O),V=0;break}}else for(;U<b;)if(O[V++]=M[U++],V==this.blockSize){o(this,O),V=0;break}}this.h=V,this.o+=b},s.prototype.v=function(){var M=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);M[0]=128;for(var b=1;b<M.length-8;++b)M[b]=0;var R=8*this.o;for(b=M.length-8;b<M.length;++b)M[b]=R&255,R/=256;for(this.u(M),M=Array(16),b=R=0;4>b;++b)for(var O=0;32>O;O+=8)M[R++]=this.g[b]>>>O&255;return M};function u(M,b){var R=p;return Object.prototype.hasOwnProperty.call(R,M)?R[M]:R[M]=b(M)}function f(M,b){this.h=b;for(var R=[],O=!0,V=M.length-1;0<=V;V--){var U=M[V]|0;O&&U==b||(R[V]=U,O=!1)}this.g=R}var p={};function g(M){return-128<=M&&128>M?u(M,function(b){return new f([b|0],0>b?-1:0)}):new f([M|0],0>M?-1:0)}function y(M){if(isNaN(M)||!isFinite(M))return I;if(0>M)return q(y(-M));for(var b=[],R=1,O=0;M>=R;O++)b[O]=M/R|0,R*=4294967296;return new f(b,0)}function T(M,b){if(M.length==0)throw Error("number format error: empty string");if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(M.charAt(0)=="-")return q(T(M.substring(1),b));if(0<=M.indexOf("-"))throw Error('number format error: interior "-" character');for(var R=y(Math.pow(b,8)),O=I,V=0;V<M.length;V+=8){var U=Math.min(8,M.length-V),C=parseInt(M.substring(V,V+U),b);8>U?(U=y(Math.pow(b,U)),O=O.j(U).add(y(C))):(O=O.j(R),O=O.add(y(C)))}return O}var I=g(0),x=g(1),G=g(16777216);r=f.prototype,r.m=function(){if(F(this))return-q(this).m();for(var M=0,b=1,R=0;R<this.g.length;R++){var O=this.i(R);M+=(0<=O?O:4294967296+O)*b,b*=4294967296}return M},r.toString=function(M){if(M=M||10,2>M||36<M)throw Error("radix out of range: "+M);if(Z(this))return"0";if(F(this))return"-"+q(this).toString(M);for(var b=y(Math.pow(M,6)),R=this,O="";;){var V=Oe(R,b).g;R=re(R,V.j(b));var U=((0<R.g.length?R.g[0]:R.h)>>>0).toString(M);if(R=V,Z(R))return U+O;for(;6>U.length;)U="0"+U;O=U+O}},r.i=function(M){return 0>M?0:M<this.g.length?this.g[M]:this.h};function Z(M){if(M.h!=0)return!1;for(var b=0;b<M.g.length;b++)if(M.g[b]!=0)return!1;return!0}function F(M){return M.h==-1}r.l=function(M){return M=re(this,M),F(M)?-1:Z(M)?0:1};function q(M){for(var b=M.g.length,R=[],O=0;O<b;O++)R[O]=~M.g[O];return new f(R,~M.h).add(x)}r.abs=function(){return F(this)?q(this):this},r.add=function(M){for(var b=Math.max(this.g.length,M.g.length),R=[],O=0,V=0;V<=b;V++){var U=O+(this.i(V)&65535)+(M.i(V)&65535),C=(U>>>16)+(this.i(V)>>>16)+(M.i(V)>>>16);O=C>>>16,U&=65535,C&=65535,R[V]=C<<16|U}return new f(R,R[R.length-1]&-2147483648?-1:0)};function re(M,b){return M.add(q(b))}r.j=function(M){if(Z(this)||Z(M))return I;if(F(this))return F(M)?q(this).j(q(M)):q(q(this).j(M));if(F(M))return q(this.j(q(M)));if(0>this.l(G)&&0>M.l(G))return y(this.m()*M.m());for(var b=this.g.length+M.g.length,R=[],O=0;O<2*b;O++)R[O]=0;for(O=0;O<this.g.length;O++)for(var V=0;V<M.g.length;V++){var U=this.i(O)>>>16,C=this.i(O)&65535,Mt=M.i(V)>>>16,rt=M.i(V)&65535;R[2*O+2*V]+=C*rt,se(R,2*O+2*V),R[2*O+2*V+1]+=U*rt,se(R,2*O+2*V+1),R[2*O+2*V+1]+=C*Mt,se(R,2*O+2*V+1),R[2*O+2*V+2]+=U*Mt,se(R,2*O+2*V+2)}for(O=0;O<b;O++)R[O]=R[2*O+1]<<16|R[2*O];for(O=b;O<2*b;O++)R[O]=0;return new f(R,0)};function se(M,b){for(;(M[b]&65535)!=M[b];)M[b+1]+=M[b]>>>16,M[b]&=65535,b++}function le(M,b){this.g=M,this.h=b}function Oe(M,b){if(Z(b))throw Error("division by zero");if(Z(M))return new le(I,I);if(F(M))return b=Oe(q(M),b),new le(q(b.g),q(b.h));if(F(b))return b=Oe(M,q(b)),new le(q(b.g),b.h);if(30<M.g.length){if(F(M)||F(b))throw Error("slowDivide_ only works with positive integers.");for(var R=x,O=b;0>=O.l(M);)R=Ee(R),O=Ee(O);var V=Me(R,1),U=Me(O,1);for(O=Me(O,2),R=Me(R,2);!Z(O);){var C=U.add(O);0>=C.l(M)&&(V=V.add(R),U=C),O=Me(O,1),R=Me(R,1)}return b=re(M,V.j(b)),new le(V,b)}for(V=I;0<=M.l(b);){for(R=Math.max(1,Math.floor(M.m()/b.m())),O=Math.ceil(Math.log(R)/Math.LN2),O=48>=O?1:Math.pow(2,O-48),U=y(R),C=U.j(b);F(C)||0<C.l(M);)R-=O,U=y(R),C=U.j(b);Z(U)&&(U=x),V=V.add(U),M=re(M,C)}return new le(V,M)}r.A=function(M){return Oe(this,M).h},r.and=function(M){for(var b=Math.max(this.g.length,M.g.length),R=[],O=0;O<b;O++)R[O]=this.i(O)&M.i(O);return new f(R,this.h&M.h)},r.or=function(M){for(var b=Math.max(this.g.length,M.g.length),R=[],O=0;O<b;O++)R[O]=this.i(O)|M.i(O);return new f(R,this.h|M.h)},r.xor=function(M){for(var b=Math.max(this.g.length,M.g.length),R=[],O=0;O<b;O++)R[O]=this.i(O)^M.i(O);return new f(R,this.h^M.h)};function Ee(M){for(var b=M.g.length+1,R=[],O=0;O<b;O++)R[O]=M.i(O)<<1|M.i(O-1)>>>31;return new f(R,M.h)}function Me(M,b){var R=b>>5;b%=32;for(var O=M.g.length-R,V=[],U=0;U<O;U++)V[U]=0<b?M.i(U+R)>>>b|M.i(U+R+1)<<32-b:M.i(U+R);return new f(V,M.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,K0=s,f.prototype.add=f.prototype.add,f.prototype.multiply=f.prototype.j,f.prototype.modulo=f.prototype.A,f.prototype.compare=f.prototype.l,f.prototype.toNumber=f.prototype.m,f.prototype.toString=f.prototype.toString,f.prototype.getBits=f.prototype.i,f.fromNumber=y,f.fromString=T,Cr=f}).apply(typeof J_<"u"?J_:typeof self<"u"?self:typeof window<"u"?window:{});var mc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Y0,dl,X0,bc,Gd,$0,Z0,W0;(function(){var r,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,m,_){return c==Array.prototype||c==Object.prototype||(c[m]=_.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof mc=="object"&&mc];for(var m=0;m<c.length;++m){var _=c[m];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var s=n(this);function o(c,m){if(m)e:{var _=s;c=c.split(".");for(var A=0;A<c.length-1;A++){var L=c[A];if(!(L in _))break e;_=_[L]}c=c[c.length-1],A=_[c],m=m(A),m!=A&&m!=null&&e(_,c,{configurable:!0,writable:!0,value:m})}}function u(c,m){c instanceof String&&(c+="");var _=0,A=!1,L={next:function(){if(!A&&_<c.length){var H=_++;return{value:m(H,c[H]),done:!1}}return A=!0,{done:!0,value:void 0}}};return L[Symbol.iterator]=function(){return L},L}o("Array.prototype.values",function(c){return c||function(){return u(this,function(m,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var f=f||{},p=this||self;function g(c){var m=typeof c;return m=m!="object"?m:c?Array.isArray(c)?"array":m:"null",m=="array"||m=="object"&&typeof c.length=="number"}function y(c){var m=typeof c;return m=="object"&&c!=null||m=="function"}function T(c,m,_){return c.call.apply(c.bind,arguments)}function I(c,m,_){if(!c)throw Error();if(2<arguments.length){var A=Array.prototype.slice.call(arguments,2);return function(){var L=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(L,A),c.apply(m,L)}}return function(){return c.apply(m,arguments)}}function x(c,m,_){return x=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?T:I,x.apply(null,arguments)}function G(c,m){var _=Array.prototype.slice.call(arguments,1);return function(){var A=_.slice();return A.push.apply(A,arguments),c.apply(this,A)}}function Z(c,m){function _(){}_.prototype=m.prototype,c.aa=m.prototype,c.prototype=new _,c.prototype.constructor=c,c.Qb=function(A,L,H){for(var te=Array(arguments.length-2),Ve=2;Ve<arguments.length;Ve++)te[Ve-2]=arguments[Ve];return m.prototype[L].apply(A,te)}}function F(c){const m=c.length;if(0<m){const _=Array(m);for(let A=0;A<m;A++)_[A]=c[A];return _}return[]}function q(c,m){for(let _=1;_<arguments.length;_++){const A=arguments[_];if(g(A)){const L=c.length||0,H=A.length||0;c.length=L+H;for(let te=0;te<H;te++)c[L+te]=A[te]}else c.push(A)}}class re{constructor(m,_){this.i=m,this.j=_,this.h=0,this.g=null}get(){let m;return 0<this.h?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function se(c){return/^[\s\xa0]*$/.test(c)}function le(){var c=p.navigator;return c&&(c=c.userAgent)?c:""}function Oe(c){return Oe[" "](c),c}Oe[" "]=function(){};var Ee=le().indexOf("Gecko")!=-1&&!(le().toLowerCase().indexOf("webkit")!=-1&&le().indexOf("Edge")==-1)&&!(le().indexOf("Trident")!=-1||le().indexOf("MSIE")!=-1)&&le().indexOf("Edge")==-1;function Me(c,m,_){for(const A in c)m.call(_,c[A],A,c)}function M(c,m){for(const _ in c)m.call(void 0,c[_],_,c)}function b(c){const m={};for(const _ in c)m[_]=c[_];return m}const R="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function O(c,m){let _,A;for(let L=1;L<arguments.length;L++){A=arguments[L];for(_ in A)c[_]=A[_];for(let H=0;H<R.length;H++)_=R[H],Object.prototype.hasOwnProperty.call(A,_)&&(c[_]=A[_])}}function V(c){var m=1;c=c.split(":");const _=[];for(;0<m&&c.length;)_.push(c.shift()),m--;return c.length&&_.push(c.join(":")),_}function U(c){p.setTimeout(()=>{throw c},0)}function C(){var c=je;let m=null;return c.g&&(m=c.g,c.g=c.g.next,c.g||(c.h=null),m.next=null),m}class Mt{constructor(){this.h=this.g=null}add(m,_){const A=rt.get();A.set(m,_),this.h?this.h.next=A:this.g=A,this.h=A}}var rt=new re(()=>new Q,c=>c.reset());class Q{constructor(){this.next=this.g=this.h=null}set(m,_){this.h=m,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let ne,ce=!1,je=new Mt,N=()=>{const c=p.Promise.resolve(void 0);ne=()=>{c.then(W)}};var W=()=>{for(var c;c=C();){try{c.h.call(c.g)}catch(_){U(_)}var m=rt;m.j(c),100>m.h&&(m.h++,c.next=m.g,m.g=c)}ce=!1};function ie(){this.s=this.s,this.C=this.C}ie.prototype.s=!1,ie.prototype.ma=function(){this.s||(this.s=!0,this.N())},ie.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ee(c,m){this.type=c,this.g=this.target=m,this.defaultPrevented=!1}ee.prototype.h=function(){this.defaultPrevented=!0};var fe=function(){if(!p.addEventListener||!Object.defineProperty)return!1;var c=!1,m=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const _=()=>{};p.addEventListener("test",_,m),p.removeEventListener("test",_,m)}catch{}return c}();function Re(c,m){if(ee.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var _=this.type=c.type,A=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=m,m=c.relatedTarget){if(Ee){e:{try{Oe(m.nodeName);var L=!0;break e}catch{}L=!1}L||(m=null)}}else _=="mouseover"?m=c.fromElement:_=="mouseout"&&(m=c.toElement);this.relatedTarget=m,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:ve[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Re.aa.h.call(this)}}Z(Re,ee);var ve={2:"touch",3:"pen",4:"mouse"};Re.prototype.h=function(){Re.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var wt="closure_listenable_"+(1e6*Math.random()|0),Ze=0;function zn(c,m,_,A,L){this.listener=c,this.proxy=null,this.src=m,this.type=_,this.capture=!!A,this.ha=L,this.key=++Ze,this.da=this.fa=!1}function Hi(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function ci(c){this.src=c,this.g={},this.h=0}ci.prototype.add=function(c,m,_,A,L){var H=c.toString();c=this.g[H],c||(c=this.g[H]=[],this.h++);var te=Br(c,m,A,L);return-1<te?(m=c[te],_||(m.fa=!1)):(m=new zn(m,this.src,H,!!A,L),m.fa=_,c.push(m)),m};function zr(c,m){var _=m.type;if(_ in c.g){var A=c.g[_],L=Array.prototype.indexOf.call(A,m,void 0),H;(H=0<=L)&&Array.prototype.splice.call(A,L,1),H&&(Hi(m),c.g[_].length==0&&(delete c.g[_],c.h--))}}function Br(c,m,_,A){for(var L=0;L<c.length;++L){var H=c[L];if(!H.da&&H.listener==m&&H.capture==!!_&&H.ha==A)return L}return-1}var qr="closure_lm_"+(1e6*Math.random()|0),eo={};function Hl(c,m,_,A,L){if(Array.isArray(m)){for(var H=0;H<m.length;H++)Hl(c,m[H],_,A,L);return null}return _=Gl(_),c&&c[wt]?c.K(m,_,y(A)?!!A.capture:!1,L):gn(c,m,_,!1,A,L)}function gn(c,m,_,A,L,H){if(!m)throw Error("Invalid event type");var te=y(L)?!!L.capture:!!L,Ve=Ps(c);if(Ve||(c[qr]=Ve=new ci(c)),_=Ve.add(m,_,A,te,H),_.proxy)return _;if(A=_h(),_.proxy=A,A.src=c,A.listener=_,c.addEventListener)fe||(L=te),L===void 0&&(L=!1),c.addEventListener(m.toString(),A,L);else if(c.attachEvent)c.attachEvent(Hr(m.toString()),A);else if(c.addListener&&c.removeListener)c.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return _}function _h(){function c(_){return m.call(c.src,c.listener,_)}const m=vh;return c}function to(c,m,_,A,L){if(Array.isArray(m))for(var H=0;H<m.length;H++)to(c,m[H],_,A,L);else A=y(A)?!!A.capture:!!A,_=Gl(_),c&&c[wt]?(c=c.i,m=String(m).toString(),m in c.g&&(H=c.g[m],_=Br(H,_,A,L),-1<_&&(Hi(H[_]),Array.prototype.splice.call(H,_,1),H.length==0&&(delete c.g[m],c.h--)))):c&&(c=Ps(c))&&(m=c.g[m.toString()],c=-1,m&&(c=Br(m,_,A,L)),(_=-1<c?m[c]:null)&&Vs(_))}function Vs(c){if(typeof c!="number"&&c&&!c.da){var m=c.src;if(m&&m[wt])zr(m.i,c);else{var _=c.type,A=c.proxy;m.removeEventListener?m.removeEventListener(_,A,c.capture):m.detachEvent?m.detachEvent(Hr(_),A):m.addListener&&m.removeListener&&m.removeListener(A),(_=Ps(m))?(zr(_,c),_.h==0&&(_.src=null,m[qr]=null)):Hi(c)}}}function Hr(c){return c in eo?eo[c]:eo[c]="on"+c}function vh(c,m){if(c.da)c=!0;else{m=new Re(m,this);var _=c.listener,A=c.ha||c.src;c.fa&&Vs(c),c=_.call(A,m)}return c}function Ps(c){return c=c[qr],c instanceof ci?c:null}var no="__closure_events_fn_"+(1e9*Math.random()>>>0);function Gl(c){return typeof c=="function"?c:(c[no]||(c[no]=function(m){return c.handleEvent(m)}),c[no])}function st(){ie.call(this),this.i=new ci(this),this.M=this,this.F=null}Z(st,ie),st.prototype[wt]=!0,st.prototype.removeEventListener=function(c,m,_,A){to(this,c,m,_,A)};function He(c,m){var _,A=c.F;if(A)for(_=[];A;A=A.F)_.push(A);if(c=c.M,A=m.type||m,typeof m=="string")m=new ee(m,c);else if(m instanceof ee)m.target=m.target||c;else{var L=m;m=new ee(A,c),O(m,L)}if(L=!0,_)for(var H=_.length-1;0<=H;H--){var te=m.g=_[H];L=an(te,A,!0,m)&&L}if(te=m.g=c,L=an(te,A,!0,m)&&L,L=an(te,A,!1,m)&&L,_)for(H=0;H<_.length;H++)te=m.g=_[H],L=an(te,A,!1,m)&&L}st.prototype.N=function(){if(st.aa.N.call(this),this.i){var c=this.i,m;for(m in c.g){for(var _=c.g[m],A=0;A<_.length;A++)Hi(_[A]);delete c.g[m],c.h--}}this.F=null},st.prototype.K=function(c,m,_,A){return this.i.add(String(c),m,!1,_,A)},st.prototype.L=function(c,m,_,A){return this.i.add(String(c),m,!0,_,A)};function an(c,m,_,A){if(m=c.i.g[String(m)],!m)return!0;m=m.concat();for(var L=!0,H=0;H<m.length;++H){var te=m[H];if(te&&!te.da&&te.capture==_){var Ve=te.listener,_t=te.ha||te.src;te.fa&&zr(c.i,te),L=Ve.call(_t,A)!==!1&&L}}return L&&!A.defaultPrevented}function Ht(c,m,_){if(typeof c=="function")_&&(c=x(c,_));else if(c&&typeof c.handleEvent=="function")c=x(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(m)?-1:p.setTimeout(c,m||0)}function Fl(c){c.g=Ht(()=>{c.g=null,c.i&&(c.i=!1,Fl(c))},c.l);const m=c.h;c.h=null,c.m.apply(null,m)}class Eh extends ie{constructor(m,_){super(),this.m=m,this.l=_,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:Fl(this)}N(){super.N(),this.g&&(p.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Gr(c){ie.call(this),this.h=c,this.g={}}Z(Gr,ie);var Fr=[];function Qr(c){Me(c.g,function(m,_){this.g.hasOwnProperty(_)&&Vs(m)},c),c.g={}}Gr.prototype.N=function(){Gr.aa.N.call(this),Qr(this)},Gr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Nn=p.JSON.stringify,Us=p.JSON.parse,Kr=class{stringify(c){return p.JSON.stringify(c,void 0)}parse(c){return p.JSON.parse(c,void 0)}};function io(){}io.prototype.h=null;function ro(c){return c.h||(c.h=c.i())}function so(){}var hi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function fi(){ee.call(this,"d")}Z(fi,ee);function ao(){ee.call(this,"c")}Z(ao,ee);var Bn={},oo=null;function Gi(){return oo=oo||new st}Bn.La="serverreachability";function Ls(c){ee.call(this,Bn.La,c)}Z(Ls,ee);function Fi(c){const m=Gi();He(m,new Ls(m))}Bn.STAT_EVENT="statevent";function Ql(c,m){ee.call(this,Bn.STAT_EVENT,c),this.stat=m}Z(Ql,ee);function Je(c){const m=Gi();He(m,new Ql(m,c))}Bn.Ma="timingevent";function yt(c,m){ee.call(this,Bn.Ma,c),this.size=m}Z(yt,ee);function ft(c,m){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return p.setTimeout(function(){c()},m)}function yn(){this.g=!0}yn.prototype.xa=function(){this.g=!1};function lo(c,m,_,A,L,H){c.info(function(){if(c.g)if(H)for(var te="",Ve=H.split("&"),_t=0;_t<Ve.length;_t++){var Pe=Ve[_t].split("=");if(1<Pe.length){var It=Pe[0];Pe=Pe[1];var vt=It.split("_");te=2<=vt.length&&vt[1]=="type"?te+(It+"="+Pe+"&"):te+(It+"=redacted&")}}else te=null;else te=H;return"XMLHTTP REQ ("+A+") [attempt "+L+"]: "+m+`
`+_+`
`+te})}function Th(c,m,_,A,L,H,te){c.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+L+"]: "+m+`
`+_+`
`+H+" "+te})}function Qi(c,m,_,A){c.info(function(){return"XMLHTTP TEXT ("+m+"): "+Yr(c,_)+(A?" "+A:"")})}function Kl(c,m){c.info(function(){return"TIMEOUT: "+m})}yn.prototype.info=function(){};function Yr(c,m){if(!c.g)return m;if(!m)return null;try{var _=JSON.parse(m);if(_){for(c=0;c<_.length;c++)if(Array.isArray(_[c])){var A=_[c];if(!(2>A.length)){var L=A[1];if(Array.isArray(L)&&!(1>L.length)){var H=L[0];if(H!="noop"&&H!="stop"&&H!="close")for(var te=1;te<L.length;te++)L[te]=""}}}}return Nn(_)}catch{return m}}var Ki={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},di={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},qn;function Hn(){}Z(Hn,io),Hn.prototype.g=function(){return new XMLHttpRequest},Hn.prototype.i=function(){return{}},qn=new Hn;function $t(c,m,_,A){this.j=c,this.i=m,this.l=_,this.R=A||1,this.U=new Gr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new lt}function lt(){this.i=null,this.g="",this.h=!1}var uo={},ks={};function Dn(c,m,_){c.L=1,c.v=Jr(on(m)),c.m=_,c.P=!0,mi(c,null)}function mi(c,m){c.F=Date.now(),Xr(c),c.A=on(c.v);var _=c.A,A=c.R;Array.isArray(A)||(A=[String(A)]),go(_.i,"t",A),c.C=0,_=c.j.J,c.h=new lt,c.g=uu(c.j,_?m:null,!c.m),0<c.O&&(c.M=new Eh(x(c.Y,c,c.g),c.O)),m=c.U,_=c.g,A=c.ca;var L="readystatechange";Array.isArray(L)||(L&&(Fr[0]=L.toString()),L=Fr);for(var H=0;H<L.length;H++){var te=Hl(_,L[H],A||m.handleEvent,!1,m.h||m);if(!te)break;m.g[te.key]=te}m=c.H?b(c.H):{},c.m?(c.u||(c.u="POST"),m["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,m)):(c.u="GET",c.g.ea(c.A,c.u,null,m)),Fi(),lo(c.i,c.u,c.A,c.l,c.R,c.m)}$t.prototype.ca=function(c){c=c.target;const m=this.M;m&&Tn(c)==3?m.j():this.Y(c)},$t.prototype.Y=function(c){try{if(c==this.g)e:{const vt=Tn(this.g);var m=this.g.Ba();const Ai=this.g.Z();if(!(3>vt)&&(vt!=3||this.g&&(this.h.h||this.g.oa()||tu(this.g)))){this.J||vt!=4||m==7||(m==8||0>=Ai?Fi(3):Fi(2)),Yi(this);var _=this.g.Z();this.X=_;t:if(Yl(this)){var A=tu(this.g);c="";var L=A.length,H=Tn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Vt(this),Gn(this);var te="";break t}this.h.i=new p.TextDecoder}for(m=0;m<L;m++)this.h.h=!0,c+=this.h.i.decode(A[m],{stream:!(H&&m==L-1)});A.length=0,this.h.g+=c,this.C=0,te=this.h.g}else te=this.g.oa();if(this.o=_==200,Th(this.i,this.u,this.A,this.l,this.R,vt,_),this.o){if(this.T&&!this.K){t:{if(this.g){var Ve,_t=this.g;if((Ve=_t.g?_t.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!se(Ve)){var Pe=Ve;break t}}Pe=null}if(_=Pe)Qi(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,$r(this,_);else{this.o=!1,this.s=3,Je(12),Vt(this),Gn(this);break e}}if(this.P){_=!0;let Pt;for(;!this.J&&this.C<te.length;)if(Pt=Xl(this,te),Pt==ks){vt==4&&(this.s=4,Je(14),_=!1),Qi(this.i,this.l,null,"[Incomplete Response]");break}else if(Pt==uo){this.s=4,Je(15),Qi(this.i,this.l,te,"[Invalid Chunk]"),_=!1;break}else Qi(this.i,this.l,Pt,null),$r(this,Pt);if(Yl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),vt!=4||te.length!=0||this.h.h||(this.s=1,Je(16),_=!1),this.o=this.o&&_,!_)Qi(this.i,this.l,te,"[Invalid Chunked Response]"),Vt(this),Gn(this);else if(0<te.length&&!this.W){this.W=!0;var It=this.j;It.g==this&&It.ba&&!It.M&&(It.j.info("Great, no buffering proxy detected. Bytes received: "+te.length),os(It),It.M=!0,Je(11))}}else Qi(this.i,this.l,te,null),$r(this,te);vt==4&&Vt(this),this.o&&!this.J&&(vt==4?au(this.j,this):(this.o=!1,Xr(this)))}else Rh(this.g),_==400&&0<te.indexOf("Unknown SID")?(this.s=3,Je(12)):(this.s=0,Je(13)),Vt(this),Gn(this)}}}catch{}finally{}};function Yl(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function Xl(c,m){var _=c.C,A=m.indexOf(`
`,_);return A==-1?ks:(_=Number(m.substring(_,A)),isNaN(_)?uo:(A+=1,A+_>m.length?ks:(m=m.slice(A,A+_),c.C=A+_,m)))}$t.prototype.cancel=function(){this.J=!0,Vt(this)};function Xr(c){c.S=Date.now()+c.I,$l(c,c.I)}function $l(c,m){if(c.B!=null)throw Error("WatchDog timer not null");c.B=ft(x(c.ba,c),m)}function Yi(c){c.B&&(p.clearTimeout(c.B),c.B=null)}$t.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(Kl(this.i,this.A),this.L!=2&&(Fi(),Je(17)),Vt(this),this.s=2,Gn(this)):$l(this,this.S-c)};function Gn(c){c.j.G==0||c.J||au(c.j,c)}function Vt(c){Yi(c);var m=c.M;m&&typeof m.ma=="function"&&m.ma(),c.M=null,Qr(c.U),c.g&&(m=c.g,c.g=null,m.abort(),m.ma())}function $r(c,m){try{var _=c.j;if(_.G!=0&&(_.g==c||co(_.h,c))){if(!c.K&&co(_.h,c)&&_.G==3){try{var A=_.Da.g.parse(m)}catch{A=null}if(Array.isArray(A)&&A.length==3){var L=A;if(L[0]==0){e:if(!_.u){if(_.g)if(_.g.F+3e3<c.F)$s(_),Ys(_);else break e;To(_),Je(18)}}else _.za=L[1],0<_.za-_.T&&37500>L[2]&&_.F&&_.v==0&&!_.C&&(_.C=ft(x(_.Za,_),6e3));if(1>=zs(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else Ti(_,11)}else if((c.K||_.g==c)&&$s(_),!se(m))for(L=_.Da.g.parse(m),m=0;m<L.length;m++){let Pe=L[m];if(_.T=Pe[0],Pe=Pe[1],_.G==2)if(Pe[0]=="c"){_.K=Pe[1],_.ia=Pe[2];const It=Pe[3];It!=null&&(_.la=It,_.j.info("VER="+_.la));const vt=Pe[4];vt!=null&&(_.Aa=vt,_.j.info("SVER="+_.Aa));const Ai=Pe[5];Ai!=null&&typeof Ai=="number"&&0<Ai&&(A=1.5*Ai,_.L=A,_.j.info("backChannelRequestTimeoutMs_="+A)),A=_;const Pt=c.g;if(Pt){const Zn=Pt.g?Pt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Zn){var H=A.h;H.g||Zn.indexOf("spdy")==-1&&Zn.indexOf("quic")==-1&&Zn.indexOf("h2")==-1||(H.j=H.l,H.g=new Set,H.h&&(Bs(H,H.h),H.h=null))}if(A.D){const So=Pt.g?Pt.g.getResponseHeader("X-HTTP-Session-Id"):null;So&&(A.ya=So,Qe(A.I,A.D,So))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-c.F,_.j.info("Handshake RTT: "+_.R+"ms")),A=_;var te=c;if(A.qa=lu(A,A.J?A.ia:null,A.W),te.K){Zt(A.h,te);var Ve=te,_t=A.L;_t&&(Ve.I=_t),Ve.B&&(Yi(Ve),Xr(Ve)),A.g=te}else ru(A);0<_.i.length&&Xs(_)}else Pe[0]!="stop"&&Pe[0]!="close"||Ti(_,7);else _.G==3&&(Pe[0]=="stop"||Pe[0]=="close"?Pe[0]=="stop"?Ti(_,7):vo(_):Pe[0]!="noop"&&_.l&&_.l.ta(Pe),_.v=0)}}Fi(4)}catch{}}var Zl=class{constructor(c,m){this.g=c,this.map=m}};function pi(c){this.l=c||10,p.PerformanceNavigationTiming?(c=p.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(p.chrome&&p.chrome.loadTimes&&p.chrome.loadTimes()&&p.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function js(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function zs(c){return c.h?1:c.g?c.g.size:0}function co(c,m){return c.h?c.h==m:c.g?c.g.has(m):!1}function Bs(c,m){c.g?c.g.add(m):c.h=m}function Zt(c,m){c.h&&c.h==m?c.h=null:c.g&&c.g.has(m)&&c.g.delete(m)}pi.prototype.cancel=function(){if(this.i=ho(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function ho(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let m=c.i;for(const _ of c.g.values())m=m.concat(_.D);return m}return F(c.i)}function Ah(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(g(c)){for(var m=[],_=c.length,A=0;A<_;A++)m.push(c[A]);return m}m=[],_=0;for(A in c)m[_++]=c[A];return m}function qs(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(g(c)||typeof c=="string"){var m=[];c=c.length;for(var _=0;_<c;_++)m.push(_);return m}m=[],_=0;for(const A in c)m[_++]=A;return m}}}function fo(c,m){if(c.forEach&&typeof c.forEach=="function")c.forEach(m,void 0);else if(g(c)||typeof c=="string")Array.prototype.forEach.call(c,m,void 0);else for(var _=qs(c),A=Ah(c),L=A.length,H=0;H<L;H++)m.call(void 0,A[H],_&&_[H],c)}var Zr=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Sh(c,m){if(c){c=c.split("&");for(var _=0;_<c.length;_++){var A=c[_].indexOf("="),L=null;if(0<=A){var H=c[_].substring(0,A);L=c[_].substring(A+1)}else H=c[_];m(H,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function dt(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof dt){this.h=c.h,Wr(this,c.j),this.o=c.o,this.g=c.g,Xi(this,c.s),this.l=c.l;var m=c.i,_=new yi;_.i=m.i,m.g&&(_.g=new Map(m.g),_.h=m.h),gi(this,_),this.m=c.m}else c&&(m=String(c).match(Zr))?(this.h=!1,Wr(this,m[1]||"",!0),this.o=_n(m[2]||""),this.g=_n(m[3]||"",!0),Xi(this,m[4]),this.l=_n(m[5]||"",!0),gi(this,m[6]||"",!0),this.m=_n(m[7]||"")):(this.h=!1,this.i=new yi(null,this.h))}dt.prototype.toString=function(){var c=[],m=this.j;m&&c.push(es(m,mo,!0),":");var _=this.g;return(_||m=="file")&&(c.push("//"),(m=this.o)&&c.push(es(m,mo,!0),"@"),c.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&c.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&c.push("/"),c.push(es(_,_.charAt(0)=="/"?bh:po,!0))),(_=this.i.toString())&&c.push("?",_),(_=this.m)&&c.push("#",es(_,Hs)),c.join("")};function on(c){return new dt(c)}function Wr(c,m,_){c.j=_?_n(m,!0):m,c.j&&(c.j=c.j.replace(/:$/,""))}function Xi(c,m){if(m){if(m=Number(m),isNaN(m)||0>m)throw Error("Bad port number "+m);c.s=m}else c.s=null}function gi(c,m,_){m instanceof yi?(c.i=m,Jl(c.i,c.h)):(_||(m=es(m,wh)),c.i=new yi(m,c.h))}function Qe(c,m,_){c.i.set(m,_)}function Jr(c){return Qe(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function _n(c,m){return c?m?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function es(c,m,_){return typeof c=="string"?(c=encodeURI(c).replace(m,Wl),_&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function Wl(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var mo=/[#\/\?@]/g,po=/[#\?:]/g,bh=/[#\?]/g,wh=/[#\?@]/g,Hs=/#/g;function yi(c,m){this.h=this.g=null,this.i=c||null,this.j=!!m}function vn(c){c.g||(c.g=new Map,c.h=0,c.i&&Sh(c.i,function(m,_){c.add(decodeURIComponent(m.replace(/\+/g," ")),_)}))}r=yi.prototype,r.add=function(c,m){vn(this),this.i=null,c=Fn(this,c);var _=this.g.get(c);return _||this.g.set(c,_=[]),_.push(m),this.h+=1,this};function _i(c,m){vn(c),m=Fn(c,m),c.g.has(m)&&(c.i=null,c.h-=c.g.get(m).length,c.g.delete(m))}function vi(c,m){return vn(c),m=Fn(c,m),c.g.has(m)}r.forEach=function(c,m){vn(this),this.g.forEach(function(_,A){_.forEach(function(L){c.call(m,L,A,this)},this)},this)},r.na=function(){vn(this);const c=Array.from(this.g.values()),m=Array.from(this.g.keys()),_=[];for(let A=0;A<m.length;A++){const L=c[A];for(let H=0;H<L.length;H++)_.push(m[A])}return _},r.V=function(c){vn(this);let m=[];if(typeof c=="string")vi(this,c)&&(m=m.concat(this.g.get(Fn(this,c))));else{c=Array.from(this.g.values());for(let _=0;_<c.length;_++)m=m.concat(c[_])}return m},r.set=function(c,m){return vn(this),this.i=null,c=Fn(this,c),vi(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[m]),this.h+=1,this},r.get=function(c,m){return c?(c=this.V(c),0<c.length?String(c[0]):m):m};function go(c,m,_){_i(c,m),0<_.length&&(c.i=null,c.g.set(Fn(c,m),F(_)),c.h+=_.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],m=Array.from(this.g.keys());for(var _=0;_<m.length;_++){var A=m[_];const H=encodeURIComponent(String(A)),te=this.V(A);for(A=0;A<te.length;A++){var L=H;te[A]!==""&&(L+="="+encodeURIComponent(String(te[A]))),c.push(L)}}return this.i=c.join("&")};function Fn(c,m){return m=String(m),c.j&&(m=m.toLowerCase()),m}function Jl(c,m){m&&!c.j&&(vn(c),c.i=null,c.g.forEach(function(_,A){var L=A.toLowerCase();A!=L&&(_i(this,A),go(this,L,_))},c)),c.j=m}function ts(c,m){const _=new yn;if(p.Image){const A=new Image;A.onload=G(En,_,"TestLoadImage: loaded",!0,m,A),A.onerror=G(En,_,"TestLoadImage: error",!1,m,A),A.onabort=G(En,_,"TestLoadImage: abort",!1,m,A),A.ontimeout=G(En,_,"TestLoadImage: timeout",!1,m,A),p.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=c}else m(!1)}function On(c,m){const _=new yn,A=new AbortController,L=setTimeout(()=>{A.abort(),En(_,"TestPingServer: timeout",!1,m)},1e4);fetch(c,{signal:A.signal}).then(H=>{clearTimeout(L),H.ok?En(_,"TestPingServer: ok",!0,m):En(_,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(L),En(_,"TestPingServer: error",!1,m)})}function En(c,m,_,A,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),A(_)}catch{}}function ns(){this.g=new Kr}function Qn(c,m,_){const A=_||"";try{fo(c,function(L,H){let te=L;y(L)&&(te=Nn(L)),m.push(A+H+"="+encodeURIComponent(te))})}catch(L){throw m.push(A+"type="+encodeURIComponent("_badmap")),L}}function $i(c){this.l=c.Ub||null,this.j=c.eb||!1}Z($i,io),$i.prototype.g=function(){return new Ei(this.l,this.j)},$i.prototype.i=function(c){return function(){return c}}({});function Ei(c,m){st.call(this),this.D=c,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}Z(Ei,st),r=Ei.prototype,r.open=function(c,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=m,this.readyState=1,Yn(this)},r.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const m={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(m.body=c),(this.D||p).fetch(new Request(this.A,m)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Kn(this)),this.readyState=0},r.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Yn(this)),this.g&&(this.readyState=3,Yn(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof p.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;yo(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function yo(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}r.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var m=c.value?c.value:new Uint8Array(0);(m=this.v.decode(m,{stream:!c.done}))&&(this.response=this.responseText+=m)}c.done?Kn(this):Yn(this),this.readyState==3&&yo(this)}},r.Ra=function(c){this.g&&(this.response=this.responseText=c,Kn(this))},r.Qa=function(c){this.g&&(this.response=c,Kn(this))},r.ga=function(){this.g&&Kn(this)};function Kn(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Yn(c)}r.setRequestHeader=function(c,m){this.u.append(c,m)},r.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],m=this.h.entries();for(var _=m.next();!_.done;)_=_.value,c.push(_[0]+": "+_[1]),_=m.next();return c.join(`\r
`)};function Yn(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Ei.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function _o(c){let m="";return Me(c,function(_,A){m+=A,m+=":",m+=_,m+=`\r
`}),m}function Rt(c,m,_){e:{for(A in _){var A=!1;break e}A=!0}A||(_=_o(_),typeof c=="string"?_!=null&&encodeURIComponent(String(_)):Qe(c,m,_))}function Be(c){st.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}Z(Be,st);var Gs=/^https?$/i,is=["POST","PUT"];r=Be.prototype,r.Ha=function(c){this.J=c},r.ea=function(c,m,_,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);m=m?m.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():qn.g(),this.v=this.o?ro(this.o):ro(qn),this.g.onreadystatechange=x(this.Ea,this);try{this.B=!0,this.g.open(m,String(c),!0),this.B=!1}catch(H){eu(this,H);return}if(c=_||"",_=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var L in A)_.set(L,A[L]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const H of A.keys())_.set(H,A.get(H));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(_.keys()).find(H=>H.toLowerCase()=="content-type"),L=p.FormData&&c instanceof p.FormData,!(0<=Array.prototype.indexOf.call(is,m,void 0))||A||L||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[H,te]of _)this.g.setRequestHeader(H,te);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{rs(this),this.u=!0,this.g.send(c),this.u=!1}catch(H){eu(this,H)}};function eu(c,m){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=m,c.m=5,Fs(c),Xn(c)}function Fs(c){c.A||(c.A=!0,He(c,"complete"),He(c,"error"))}r.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,He(this,"complete"),He(this,"abort"),Xn(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Xn(this,!0)),Be.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?Qs(this):this.bb())},r.bb=function(){Qs(this)};function Qs(c){if(c.h&&typeof f<"u"&&(!c.v[1]||Tn(c)!=4||c.Z()!=2)){if(c.u&&Tn(c)==4)Ht(c.Ea,0,c);else if(He(c,"readystatechange"),Tn(c)==4){c.h=!1;try{const te=c.Z();e:switch(te){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var _;if(!(_=m)){var A;if(A=te===0){var L=String(c.D).match(Zr)[1]||null;!L&&p.self&&p.self.location&&(L=p.self.location.protocol.slice(0,-1)),A=!Gs.test(L?L.toLowerCase():"")}_=A}if(_)He(c,"complete"),He(c,"success");else{c.m=6;try{var H=2<Tn(c)?c.g.statusText:""}catch{H=""}c.l=H+" ["+c.Z()+"]",Fs(c)}}finally{Xn(c)}}}}function Xn(c,m){if(c.g){rs(c);const _=c.g,A=c.v[0]?()=>{}:null;c.g=null,c.v=null,m||He(c,"ready");try{_.onreadystatechange=A}catch{}}}function rs(c){c.I&&(p.clearTimeout(c.I),c.I=null)}r.isActive=function(){return!!this.g};function Tn(c){return c.g?c.g.readyState:0}r.Z=function(){try{return 2<Tn(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(c){if(this.g){var m=this.g.responseText;return c&&m.indexOf(c)==0&&(m=m.substring(c.length)),Us(m)}};function tu(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function Rh(c){const m={};c=(c.g&&2<=Tn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<c.length;A++){if(se(c[A]))continue;var _=V(c[A]);const L=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const H=m[L]||[];m[L]=H,H.push(_)}M(m,function(A){return A.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ss(c,m,_){return _&&_.internalChannelParams&&_.internalChannelParams[c]||m}function Ks(c){this.Aa=0,this.i=[],this.j=new yn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ss("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ss("baseRetryDelayMs",5e3,c),this.cb=ss("retryDelaySeedMs",1e4,c),this.Wa=ss("forwardChannelMaxRetries",2,c),this.wa=ss("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new pi(c&&c.concurrentRequestLimit),this.Da=new ns,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=Ks.prototype,r.la=8,r.G=1,r.connect=function(c,m,_,A){Je(0),this.W=c,this.H=m||{},_&&A!==void 0&&(this.H.OSID=_,this.H.OAID=A),this.F=this.X,this.I=lu(this,null,this.W),Xs(this)};function vo(c){if(nu(c),c.G==3){var m=c.U++,_=on(c.I);if(Qe(_,"SID",c.K),Qe(_,"RID",m),Qe(_,"TYPE","terminate"),as(c,_),m=new $t(c,c.j,m),m.L=2,m.v=Jr(on(_)),_=!1,p.navigator&&p.navigator.sendBeacon)try{_=p.navigator.sendBeacon(m.v.toString(),"")}catch{}!_&&p.Image&&(new Image().src=m.v,_=!0),_||(m.g=uu(m.j,null),m.g.ea(m.v)),m.F=Date.now(),Xr(m)}ou(c)}function Ys(c){c.g&&(os(c),c.g.cancel(),c.g=null)}function nu(c){Ys(c),c.u&&(p.clearTimeout(c.u),c.u=null),$s(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&p.clearTimeout(c.s),c.s=null)}function Xs(c){if(!js(c.h)&&!c.s){c.s=!0;var m=c.Ga;ne||N(),ce||(ne(),ce=!0),je.add(m,c),c.B=0}}function Ih(c,m){return zs(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=m.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=ft(x(c.Ga,c,m),Ao(c,c.B)),c.B++,!0)}r.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const L=new $t(this,this.j,c);let H=this.o;if(this.S&&(H?(H=b(H),O(H,this.S)):H=this.S),this.m!==null||this.O||(L.H=H,H=null),this.P)e:{for(var m=0,_=0;_<this.i.length;_++){t:{var A=this.i[_];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(m+=A,4096<m){m=_;break e}if(m===4096||_===this.i.length-1){m=_+1;break e}}m=1e3}else m=1e3;m=iu(this,L,m),_=on(this.I),Qe(_,"RID",c),Qe(_,"CVER",22),this.D&&Qe(_,"X-HTTP-Session-Id",this.D),as(this,_),H&&(this.O?m="headers="+encodeURIComponent(String(_o(H)))+"&"+m:this.m&&Rt(_,this.m,H)),Bs(this.h,L),this.Ua&&Qe(_,"TYPE","init"),this.P?(Qe(_,"$req",m),Qe(_,"SID","null"),L.T=!0,Dn(L,_,null)):Dn(L,_,m),this.G=2}}else this.G==3&&(c?Eo(this,c):this.i.length==0||js(this.h)||Eo(this))};function Eo(c,m){var _;m?_=m.l:_=c.U++;const A=on(c.I);Qe(A,"SID",c.K),Qe(A,"RID",_),Qe(A,"AID",c.T),as(c,A),c.m&&c.o&&Rt(A,c.m,c.o),_=new $t(c,c.j,_,c.B+1),c.m===null&&(_.H=c.o),m&&(c.i=m.D.concat(c.i)),m=iu(c,_,1e3),_.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),Bs(c.h,_),Dn(_,A,m)}function as(c,m){c.H&&Me(c.H,function(_,A){Qe(m,A,_)}),c.l&&fo({},function(_,A){Qe(m,A,_)})}function iu(c,m,_){_=Math.min(c.i.length,_);var A=c.l?x(c.l.Na,c.l,c):null;e:{var L=c.i;let H=-1;for(;;){const te=["count="+_];H==-1?0<_?(H=L[0].g,te.push("ofs="+H)):H=0:te.push("ofs="+H);let Ve=!0;for(let _t=0;_t<_;_t++){let Pe=L[_t].g;const It=L[_t].map;if(Pe-=H,0>Pe)H=Math.max(0,L[_t].g-100),Ve=!1;else try{Qn(It,te,"req"+Pe+"_")}catch{A&&A(It)}}if(Ve){A=te.join("&");break e}}}return c=c.i.splice(0,_),m.D=c,A}function ru(c){if(!c.g&&!c.u){c.Y=1;var m=c.Fa;ne||N(),ce||(ne(),ce=!0),je.add(m,c),c.v=0}}function To(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=ft(x(c.Fa,c),Ao(c,c.v)),c.v++,!0)}r.Fa=function(){if(this.u=null,su(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=ft(x(this.ab,this),c)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Je(10),Ys(this),su(this))};function os(c){c.A!=null&&(p.clearTimeout(c.A),c.A=null)}function su(c){c.g=new $t(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var m=on(c.qa);Qe(m,"RID","rpc"),Qe(m,"SID",c.K),Qe(m,"AID",c.T),Qe(m,"CI",c.F?"0":"1"),!c.F&&c.ja&&Qe(m,"TO",c.ja),Qe(m,"TYPE","xmlhttp"),as(c,m),c.m&&c.o&&Rt(m,c.m,c.o),c.L&&(c.g.I=c.L);var _=c.g;c=c.ia,_.L=1,_.v=Jr(on(m)),_.m=null,_.P=!0,mi(_,c)}r.Za=function(){this.C!=null&&(this.C=null,Ys(this),To(this),Je(19))};function $s(c){c.C!=null&&(p.clearTimeout(c.C),c.C=null)}function au(c,m){var _=null;if(c.g==m){$s(c),os(c),c.g=null;var A=2}else if(co(c.h,m))_=m.D,Zt(c.h,m),A=1;else return;if(c.G!=0){if(m.o)if(A==1){_=m.m?m.m.length:0,m=Date.now()-m.F;var L=c.B;A=Gi(),He(A,new yt(A,_)),Xs(c)}else ru(c);else if(L=m.s,L==3||L==0&&0<m.X||!(A==1&&Ih(c,m)||A==2&&To(c)))switch(_&&0<_.length&&(m=c.h,m.i=m.i.concat(_)),L){case 1:Ti(c,5);break;case 4:Ti(c,10);break;case 3:Ti(c,6);break;default:Ti(c,2)}}}function Ao(c,m){let _=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(_*=2),_*m}function Ti(c,m){if(c.j.info("Error code "+m),m==2){var _=x(c.fb,c),A=c.Xa;const L=!A;A=new dt(A||"//www.google.com/images/cleardot.gif"),p.location&&p.location.protocol=="http"||Wr(A,"https"),Jr(A),L?ts(A.toString(),_):On(A.toString(),_)}else Je(2);c.G=0,c.l&&c.l.sa(m),ou(c),nu(c)}r.fb=function(c){c?(this.j.info("Successfully pinged google.com"),Je(2)):(this.j.info("Failed to ping google.com"),Je(1))};function ou(c){if(c.G=0,c.ka=[],c.l){const m=ho(c.h);(m.length!=0||c.i.length!=0)&&(q(c.ka,m),q(c.ka,c.i),c.h.i.length=0,F(c.i),c.i.length=0),c.l.ra()}}function lu(c,m,_){var A=_ instanceof dt?on(_):new dt(_);if(A.g!="")m&&(A.g=m+"."+A.g),Xi(A,A.s);else{var L=p.location;A=L.protocol,m=m?m+"."+L.hostname:L.hostname,L=+L.port;var H=new dt(null);A&&Wr(H,A),m&&(H.g=m),L&&Xi(H,L),_&&(H.l=_),A=H}return _=c.D,m=c.ya,_&&m&&Qe(A,_,m),Qe(A,"VER",c.la),as(c,A),A}function uu(c,m,_){if(m&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return m=c.Ca&&!c.pa?new Be(new $i({eb:_})):new Be(c.pa),m.Ha(c.J),m}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function cu(){}r=cu.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function Zs(){}Zs.prototype.g=function(c,m){return new Wt(c,m)};function Wt(c,m){st.call(this),this.g=new Ks(m),this.l=c,this.h=m&&m.messageUrlParams||null,c=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(c?c["X-WebChannel-Content-Type"]=m.messageContentType:c={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.va&&(c?c["X-WebChannel-Client-Profile"]=m.va:c={"X-WebChannel-Client-Profile":m.va}),this.g.S=c,(c=m&&m.Sb)&&!se(c)&&(this.g.m=c),this.v=m&&m.supportsCrossDomainXhr||!1,this.u=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!se(m)&&(this.g.D=m,c=this.h,c!==null&&m in c&&(c=this.h,m in c&&delete c[m])),this.j=new $n(this)}Z(Wt,st),Wt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Wt.prototype.close=function(){vo(this.g)},Wt.prototype.o=function(c){var m=this.g;if(typeof c=="string"){var _={};_.__data__=c,c=_}else this.u&&(_={},_.__data__=Nn(c),c=_);m.i.push(new Zl(m.Ya++,c)),m.G==3&&Xs(m)},Wt.prototype.N=function(){this.g.l=null,delete this.j,vo(this.g),delete this.g,Wt.aa.N.call(this)};function hu(c){fi.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var m=c.__sm__;if(m){e:{for(const _ in m){c=_;break e}c=void 0}(this.i=c)&&(c=this.i,m=m!==null&&c in m?m[c]:void 0),this.data=m}else this.data=c}Z(hu,fi);function fu(){ao.call(this),this.status=1}Z(fu,ao);function $n(c){this.g=c}Z($n,cu),$n.prototype.ua=function(){He(this.g,"a")},$n.prototype.ta=function(c){He(this.g,new hu(c))},$n.prototype.sa=function(c){He(this.g,new fu)},$n.prototype.ra=function(){He(this.g,"b")},Zs.prototype.createWebChannel=Zs.prototype.g,Wt.prototype.send=Wt.prototype.o,Wt.prototype.open=Wt.prototype.m,Wt.prototype.close=Wt.prototype.close,W0=function(){return new Zs},Z0=function(){return Gi()},$0=Bn,Gd={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ki.NO_ERROR=0,Ki.TIMEOUT=8,Ki.HTTP_ERROR=6,bc=Ki,di.COMPLETE="complete",X0=di,so.EventType=hi,hi.OPEN="a",hi.CLOSE="b",hi.ERROR="c",hi.MESSAGE="d",st.prototype.listen=st.prototype.K,dl=so,Be.prototype.listenOnce=Be.prototype.L,Be.prototype.getLastError=Be.prototype.Ka,Be.prototype.getLastErrorCode=Be.prototype.Ba,Be.prototype.getStatus=Be.prototype.Z,Be.prototype.getResponseJson=Be.prototype.Oa,Be.prototype.getResponseText=Be.prototype.oa,Be.prototype.send=Be.prototype.ea,Be.prototype.setWithCredentials=Be.prototype.Ha,Y0=Be}).apply(typeof mc<"u"?mc:typeof self<"u"?self:typeof window<"u"?window:{});const ev="@firebase/firestore",tv="4.7.16";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Kt.UNAUTHENTICATED=new Kt(null),Kt.GOOGLE_CREDENTIALS=new Kt("google-credentials-uid"),Kt.FIRST_PARTY=new Kt("first-party-uid"),Kt.MOCK_USER=new Kt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $a="11.8.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cs=new cm("@firebase/firestore");function Ca(){return Cs.logLevel}function ae(r,...e){if(Cs.logLevel<=Ne.DEBUG){const n=e.map(Am);Cs.debug(`Firestore (${$a}): ${r}`,...n)}}function zi(r,...e){if(Cs.logLevel<=Ne.ERROR){const n=e.map(Am);Cs.error(`Firestore (${$a}): ${r}`,...n)}}function za(r,...e){if(Cs.logLevel<=Ne.WARN){const n=e.map(Am);Cs.warn(`Firestore (${$a}): ${r}`,...n)}}function Am(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ye(r,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,J0(r,s,n)}function J0(r,e,n){let s=`FIRESTORE (${$a}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw zi(s),new Error(s)}function qe(r,e,n,s){let o="Unexpected state";typeof n=="string"?o=n:s=n,r||J0(e,o,s)}function Ae(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class he extends qi{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eE{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class aR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Kt.UNAUTHENTICATED))}shutdown(){}}class oR{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class lR{constructor(e){this.t=e,this.currentUser=Kt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){qe(this.o===void 0,42304);let s=this.i;const o=g=>this.i!==s?(s=this.i,n(g)):Promise.resolve();let u=new xr;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new xr,e.enqueueRetryable(()=>o(this.currentUser))};const f=()=>{const g=u;e.enqueueRetryable(async()=>{await g.promise,await o(this.currentUser)})},p=g=>{ae("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),f())};this.t.onInit(g=>p(g)),setTimeout(()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?p(g):(ae("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new xr)}},0),f()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(s=>this.i!==e?(ae("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(qe(typeof s.accessToken=="string",31837,{l:s}),new eE(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return qe(e===null||typeof e=="string",2055,{h:e}),new Kt(e)}}class uR{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=Kt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class cR{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new uR(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Kt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class nv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class hR{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Un(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){qe(this.o===void 0,3512);const s=u=>{u.error!=null&&ae("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const f=u.token!==this.m;return this.m=u.token,ae("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?n(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>s(u))};const o=u=>{ae("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(u=>o(u)),setTimeout(()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?o(u):ae("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new nv(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(qe(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new nv(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fR(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<r;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tE(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nE{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=fR(40);for(let u=0;u<o.length;++u)s.length<20&&o[u]<n&&(s+=e.charAt(o[u]%62))}return s}}function we(r,e){return r<e?-1:r>e?1:0}function Fd(r,e){let n=0;for(;n<r.length&&n<e.length;){const s=r.codePointAt(n),o=e.codePointAt(n);if(s!==o){if(s<128&&o<128)return we(s,o);{const u=tE(),f=dR(u.encode(iv(r,n)),u.encode(iv(e,n)));return f!==0?f:we(s,o)}}n+=s>65535?2:1}return we(r.length,e.length)}function iv(r,e){return r.codePointAt(e)>65535?r.substring(e,e+2):r.substring(e,e+1)}function dR(r,e){for(let n=0;n<r.length&&n<e.length;++n)if(r[n]!==e[n])return we(r[n],e[n]);return we(r.length,e.length)}function Ba(r,e,n){return r.length===e.length&&r.every((s,o)=>n(s,e[o]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rv=-62135596800,sv=1e6;class St{static now(){return St.fromMillis(Date.now())}static fromDate(e){return St.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*sv);return new St(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new he(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new he(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<rv)throw new he(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new he(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/sv}_compareTo(e){return this.seconds===e.seconds?we(this.nanoseconds,e.nanoseconds):we(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-rv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te{static fromTimestamp(e){return new Te(e)}static min(){return new Te(new St(0,0))}static max(){return new Te(new St(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const av="__name__";class ii{constructor(e,n,s){n===void 0?n=0:n>e.length&&ye(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&ye(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return ii.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ii?e.forEach(s=>{n.push(s)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let o=0;o<s;o++){const u=ii.compareSegments(e.get(o),n.get(o));if(u!==0)return u}return we(e.length,n.length)}static compareSegments(e,n){const s=ii.isNumericId(e),o=ii.isNumericId(n);return s&&!o?-1:!s&&o?1:s&&o?ii.extractNumericId(e).compare(ii.extractNumericId(n)):Fd(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Cr.fromString(e.substring(4,e.length-2))}}class tt extends ii{construct(e,n,s){return new tt(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new he(J.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter(o=>o.length>0))}return new tt(n)}static emptyPath(){return new tt([])}}const mR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class zt extends ii{construct(e,n,s){return new zt(e,n,s)}static isValidIdentifier(e){return mR.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),zt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===av}static keyField(){return new zt([av])}static fromServerFormat(e){const n=[];let s="",o=0;const u=()=>{if(s.length===0)throw new he(J.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let f=!1;for(;o<e.length;){const p=e[o];if(p==="\\"){if(o+1===e.length)throw new he(J.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new he(J.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=g,o+=2}else p==="`"?(f=!f,o++):p!=="."||f?(s+=p,o++):(u(),o++)}if(u(),f)throw new he(J.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new zt(n)}static emptyPath(){return new zt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class de{constructor(e){this.path=e}static fromPath(e){return new de(tt.fromString(e))}static fromName(e){return new de(tt.fromString(e).popFirst(5))}static empty(){return new de(tt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&tt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return tt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new de(new tt(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rl=-1;function pR(r,e){const n=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,o=Te.fromTimestamp(s===1e9?new St(n+1,0):new St(n,s));return new Dr(o,de.empty(),e)}function gR(r){return new Dr(r.readTime,r.key,Rl)}class Dr{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new Dr(Te.min(),de.empty(),Rl)}static max(){return new Dr(Te.max(),de.empty(),Rl)}}function yR(r,e){let n=r.readTime.compareTo(e.readTime);return n!==0?n:(n=de.comparator(r.documentKey,e.documentKey),n!==0?n:we(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _R="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class vR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Za(r){if(r.code!==J.FAILED_PRECONDITION||r.message!==_R)throw r;ae("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ${constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ye(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new $((s,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(s,o)},this.catchCallback=u=>{this.wrapFailure(n,u).next(s,o)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof $?n:$.resolve(n)}catch(n){return $.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):$.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):$.reject(n)}static resolve(e){return new $((n,s)=>{n(e)})}static reject(e){return new $((n,s)=>{s(e)})}static waitFor(e){return new $((n,s)=>{let o=0,u=0,f=!1;e.forEach(p=>{++o,p.next(()=>{++u,f&&u===o&&n()},g=>s(g))}),f=!0,u===o&&n()})}static or(e){let n=$.resolve(!1);for(const s of e)n=n.next(o=>o?$.resolve(o):s());return n}static forEach(e,n){const s=[];return e.forEach((o,u)=>{s.push(n.call(this,o,u))}),this.waitFor(s)}static mapArray(e,n){return new $((s,o)=>{const u=e.length,f=new Array(u);let p=0;for(let g=0;g<u;g++){const y=g;n(e[y]).next(T=>{f[y]=T,++p,p===u&&s(f)},T=>o(T))}})}static doWhile(e,n){return new $((s,o)=>{const u=()=>{e()===!0?n().next(()=>{u()},o):s()};u()})}}function ER(r){const e=r.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Wa(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class th{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ue(s),this.ce=s=>n.writeSequenceNumber(s))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}th.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sm=-1;function nh(r){return r==null}function kc(r){return r===0&&1/r==-1/0}function TR(r){return typeof r=="number"&&Number.isInteger(r)&&!kc(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iE="";function AR(r){let e="";for(let n=0;n<r.length;n++)e.length>0&&(e=ov(e)),e=SR(r.get(n),e);return ov(e)}function SR(r,e){let n=e;const s=r.length;for(let o=0;o<s;o++){const u=r.charAt(o);switch(u){case"\0":n+="";break;case iE:n+="";break;default:n+=u}}return n}function ov(r){return r+iE+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lv(r){let e=0;for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&e++;return e}function kr(r,e){for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&e(n,r[n])}function rE(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class it{constructor(e,n){this.comparator=e,this.root=n||jt.EMPTY}insert(e,n){return new it(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,jt.BLACK,null,null))}remove(e){return new it(this.comparator,this.root.remove(e,this.comparator).copy(null,null,jt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return n+s.left.size;o<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,s)=>(e(n,s),!1))}toString(){const e=[];return this.inorderTraversal((n,s)=>(e.push(`${n}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new pc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new pc(this.root,e,this.comparator,!1)}getReverseIterator(){return new pc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new pc(this.root,e,this.comparator,!0)}}class pc{constructor(e,n,s,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=n?s(e.key,n):1,n&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class jt{constructor(e,n,s,o,u){this.key=e,this.value=n,this.color=s??jt.RED,this.left=o??jt.EMPTY,this.right=u??jt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,o,u){return new jt(e??this.key,n??this.value,s??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let o=this;const u=s(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,n,s),null):u===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return jt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return jt.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,jt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,jt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ye(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ye(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ye(27949);return e+(this.isRed()?0:1)}}jt.EMPTY=null,jt.RED=!0,jt.BLACK=!1;jt.EMPTY=new class{constructor(){this.size=0}get key(){throw ye(57766)}get value(){throw ye(16141)}get color(){throw ye(16727)}get left(){throw ye(29726)}get right(){throw ye(36894)}copy(e,n,s,o,u){return this}insert(e,n,s){return new jt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(e){this.comparator=e,this.data=new it(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,s)=>(e(n),!1))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new uv(this.data.getIterator())}getIteratorFrom(e){return new uv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(s=>{n=n.add(s)}),n}isEqual(e){if(!(e instanceof bt)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=s.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new bt(this.comparator);return n.data=e,n}}class uv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(e){this.fields=e,e.sort(zt.comparator)}static empty(){return new pn([])}unionWith(e){let n=new bt(zt.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new pn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ba(this.fields,e.fields,(n,s)=>n.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new sE("Invalid base64 string: "+u):u}}(e);return new qt(n)}static fromUint8Array(e){const n=function(o){let u="";for(let f=0;f<o.length;++f)u+=String.fromCharCode(o[f]);return u}(e);return new qt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const s=new Uint8Array(n.length);for(let o=0;o<n.length;o++)s[o]=n.charCodeAt(o);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return we(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}qt.EMPTY_BYTE_STRING=new qt("");const bR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Or(r){if(qe(!!r,39018),typeof r=="string"){let e=0;const n=bR.exec(r);if(qe(!!n,46558,{timestamp:r}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:ht(r.seconds),nanos:ht(r.nanos)}}function ht(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Mr(r){return typeof r=="string"?qt.fromBase64String(r):qt.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aE="server_timestamp",oE="__type__",lE="__previous_value__",uE="__local_write_time__";function bm(r){var e,n;return((n=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{})[oE])===null||n===void 0?void 0:n.stringValue)===aE}function ih(r){const e=r.mapValue.fields[lE];return bm(e)?ih(e):e}function Il(r){const e=Or(r.mapValue.fields[uE].timestampValue);return new St(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wR{constructor(e,n,s,o,u,f,p,g,y,T){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=o,this.ssl=u,this.forceLongPolling=f,this.autoDetectLongPolling=p,this.longPollingOptions=g,this.useFetchStreams=y,this.isUsingEmulator=T}}const jc="(default)";class Cl{constructor(e,n){this.projectId=e,this.database=n||jc}static empty(){return new Cl("","")}get isDefaultDatabase(){return this.database===jc}isEqual(e){return e instanceof Cl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cE="__type__",RR="__max__",gc={mapValue:{}},hE="__vector__",zc="value";function Vr(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?bm(r)?4:CR(r)?9007199254740991:IR(r)?10:11:ye(28295,{value:r})}function li(r,e){if(r===e)return!0;const n=Vr(r);if(n!==Vr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return Il(r).isEqual(Il(e));case 3:return function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const f=Or(o.timestampValue),p=Or(u.timestampValue);return f.seconds===p.seconds&&f.nanos===p.nanos}(r,e);case 5:return r.stringValue===e.stringValue;case 6:return function(o,u){return Mr(o.bytesValue).isEqual(Mr(u.bytesValue))}(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return function(o,u){return ht(o.geoPointValue.latitude)===ht(u.geoPointValue.latitude)&&ht(o.geoPointValue.longitude)===ht(u.geoPointValue.longitude)}(r,e);case 2:return function(o,u){if("integerValue"in o&&"integerValue"in u)return ht(o.integerValue)===ht(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const f=ht(o.doubleValue),p=ht(u.doubleValue);return f===p?kc(f)===kc(p):isNaN(f)&&isNaN(p)}return!1}(r,e);case 9:return Ba(r.arrayValue.values||[],e.arrayValue.values||[],li);case 10:case 11:return function(o,u){const f=o.mapValue.fields||{},p=u.mapValue.fields||{};if(lv(f)!==lv(p))return!1;for(const g in f)if(f.hasOwnProperty(g)&&(p[g]===void 0||!li(f[g],p[g])))return!1;return!0}(r,e);default:return ye(52216,{left:r})}}function xl(r,e){return(r.values||[]).find(n=>li(n,e))!==void 0}function qa(r,e){if(r===e)return 0;const n=Vr(r),s=Vr(e);if(n!==s)return we(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return we(r.booleanValue,e.booleanValue);case 2:return function(u,f){const p=ht(u.integerValue||u.doubleValue),g=ht(f.integerValue||f.doubleValue);return p<g?-1:p>g?1:p===g?0:isNaN(p)?isNaN(g)?0:-1:1}(r,e);case 3:return cv(r.timestampValue,e.timestampValue);case 4:return cv(Il(r),Il(e));case 5:return Fd(r.stringValue,e.stringValue);case 6:return function(u,f){const p=Mr(u),g=Mr(f);return p.compareTo(g)}(r.bytesValue,e.bytesValue);case 7:return function(u,f){const p=u.split("/"),g=f.split("/");for(let y=0;y<p.length&&y<g.length;y++){const T=we(p[y],g[y]);if(T!==0)return T}return we(p.length,g.length)}(r.referenceValue,e.referenceValue);case 8:return function(u,f){const p=we(ht(u.latitude),ht(f.latitude));return p!==0?p:we(ht(u.longitude),ht(f.longitude))}(r.geoPointValue,e.geoPointValue);case 9:return hv(r.arrayValue,e.arrayValue);case 10:return function(u,f){var p,g,y,T;const I=u.fields||{},x=f.fields||{},G=(p=I[zc])===null||p===void 0?void 0:p.arrayValue,Z=(g=x[zc])===null||g===void 0?void 0:g.arrayValue,F=we(((y=G==null?void 0:G.values)===null||y===void 0?void 0:y.length)||0,((T=Z==null?void 0:Z.values)===null||T===void 0?void 0:T.length)||0);return F!==0?F:hv(G,Z)}(r.mapValue,e.mapValue);case 11:return function(u,f){if(u===gc.mapValue&&f===gc.mapValue)return 0;if(u===gc.mapValue)return 1;if(f===gc.mapValue)return-1;const p=u.fields||{},g=Object.keys(p),y=f.fields||{},T=Object.keys(y);g.sort(),T.sort();for(let I=0;I<g.length&&I<T.length;++I){const x=Fd(g[I],T[I]);if(x!==0)return x;const G=qa(p[g[I]],y[T[I]]);if(G!==0)return G}return we(g.length,T.length)}(r.mapValue,e.mapValue);default:throw ye(23264,{Pe:n})}}function cv(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return we(r,e);const n=Or(r),s=Or(e),o=we(n.seconds,s.seconds);return o!==0?o:we(n.nanos,s.nanos)}function hv(r,e){const n=r.values||[],s=e.values||[];for(let o=0;o<n.length&&o<s.length;++o){const u=qa(n[o],s[o]);if(u)return u}return we(n.length,s.length)}function Ha(r){return Qd(r)}function Qd(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?function(n){const s=Or(n);return`time(${s.seconds},${s.nanos})`}(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?function(n){return Mr(n).toBase64()}(r.bytesValue):"referenceValue"in r?function(n){return de.fromName(n).toString()}(r.referenceValue):"geoPointValue"in r?function(n){return`geo(${n.latitude},${n.longitude})`}(r.geoPointValue):"arrayValue"in r?function(n){let s="[",o=!0;for(const u of n.values||[])o?o=!1:s+=",",s+=Qd(u);return s+"]"}(r.arrayValue):"mapValue"in r?function(n){const s=Object.keys(n.fields||{}).sort();let o="{",u=!0;for(const f of s)u?u=!1:o+=",",o+=`${f}:${Qd(n.fields[f])}`;return o+"}"}(r.mapValue):ye(61005,{value:r})}function wc(r){switch(Vr(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=ih(r);return e?16+wc(e):16;case 5:return 2*r.stringValue.length;case 6:return Mr(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((o,u)=>o+wc(u),0)}(r.arrayValue);case 10:case 11:return function(s){let o=0;return kr(s.fields,(u,f)=>{o+=u.length+wc(f)}),o}(r.mapValue);default:throw ye(13486,{value:r})}}function Kd(r){return!!r&&"integerValue"in r}function wm(r){return!!r&&"arrayValue"in r}function fv(r){return!!r&&"nullValue"in r}function dv(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function Rc(r){return!!r&&"mapValue"in r}function IR(r){var e,n;return((n=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{})[cE])===null||n===void 0?void 0:n.stringValue)===hE}function _l(r){if(r.geoPointValue)return{geoPointValue:Object.assign({},r.geoPointValue)};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:Object.assign({},r.timestampValue)};if(r.mapValue){const e={mapValue:{fields:{}}};return kr(r.mapValue.fields,(n,s)=>e.mapValue.fields[n]=_l(s)),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(r.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=_l(r.arrayValue.values[n]);return e}return Object.assign({},r)}function CR(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===RR}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(e){this.value=e}static empty(){return new sn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!Rc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=_l(n)}setAll(e){let n=zt.emptyPath(),s={},o=[];e.forEach((f,p)=>{if(!n.isImmediateParentOf(p)){const g=this.getFieldsMap(n);this.applyChanges(g,s,o),s={},o=[],n=p.popLast()}f?s[p.lastSegment()]=_l(f):o.push(p.lastSegment())});const u=this.getFieldsMap(n);this.applyChanges(u,s,o)}delete(e){const n=this.field(e.popLast());Rc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return li(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=n.mapValue.fields[e.get(s)];Rc(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,s){kr(n,(o,u)=>e[o]=u);for(const o of s)delete e[o]}clone(){return new sn(_l(this.value))}}function fE(r){const e=[];return kr(r.fields,(n,s)=>{const o=new zt([n]);if(Rc(s)){const u=fE(s.mapValue).fields;if(u.length===0)e.push(o);else for(const f of u)e.push(o.child(f))}else e.push(o)}),new pn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yt{constructor(e,n,s,o,u,f,p){this.key=e,this.documentType=n,this.version=s,this.readTime=o,this.createTime=u,this.data=f,this.documentState=p}static newInvalidDocument(e){return new Yt(e,0,Te.min(),Te.min(),Te.min(),sn.empty(),0)}static newFoundDocument(e,n,s,o){return new Yt(e,1,n,Te.min(),s,o,0)}static newNoDocument(e,n){return new Yt(e,2,n,Te.min(),Te.min(),sn.empty(),0)}static newUnknownDocument(e,n){return new Yt(e,3,n,Te.min(),Te.min(),sn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Te.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=sn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=sn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Te.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Yt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Yt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bc{constructor(e,n){this.position=e,this.inclusive=n}}function mv(r,e,n){let s=0;for(let o=0;o<r.position.length;o++){const u=e[o],f=r.position[o];if(u.field.isKeyField()?s=de.comparator(de.fromName(f.referenceValue),n.key):s=qa(f,n.data.field(u.field)),u.dir==="desc"&&(s*=-1),s!==0)break}return s}function pv(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let n=0;n<r.position.length;n++)if(!li(r.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qc{constructor(e,n="asc"){this.field=e,this.dir=n}}function xR(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dE{}class At extends dE{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new DR(e,n,s):n==="array-contains"?new VR(e,s):n==="in"?new PR(e,s):n==="not-in"?new UR(e,s):n==="array-contains-any"?new LR(e,s):new At(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new OR(e,s):new MR(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(qa(n,this.value)):n!==null&&Vr(this.value)===Vr(n)&&this.matchesComparison(qa(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ye(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ui extends dE{constructor(e,n){super(),this.filters=e,this.op=n,this.Te=null}static create(e,n){return new ui(e,n)}matches(e){return mE(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function mE(r){return r.op==="and"}function pE(r){return NR(r)&&mE(r)}function NR(r){for(const e of r.filters)if(e instanceof ui)return!1;return!0}function Yd(r){if(r instanceof At)return r.field.canonicalString()+r.op.toString()+Ha(r.value);if(pE(r))return r.filters.map(e=>Yd(e)).join(",");{const e=r.filters.map(n=>Yd(n)).join(",");return`${r.op}(${e})`}}function gE(r,e){return r instanceof At?function(s,o){return o instanceof At&&s.op===o.op&&s.field.isEqual(o.field)&&li(s.value,o.value)}(r,e):r instanceof ui?function(s,o){return o instanceof ui&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce((u,f,p)=>u&&gE(f,o.filters[p]),!0):!1}(r,e):void ye(19439)}function yE(r){return r instanceof At?function(n){return`${n.field.canonicalString()} ${n.op} ${Ha(n.value)}`}(r):r instanceof ui?function(n){return n.op.toString()+" {"+n.getFilters().map(yE).join(" ,")+"}"}(r):"Filter"}class DR extends At{constructor(e,n,s){super(e,n,s),this.key=de.fromName(s.referenceValue)}matches(e){const n=de.comparator(e.key,this.key);return this.matchesComparison(n)}}class OR extends At{constructor(e,n){super(e,"in",n),this.keys=_E("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class MR extends At{constructor(e,n){super(e,"not-in",n),this.keys=_E("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function _E(r,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(s=>de.fromName(s.referenceValue))}class VR extends At{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return wm(n)&&xl(n.arrayValue,this.value)}}class PR extends At{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&xl(this.value.arrayValue,n)}}class UR extends At{constructor(e,n){super(e,"not-in",n)}matches(e){if(xl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!xl(this.value.arrayValue,n)}}class LR extends At{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!wm(n)||!n.arrayValue.values)&&n.arrayValue.values.some(s=>xl(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kR{constructor(e,n=null,s=[],o=[],u=null,f=null,p=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=o,this.limit=u,this.startAt=f,this.endAt=p,this.Ie=null}}function gv(r,e=null,n=[],s=[],o=null,u=null,f=null){return new kR(r,e,n,s,o,u,f)}function Rm(r){const e=Ae(r);if(e.Ie===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(s=>Yd(s)).join(","),n+="|ob:",n+=e.orderBy.map(s=>function(u){return u.field.canonicalString()+u.dir}(s)).join(","),nh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(s=>Ha(s)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(s=>Ha(s)).join(",")),e.Ie=n}return e.Ie}function Im(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<r.orderBy.length;n++)if(!xR(r.orderBy[n],e.orderBy[n]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let n=0;n<r.filters.length;n++)if(!gE(r.filters[n],e.filters[n]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!pv(r.startAt,e.startAt)&&pv(r.endAt,e.endAt)}function Xd(r){return de.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rh{constructor(e,n=null,s=[],o=[],u=null,f="F",p=null,g=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=o,this.limit=u,this.limitType=f,this.startAt=p,this.endAt=g,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function jR(r,e,n,s,o,u,f,p){return new rh(r,e,n,s,o,u,f,p)}function vE(r){return new rh(r)}function yv(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function zR(r){return r.collectionGroup!==null}function vl(r){const e=Ae(r);if(e.Ee===null){e.Ee=[];const n=new Set;for(const u of e.explicitOrderBy)e.Ee.push(u),n.add(u.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(f){let p=new bt(zt.comparator);return f.filters.forEach(g=>{g.getFlattenedFilters().forEach(y=>{y.isInequality()&&(p=p.add(y.field))})}),p})(e).forEach(u=>{n.has(u.canonicalString())||u.isKeyField()||e.Ee.push(new qc(u,s))}),n.has(zt.keyField().canonicalString())||e.Ee.push(new qc(zt.keyField(),s))}return e.Ee}function ai(r){const e=Ae(r);return e.de||(e.de=BR(e,vl(r))),e.de}function BR(r,e){if(r.limitType==="F")return gv(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map(o=>{const u=o.dir==="desc"?"asc":"desc";return new qc(o.field,u)});const n=r.endAt?new Bc(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new Bc(r.startAt.position,r.startAt.inclusive):null;return gv(r.path,r.collectionGroup,e,r.filters,r.limit,n,s)}}function $d(r,e,n){return new rh(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,n,r.startAt,r.endAt)}function sh(r,e){return Im(ai(r),ai(e))&&r.limitType===e.limitType}function EE(r){return`${Rm(ai(r))}|lt:${r.limitType}`}function xa(r){return`Query(target=${function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map(o=>yE(o)).join(", ")}]`),nh(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map(o=>function(f){return`${f.field.canonicalString()} (${f.dir})`}(o)).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map(o=>Ha(o)).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map(o=>Ha(o)).join(",")),`Target(${s})`}(ai(r))}; limitType=${r.limitType})`}function ah(r,e){return e.isFoundDocument()&&function(s,o){const u=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(u):de.isDocumentKey(s.path)?s.path.isEqual(u):s.path.isImmediateParentOf(u)}(r,e)&&function(s,o){for(const u of vl(s))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0}(r,e)&&function(s,o){for(const u of s.filters)if(!u.matches(o))return!1;return!0}(r,e)&&function(s,o){return!(s.startAt&&!function(f,p,g){const y=mv(f,p,g);return f.inclusive?y<=0:y<0}(s.startAt,vl(s),o)||s.endAt&&!function(f,p,g){const y=mv(f,p,g);return f.inclusive?y>=0:y>0}(s.endAt,vl(s),o))}(r,e)}function qR(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function TE(r){return(e,n)=>{let s=!1;for(const o of vl(r)){const u=HR(o,e,n);if(u!==0)return u;s=s||o.field.isKeyField()}return 0}}function HR(r,e,n){const s=r.field.isKeyField()?de.comparator(e.key,n.key):function(u,f,p){const g=f.data.field(u),y=p.data.field(u);return g!==null&&y!==null?qa(g,y):ye(42886)}(r.field,e,n);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return ye(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Os{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[o,u]of s)if(this.equalsFn(o,e))return u}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[n]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){kr(this.inner,(n,s)=>{for(const[o,u]of s)e(o,u)})}isEmpty(){return rE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GR=new it(de.comparator);function Bi(){return GR}const AE=new it(de.comparator);function ml(...r){let e=AE;for(const n of r)e=e.insert(n.key,n);return e}function SE(r){let e=AE;return r.forEach((n,s)=>e=e.insert(n,s.overlayedDocument)),e}function bs(){return El()}function bE(){return El()}function El(){return new Os(r=>r.toString(),(r,e)=>r.isEqual(e))}const FR=new it(de.comparator),QR=new bt(de.comparator);function De(...r){let e=QR;for(const n of r)e=e.add(n);return e}const KR=new bt(we);function YR(){return KR}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cm(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:kc(e)?"-0":e}}function wE(r){return{integerValue:""+r}}function XR(r,e){return TR(e)?wE(e):Cm(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oh{constructor(){this._=void 0}}function $R(r,e,n){return r instanceof Hc?function(o,u){const f={fields:{[oE]:{stringValue:aE},[uE]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&bm(u)&&(u=ih(u)),u&&(f.fields[lE]=u),{mapValue:f}}(n,e):r instanceof Nl?IE(r,e):r instanceof Dl?CE(r,e):function(o,u){const f=RE(o,u),p=_v(f)+_v(o.Re);return Kd(f)&&Kd(o.Re)?wE(p):Cm(o.serializer,p)}(r,e)}function ZR(r,e,n){return r instanceof Nl?IE(r,e):r instanceof Dl?CE(r,e):n}function RE(r,e){return r instanceof Gc?function(s){return Kd(s)||function(u){return!!u&&"doubleValue"in u}(s)}(e)?e:{integerValue:0}:null}class Hc extends oh{}class Nl extends oh{constructor(e){super(),this.elements=e}}function IE(r,e){const n=xE(e);for(const s of r.elements)n.some(o=>li(o,s))||n.push(s);return{arrayValue:{values:n}}}class Dl extends oh{constructor(e){super(),this.elements=e}}function CE(r,e){let n=xE(e);for(const s of r.elements)n=n.filter(o=>!li(o,s));return{arrayValue:{values:n}}}class Gc extends oh{constructor(e,n){super(),this.serializer=e,this.Re=n}}function _v(r){return ht(r.integerValue||r.doubleValue)}function xE(r){return wm(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}function WR(r,e){return r.field.isEqual(e.field)&&function(s,o){return s instanceof Nl&&o instanceof Nl||s instanceof Dl&&o instanceof Dl?Ba(s.elements,o.elements,li):s instanceof Gc&&o instanceof Gc?li(s.Re,o.Re):s instanceof Hc&&o instanceof Hc}(r.transform,e.transform)}class JR{constructor(e,n){this.version=e,this.transformResults=n}}class kn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new kn}static exists(e){return new kn(void 0,e)}static updateTime(e){return new kn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ic(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class lh{}function NE(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new xm(r.key,kn.none()):new kl(r.key,r.data,kn.none());{const n=r.data,s=sn.empty();let o=new bt(zt.comparator);for(let u of e.fields)if(!o.has(u)){let f=n.field(u);f===null&&u.length>1&&(u=u.popLast(),f=n.field(u)),f===null?s.delete(u):s.set(u,f),o=o.add(u)}return new jr(r.key,s,new pn(o.toArray()),kn.none())}}function eI(r,e,n){r instanceof kl?function(o,u,f){const p=o.value.clone(),g=Ev(o.fieldTransforms,u,f.transformResults);p.setAll(g),u.convertToFoundDocument(f.version,p).setHasCommittedMutations()}(r,e,n):r instanceof jr?function(o,u,f){if(!Ic(o.precondition,u))return void u.convertToUnknownDocument(f.version);const p=Ev(o.fieldTransforms,u,f.transformResults),g=u.data;g.setAll(DE(o)),g.setAll(p),u.convertToFoundDocument(f.version,g).setHasCommittedMutations()}(r,e,n):function(o,u,f){u.convertToNoDocument(f.version).setHasCommittedMutations()}(0,e,n)}function Tl(r,e,n,s){return r instanceof kl?function(u,f,p,g){if(!Ic(u.precondition,f))return p;const y=u.value.clone(),T=Tv(u.fieldTransforms,g,f);return y.setAll(T),f.convertToFoundDocument(f.version,y).setHasLocalMutations(),null}(r,e,n,s):r instanceof jr?function(u,f,p,g){if(!Ic(u.precondition,f))return p;const y=Tv(u.fieldTransforms,g,f),T=f.data;return T.setAll(DE(u)),T.setAll(y),f.convertToFoundDocument(f.version,T).setHasLocalMutations(),p===null?null:p.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map(I=>I.field))}(r,e,n,s):function(u,f,p){return Ic(u.precondition,f)?(f.convertToNoDocument(f.version).setHasLocalMutations(),null):p}(r,e,n)}function tI(r,e){let n=null;for(const s of r.fieldTransforms){const o=e.data.field(s.field),u=RE(s.transform,o||null);u!=null&&(n===null&&(n=sn.empty()),n.set(s.field,u))}return n||null}function vv(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&Ba(s,o,(u,f)=>WR(u,f))}(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class kl extends lh{constructor(e,n,s,o=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class jr extends lh{constructor(e,n,s,o,u=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function DE(r){const e=new Map;return r.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const s=r.data.field(n);e.set(n,s)}}),e}function Ev(r,e,n){const s=new Map;qe(r.length===n.length,32656,{Ve:n.length,me:r.length});for(let o=0;o<n.length;o++){const u=r[o],f=u.transform,p=e.data.field(u.field);s.set(u.field,ZR(f,p,n[o]))}return s}function Tv(r,e,n){const s=new Map;for(const o of r){const u=o.transform,f=n.data.field(o.field);s.set(o.field,$R(u,f,e))}return s}class xm extends lh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class nI extends lh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iI{constructor(e,n,s,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&eI(u,e,s[o])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=Tl(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=Tl(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=bE();return this.mutations.forEach(o=>{const u=e.get(o.key),f=u.overlayedDocument;let p=this.applyToLocalView(f,u.mutatedFields);p=n.has(o.key)?null:p;const g=NE(f,p);g!==null&&s.set(o.key,g),f.isValidDocument()||f.convertToNoDocument(Te.min())}),s}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),De())}isEqual(e){return this.batchId===e.batchId&&Ba(this.mutations,e.mutations,(n,s)=>vv(n,s))&&Ba(this.baseMutations,e.baseMutations,(n,s)=>vv(n,s))}}class Nm{constructor(e,n,s,o){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=o}static from(e,n,s){qe(e.mutations.length===s.length,58842,{fe:e.mutations.length,ge:s.length});let o=function(){return FR}();const u=e.mutations;for(let f=0;f<u.length;f++)o=o.insert(u[f].key,s[f].version);return new Nm(e,n,s,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rI{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sI{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var gt,Le;function aI(r){switch(r){case J.OK:return ye(64938);case J.CANCELLED:case J.UNKNOWN:case J.DEADLINE_EXCEEDED:case J.RESOURCE_EXHAUSTED:case J.INTERNAL:case J.UNAVAILABLE:case J.UNAUTHENTICATED:return!1;case J.INVALID_ARGUMENT:case J.NOT_FOUND:case J.ALREADY_EXISTS:case J.PERMISSION_DENIED:case J.FAILED_PRECONDITION:case J.ABORTED:case J.OUT_OF_RANGE:case J.UNIMPLEMENTED:case J.DATA_LOSS:return!0;default:return ye(15467,{code:r})}}function OE(r){if(r===void 0)return zi("GRPC error has no .code"),J.UNKNOWN;switch(r){case gt.OK:return J.OK;case gt.CANCELLED:return J.CANCELLED;case gt.UNKNOWN:return J.UNKNOWN;case gt.DEADLINE_EXCEEDED:return J.DEADLINE_EXCEEDED;case gt.RESOURCE_EXHAUSTED:return J.RESOURCE_EXHAUSTED;case gt.INTERNAL:return J.INTERNAL;case gt.UNAVAILABLE:return J.UNAVAILABLE;case gt.UNAUTHENTICATED:return J.UNAUTHENTICATED;case gt.INVALID_ARGUMENT:return J.INVALID_ARGUMENT;case gt.NOT_FOUND:return J.NOT_FOUND;case gt.ALREADY_EXISTS:return J.ALREADY_EXISTS;case gt.PERMISSION_DENIED:return J.PERMISSION_DENIED;case gt.FAILED_PRECONDITION:return J.FAILED_PRECONDITION;case gt.ABORTED:return J.ABORTED;case gt.OUT_OF_RANGE:return J.OUT_OF_RANGE;case gt.UNIMPLEMENTED:return J.UNIMPLEMENTED;case gt.DATA_LOSS:return J.DATA_LOSS;default:return ye(39323,{code:r})}}(Le=gt||(gt={}))[Le.OK=0]="OK",Le[Le.CANCELLED=1]="CANCELLED",Le[Le.UNKNOWN=2]="UNKNOWN",Le[Le.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Le[Le.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Le[Le.NOT_FOUND=5]="NOT_FOUND",Le[Le.ALREADY_EXISTS=6]="ALREADY_EXISTS",Le[Le.PERMISSION_DENIED=7]="PERMISSION_DENIED",Le[Le.UNAUTHENTICATED=16]="UNAUTHENTICATED",Le[Le.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Le[Le.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Le[Le.ABORTED=10]="ABORTED",Le[Le.OUT_OF_RANGE=11]="OUT_OF_RANGE",Le[Le.UNIMPLEMENTED=12]="UNIMPLEMENTED",Le[Le.INTERNAL=13]="INTERNAL",Le[Le.UNAVAILABLE=14]="UNAVAILABLE",Le[Le.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oI=new Cr([4294967295,4294967295],0);function Av(r){const e=tE().encode(r),n=new K0;return n.update(e),new Uint8Array(n.digest())}function Sv(r){const e=new DataView(r.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new Cr([n,s],0),new Cr([o,u],0)]}class Dm{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new pl(`Invalid padding: ${n}`);if(s<0)throw new pl(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new pl(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new pl(`Invalid padding when bitmap length is 0: ${n}`);this.pe=8*e.length-n,this.ye=Cr.fromNumber(this.pe)}we(e,n,s){let o=e.add(n.multiply(Cr.fromNumber(s)));return o.compare(oI)===1&&(o=new Cr([o.getBits(0),o.getBits(1)],0)),o.modulo(this.ye).toNumber()}Se(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const n=Av(e),[s,o]=Sv(n);for(let u=0;u<this.hashCount;u++){const f=this.we(s,o,u);if(!this.Se(f))return!1}return!0}static create(e,n,s){const o=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),f=new Dm(u,o,n);return s.forEach(p=>f.insert(p)),f}insert(e){if(this.pe===0)return;const n=Av(e),[s,o]=Sv(n);for(let u=0;u<this.hashCount;u++){const f=this.we(s,o,u);this.be(f)}}be(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class pl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uh{constructor(e,n,s,o,u){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const o=new Map;return o.set(e,jl.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new uh(Te.min(),o,new it(we),Bi(),De())}}class jl{constructor(e,n,s,o,u){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new jl(s,n,De(),De(),De())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cc{constructor(e,n,s,o){this.De=e,this.removedTargetIds=n,this.key=s,this.ve=o}}class ME{constructor(e,n){this.targetId=e,this.Ce=n}}class VE{constructor(e,n,s=qt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=o}}class bv{constructor(){this.Fe=0,this.Me=wv(),this.xe=qt.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=De(),n=De(),s=De();return this.Me.forEach((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:s=s.add(o);break;default:ye(38017,{changeType:u})}}),new jl(this.xe,this.Oe,e,n,s)}Qe(){this.Ne=!1,this.Me=wv()}$e(e,n){this.Ne=!0,this.Me=this.Me.insert(e,n)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,qe(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class lI{constructor(e){this.ze=e,this.je=new Map,this.He=Bi(),this.Je=yc(),this.Ye=yc(),this.Ze=new it(we)}Xe(e){for(const n of e.De)e.ve&&e.ve.isFoundDocument()?this.et(n,e.ve):this.tt(n,e.key,e.ve);for(const n of e.removedTargetIds)this.tt(n,e.key,e.ve)}nt(e){this.forEachTarget(e,n=>{const s=this.rt(n);switch(e.state){case 0:this.it(n)&&s.ke(e.resumeToken);break;case 1:s.We(),s.Be||s.Qe(),s.ke(e.resumeToken);break;case 2:s.We(),s.Be||this.removeTarget(n);break;case 3:this.it(n)&&(s.Ge(),s.ke(e.resumeToken));break;case 4:this.it(n)&&(this.st(n),s.ke(e.resumeToken));break;default:ye(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.je.forEach((s,o)=>{this.it(o)&&n(o)})}ot(e){const n=e.targetId,s=e.Ce.count,o=this._t(n);if(o){const u=o.target;if(Xd(u))if(s===0){const f=new de(u.path);this.tt(n,f,Yt.newNoDocument(f,Te.min()))}else qe(s===1,20013,{expectedCount:s});else{const f=this.ut(n);if(f!==s){const p=this.ct(e),g=p?this.lt(p,e,f):1;if(g!==0){this.st(n);const y=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,y)}}}}}ct(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:u=0}=n;let f,p;try{f=Mr(s).toUint8Array()}catch(g){if(g instanceof sE)return za("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{p=new Dm(f,o,u)}catch(g){return za(g instanceof pl?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return p.pe===0?null:p}lt(e,n,s){return n.Ce.count===s-this.Tt(e,n.targetId)?0:2}Tt(e,n){const s=this.ze.getRemoteKeysForTarget(n);let o=0;return s.forEach(u=>{const f=this.ze.Pt(),p=`projects/${f.projectId}/databases/${f.database}/documents/${u.path.canonicalString()}`;e.mightContain(p)||(this.tt(n,u,null),o++)}),o}It(e){const n=new Map;this.je.forEach((u,f)=>{const p=this._t(f);if(p){if(u.current&&Xd(p.target)){const g=new de(p.target.path);this.Et(g).has(f)||this.dt(f,g)||this.tt(f,g,Yt.newNoDocument(g,e))}u.Le&&(n.set(f,u.qe()),u.Qe())}});let s=De();this.Ye.forEach((u,f)=>{let p=!0;f.forEachWhile(g=>{const y=this._t(g);return!y||y.purpose==="TargetPurposeLimboResolution"||(p=!1,!1)}),p&&(s=s.add(u))}),this.He.forEach((u,f)=>f.setReadTime(e));const o=new uh(e,n,this.Ze,this.He,s);return this.He=Bi(),this.Je=yc(),this.Ye=yc(),this.Ze=new it(we),o}et(e,n){if(!this.it(e))return;const s=this.dt(e,n.key)?2:0;this.rt(e).$e(n.key,s),this.He=this.He.insert(n.key,n),this.Je=this.Je.insert(n.key,this.Et(n.key).add(e)),this.Ye=this.Ye.insert(n.key,this.At(n.key).add(e))}tt(e,n,s){if(!this.it(e))return;const o=this.rt(e);this.dt(e,n)?o.$e(n,1):o.Ue(n),this.Ye=this.Ye.insert(n,this.At(n).delete(e)),this.Ye=this.Ye.insert(n,this.At(n).add(e)),s&&(this.He=this.He.insert(n,s))}removeTarget(e){this.je.delete(e)}ut(e){const n=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let n=this.je.get(e);return n||(n=new bv,this.je.set(e,n)),n}At(e){let n=this.Ye.get(e);return n||(n=new bt(we),this.Ye=this.Ye.insert(e,n)),n}Et(e){let n=this.Je.get(e);return n||(n=new bt(we),this.Je=this.Je.insert(e,n)),n}it(e){const n=this._t(e)!==null;return n||ae("WatchChangeAggregator","Detected inactive target",e),n}_t(e){const n=this.je.get(e);return n&&n.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new bv),this.ze.getRemoteKeysForTarget(e).forEach(n=>{this.tt(e,n,null)})}dt(e,n){return this.ze.getRemoteKeysForTarget(e).has(n)}}function yc(){return new it(de.comparator)}function wv(){return new it(de.comparator)}const uI={asc:"ASCENDING",desc:"DESCENDING"},cI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},hI={and:"AND",or:"OR"};class fI{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Zd(r,e){return r.useProto3Json||nh(e)?e:{value:e}}function Fc(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function PE(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function dI(r,e){return Fc(r,e.toTimestamp())}function oi(r){return qe(!!r,49232),Te.fromTimestamp(function(n){const s=Or(n);return new St(s.seconds,s.nanos)}(r))}function Om(r,e){return Wd(r,e).canonicalString()}function Wd(r,e){const n=function(o){return new tt(["projects",o.projectId,"databases",o.database])}(r).child("documents");return e===void 0?n:n.child(e)}function UE(r){const e=tt.fromString(r);return qe(BE(e),10190,{key:e.toString()}),e}function Jd(r,e){return Om(r.databaseId,e.path)}function Od(r,e){const n=UE(e);if(n.get(1)!==r.databaseId.projectId)throw new he(J.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+r.databaseId.projectId);if(n.get(3)!==r.databaseId.database)throw new he(J.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+r.databaseId.database);return new de(kE(n))}function LE(r,e){return Om(r.databaseId,e)}function mI(r){const e=UE(r);return e.length===4?tt.emptyPath():kE(e)}function em(r){return new tt(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function kE(r){return qe(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function Rv(r,e,n){return{name:Jd(r,e),fields:n.value.mapValue.fields}}function pI(r,e){let n;if("targetChange"in e){e.targetChange;const s=function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:ye(39313,{state:y})}(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],u=function(y,T){return y.useProto3Json?(qe(T===void 0||typeof T=="string",58123),qt.fromBase64String(T||"")):(qe(T===void 0||T instanceof Buffer||T instanceof Uint8Array,16193),qt.fromUint8Array(T||new Uint8Array))}(r,e.targetChange.resumeToken),f=e.targetChange.cause,p=f&&function(y){const T=y.code===void 0?J.UNKNOWN:OE(y.code);return new he(T,y.message||"")}(f);n=new VE(s,o,u,p||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=Od(r,s.document.name),u=oi(s.document.updateTime),f=s.document.createTime?oi(s.document.createTime):Te.min(),p=new sn({mapValue:{fields:s.document.fields}}),g=Yt.newFoundDocument(o,u,f,p),y=s.targetIds||[],T=s.removedTargetIds||[];n=new Cc(y,T,g.key,g)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=Od(r,s.document),u=s.readTime?oi(s.readTime):Te.min(),f=Yt.newNoDocument(o,u),p=s.removedTargetIds||[];n=new Cc([],p,f.key,f)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=Od(r,s.document),u=s.removedTargetIds||[];n=new Cc([],u,o,null)}else{if(!("filter"in e))return ye(11601,{Vt:e});{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:u}=s,f=new sI(o,u),p=s.targetId;n=new ME(p,f)}}return n}function gI(r,e){let n;if(e instanceof kl)n={update:Rv(r,e.key,e.value)};else if(e instanceof xm)n={delete:Jd(r,e.key)};else if(e instanceof jr)n={update:Rv(r,e.key,e.data),updateMask:wI(e.fieldMask)};else{if(!(e instanceof nI))return ye(16599,{ft:e.type});n={verify:Jd(r,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(s=>function(u,f){const p=f.transform;if(p instanceof Hc)return{fieldPath:f.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof Nl)return{fieldPath:f.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof Dl)return{fieldPath:f.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof Gc)return{fieldPath:f.field.canonicalString(),increment:p.Re};throw ye(20930,{transform:f.transform})}(0,s))),e.precondition.isNone||(n.currentDocument=function(o,u){return u.updateTime!==void 0?{updateTime:dI(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:ye(27497)}(r,e.precondition)),n}function yI(r,e){return r&&r.length>0?(qe(e!==void 0,14353),r.map(n=>function(o,u){let f=o.updateTime?oi(o.updateTime):oi(u);return f.isEqual(Te.min())&&(f=oi(u)),new JR(f,o.transformResults||[])}(n,e))):[]}function _I(r,e){return{documents:[LE(r,e.path)]}}function vI(r,e){const n={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=LE(r,o);const u=function(y){if(y.length!==0)return zE(ui.create(y,"and"))}(e.filters);u&&(n.structuredQuery.where=u);const f=function(y){if(y.length!==0)return y.map(T=>function(x){return{field:Na(x.field),direction:AI(x.dir)}}(T))}(e.orderBy);f&&(n.structuredQuery.orderBy=f);const p=Zd(r,e.limit);return p!==null&&(n.structuredQuery.limit=p),e.startAt&&(n.structuredQuery.startAt=function(y){return{before:y.inclusive,values:y.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(y){return{before:!y.inclusive,values:y.position}}(e.endAt)),{gt:n,parent:o}}function EI(r){let e=mI(r.parent);const n=r.structuredQuery,s=n.from?n.from.length:0;let o=null;if(s>0){qe(s===1,65062);const T=n.from[0];T.allDescendants?o=T.collectionId:e=e.child(T.collectionId)}let u=[];n.where&&(u=function(I){const x=jE(I);return x instanceof ui&&pE(x)?x.getFilters():[x]}(n.where));let f=[];n.orderBy&&(f=function(I){return I.map(x=>function(Z){return new qc(Da(Z.field),function(q){switch(q){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(Z.direction))}(x))}(n.orderBy));let p=null;n.limit&&(p=function(I){let x;return x=typeof I=="object"?I.value:I,nh(x)?null:x}(n.limit));let g=null;n.startAt&&(g=function(I){const x=!!I.before,G=I.values||[];return new Bc(G,x)}(n.startAt));let y=null;return n.endAt&&(y=function(I){const x=!I.before,G=I.values||[];return new Bc(G,x)}(n.endAt)),jR(e,o,f,u,p,"F",g,y)}function TI(r,e){const n=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ye(28987,{purpose:o})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function jE(r){return r.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=Da(n.unaryFilter.field);return At.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=Da(n.unaryFilter.field);return At.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=Da(n.unaryFilter.field);return At.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const f=Da(n.unaryFilter.field);return At.create(f,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ye(61313);default:return ye(60726)}}(r):r.fieldFilter!==void 0?function(n){return At.create(Da(n.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ye(58110);default:return ye(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(r):r.compositeFilter!==void 0?function(n){return ui.create(n.compositeFilter.filters.map(s=>jE(s)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return ye(1026)}}(n.compositeFilter.op))}(r):ye(30097,{filter:r})}function AI(r){return uI[r]}function SI(r){return cI[r]}function bI(r){return hI[r]}function Na(r){return{fieldPath:r.canonicalString()}}function Da(r){return zt.fromServerFormat(r.fieldPath)}function zE(r){return r instanceof At?function(n){if(n.op==="=="){if(dv(n.value))return{unaryFilter:{field:Na(n.field),op:"IS_NAN"}};if(fv(n.value))return{unaryFilter:{field:Na(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(dv(n.value))return{unaryFilter:{field:Na(n.field),op:"IS_NOT_NAN"}};if(fv(n.value))return{unaryFilter:{field:Na(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Na(n.field),op:SI(n.op),value:n.value}}}(r):r instanceof ui?function(n){const s=n.getFilters().map(o=>zE(o));return s.length===1?s[0]:{compositeFilter:{op:bI(n.op),filters:s}}}(r):ye(54877,{filter:r})}function wI(r){const e=[];return r.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function BE(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr{constructor(e,n,s,o,u=Te.min(),f=Te.min(),p=qt.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=p,this.expectedCount=g}withSequenceNumber(e){return new Sr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Sr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Sr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Sr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RI{constructor(e){this.wt=e}}function II(r){const e=EI({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?$d(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CI{constructor(){this.Cn=new xI}addToCollectionParentIndex(e,n){return this.Cn.add(n),$.resolve()}getCollectionParents(e,n){return $.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return $.resolve()}deleteFieldIndex(e,n){return $.resolve()}deleteAllFieldIndexes(e){return $.resolve()}createTargetIndexes(e,n){return $.resolve()}getDocumentsMatchingTarget(e,n){return $.resolve(null)}getIndexType(e,n){return $.resolve(0)}getFieldIndexes(e,n){return $.resolve([])}getNextCollectionGroupToUpdate(e){return $.resolve(null)}getMinOffset(e,n){return $.resolve(Dr.min())}getMinOffsetFromCollectionGroup(e,n){return $.resolve(Dr.min())}updateCollectionGroup(e,n,s){return $.resolve()}updateIndexEntries(e,n){return $.resolve()}}class xI{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n]||new bt(tt.comparator),u=!o.has(s);return this.index[n]=o.add(s),u}has(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n];return o&&o.has(s)}getEntries(e){return(this.index[e]||new bt(tt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},qE=41943040;class rn{static withCacheSize(e){return new rn(e,rn.DEFAULT_COLLECTION_PERCENTILE,rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */rn.DEFAULT_COLLECTION_PERCENTILE=10,rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,rn.DEFAULT=new rn(qE,rn.DEFAULT_COLLECTION_PERCENTILE,rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),rn.DISABLED=new rn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ga{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new Ga(0)}static lr(){return new Ga(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cv="LruGarbageCollector",NI=1048576;function xv([r,e],[n,s]){const o=we(r,n);return o===0?we(e,s):o}class DI{constructor(e){this.Er=e,this.buffer=new bt(xv),this.dr=0}Ar(){return++this.dr}Rr(e){const n=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();xv(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class OI{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(e){ae(Cv,`Garbage collection scheduled in ${e}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Wa(n)?ae(Cv,"Ignoring IndexedDB error during garbage collection: ",n):await Za(n)}await this.mr(3e5)})}}class MI{constructor(e,n){this.gr=e,this.params=n}calculateTargetCount(e,n){return this.gr.pr(e).next(s=>Math.floor(n/100*s))}nthSequenceNumber(e,n){if(n===0)return $.resolve(th.le);const s=new DI(n);return this.gr.forEachTarget(e,o=>s.Rr(o.sequenceNumber)).next(()=>this.gr.yr(e,o=>s.Rr(o))).next(()=>s.maxValue)}removeTargets(e,n,s){return this.gr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.gr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ae("LruGarbageCollector","Garbage collection skipped; disabled"),$.resolve(Iv)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(ae("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Iv):this.wr(e,n))}getCacheSize(e){return this.gr.getCacheSize(e)}wr(e,n){let s,o,u,f,p,g,y;const T=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(I=>(I>this.params.maximumSequenceNumbersToCollect?(ae("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${I}`),o=this.params.maximumSequenceNumbersToCollect):o=I,f=Date.now(),this.nthSequenceNumber(e,o))).next(I=>(s=I,p=Date.now(),this.removeTargets(e,s,n))).next(I=>(u=I,g=Date.now(),this.removeOrphanedDocuments(e,s))).next(I=>(y=Date.now(),Ca()<=Ne.DEBUG&&ae("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${f-T}ms
	Determined least recently used ${o} in `+(p-f)+`ms
	Removed ${u} targets in `+(g-p)+`ms
	Removed ${I} documents in `+(y-g)+`ms
Total Duration: ${y-T}ms`),$.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:I})))}}function VI(r,e){return new MI(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PI{constructor(){this.changes=new Os(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Yt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?$.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UI{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LI{constructor(e,n,s,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next(o=>(s=o,this.remoteDocumentCache.getEntry(e,n))).next(o=>(s!==null&&Tl(s.mutation,o,pn.empty(),St.now()),o))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.getLocalViewOfDocuments(e,s,De()).next(()=>s))}getLocalViewOfDocuments(e,n,s=De()){const o=bs();return this.populateOverlays(e,o,n).next(()=>this.computeViews(e,n,o,s).next(u=>{let f=ml();return u.forEach((p,g)=>{f=f.insert(p,g.overlayedDocument)}),f}))}getOverlayedDocuments(e,n){const s=bs();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,De()))}populateOverlays(e,n,s){const o=[];return s.forEach(u=>{n.has(u)||o.push(u)}),this.documentOverlayCache.getOverlays(e,o).next(u=>{u.forEach((f,p)=>{n.set(f,p)})})}computeViews(e,n,s,o){let u=Bi();const f=El(),p=function(){return El()}();return n.forEach((g,y)=>{const T=s.get(y.key);o.has(y.key)&&(T===void 0||T.mutation instanceof jr)?u=u.insert(y.key,y):T!==void 0?(f.set(y.key,T.mutation.getFieldMask()),Tl(T.mutation,y,T.mutation.getFieldMask(),St.now())):f.set(y.key,pn.empty())}),this.recalculateAndSaveOverlays(e,u).next(g=>(g.forEach((y,T)=>f.set(y,T)),n.forEach((y,T)=>{var I;return p.set(y,new UI(T,(I=f.get(y))!==null&&I!==void 0?I:null))}),p))}recalculateAndSaveOverlays(e,n){const s=El();let o=new it((f,p)=>f-p),u=De();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(f=>{for(const p of f)p.keys().forEach(g=>{const y=n.get(g);if(y===null)return;let T=s.get(g)||pn.empty();T=p.applyToLocalView(y,T),s.set(g,T);const I=(o.get(p.batchId)||De()).add(g);o=o.insert(p.batchId,I)})}).next(()=>{const f=[],p=o.getReverseIterator();for(;p.hasNext();){const g=p.getNext(),y=g.key,T=g.value,I=bE();T.forEach(x=>{if(!u.has(x)){const G=NE(n.get(x),s.get(x));G!==null&&I.set(x,G),u=u.add(x)}}),f.push(this.documentOverlayCache.saveOverlays(e,y,I))}return $.waitFor(f)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,n,s,o){return function(f){return de.isDocumentKey(f.path)&&f.collectionGroup===null&&f.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):zR(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,o):this.getDocumentsMatchingCollectionQuery(e,n,s,o)}getNextDocuments(e,n,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,o).next(u=>{const f=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,o-u.size):$.resolve(bs());let p=Rl,g=u;return f.next(y=>$.forEach(y,(T,I)=>(p<I.largestBatchId&&(p=I.largestBatchId),u.get(T)?$.resolve():this.remoteDocumentCache.getEntry(e,T).next(x=>{g=g.insert(T,x)}))).next(()=>this.populateOverlays(e,y,u)).next(()=>this.computeViews(e,g,y,De())).next(T=>({batchId:p,changes:SE(T)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new de(n)).next(s=>{let o=ml();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o})}getDocumentsMatchingCollectionGroupQuery(e,n,s,o){const u=n.collectionGroup;let f=ml();return this.indexManager.getCollectionParents(e,u).next(p=>$.forEach(p,g=>{const y=function(I,x){return new rh(x,null,I.explicitOrderBy.slice(),I.filters.slice(),I.limit,I.limitType,I.startAt,I.endAt)}(n,g.child(u));return this.getDocumentsMatchingCollectionQuery(e,y,s,o).next(T=>{T.forEach((I,x)=>{f=f.insert(I,x)})})}).next(()=>f))}getDocumentsMatchingCollectionQuery(e,n,s,o){let u;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next(f=>(u=f,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,u,o))).next(f=>{u.forEach((g,y)=>{const T=y.getKey();f.get(T)===null&&(f=f.insert(T,Yt.newInvalidDocument(T)))});let p=ml();return f.forEach((g,y)=>{const T=u.get(g);T!==void 0&&Tl(T.mutation,y,pn.empty(),St.now()),ah(n,y)&&(p=p.insert(g,y))}),p})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kI{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,n){return $.resolve(this.kr.get(n))}saveBundleMetadata(e,n){return this.kr.set(n.id,function(o){return{id:o.id,version:o.version,createTime:oi(o.createTime)}}(n)),$.resolve()}getNamedQuery(e,n){return $.resolve(this.qr.get(n))}saveNamedQuery(e,n){return this.qr.set(n.name,function(o){return{name:o.name,query:II(o.bundledQuery),readTime:oi(o.readTime)}}(n)),$.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jI{constructor(){this.overlays=new it(de.comparator),this.Qr=new Map}getOverlay(e,n){return $.resolve(this.overlays.get(n))}getOverlays(e,n){const s=bs();return $.forEach(n,o=>this.getOverlay(e,o).next(u=>{u!==null&&s.set(o,u)})).next(()=>s)}saveOverlays(e,n,s){return s.forEach((o,u)=>{this.bt(e,n,u)}),$.resolve()}removeOverlaysForBatchId(e,n,s){const o=this.Qr.get(s);return o!==void 0&&(o.forEach(u=>this.overlays=this.overlays.remove(u)),this.Qr.delete(s)),$.resolve()}getOverlaysForCollection(e,n,s){const o=bs(),u=n.length+1,f=new de(n.child("")),p=this.overlays.getIteratorFrom(f);for(;p.hasNext();){const g=p.getNext().value,y=g.getKey();if(!n.isPrefixOf(y.path))break;y.path.length===u&&g.largestBatchId>s&&o.set(g.getKey(),g)}return $.resolve(o)}getOverlaysForCollectionGroup(e,n,s,o){let u=new it((y,T)=>y-T);const f=this.overlays.getIterator();for(;f.hasNext();){const y=f.getNext().value;if(y.getKey().getCollectionGroup()===n&&y.largestBatchId>s){let T=u.get(y.largestBatchId);T===null&&(T=bs(),u=u.insert(y.largestBatchId,T)),T.set(y.getKey(),y)}}const p=bs(),g=u.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach((y,T)=>p.set(y,T)),!(p.size()>=o)););return $.resolve(p)}bt(e,n,s){const o=this.overlays.get(s.key);if(o!==null){const f=this.Qr.get(o.largestBatchId).delete(s.key);this.Qr.set(o.largestBatchId,f)}this.overlays=this.overlays.insert(s.key,new rI(n,s));let u=this.Qr.get(n);u===void 0&&(u=De(),this.Qr.set(n,u)),this.Qr.set(n,u.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zI{constructor(){this.sessionToken=qt.EMPTY_BYTE_STRING}getSessionToken(e){return $.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,$.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mm{constructor(){this.$r=new bt(Dt.Ur),this.Kr=new bt(Dt.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,n){const s=new Dt(e,n);this.$r=this.$r.add(s),this.Kr=this.Kr.add(s)}Gr(e,n){e.forEach(s=>this.addReference(s,n))}removeReference(e,n){this.zr(new Dt(e,n))}jr(e,n){e.forEach(s=>this.removeReference(s,n))}Hr(e){const n=new de(new tt([])),s=new Dt(n,e),o=new Dt(n,e+1),u=[];return this.Kr.forEachInRange([s,o],f=>{this.zr(f),u.push(f.key)}),u}Jr(){this.$r.forEach(e=>this.zr(e))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){const n=new de(new tt([])),s=new Dt(n,e),o=new Dt(n,e+1);let u=De();return this.Kr.forEachInRange([s,o],f=>{u=u.add(f.key)}),u}containsKey(e){const n=new Dt(e,0),s=this.$r.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class Dt{constructor(e,n){this.key=e,this.Zr=n}static Ur(e,n){return de.comparator(e.key,n.key)||we(e.Zr,n.Zr)}static Wr(e,n){return we(e.Zr,n.Zr)||de.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BI{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.nr=1,this.Xr=new bt(Dt.Ur)}checkEmpty(e){return $.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,o){const u=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const f=new iI(u,n,s,o);this.mutationQueue.push(f);for(const p of o)this.Xr=this.Xr.add(new Dt(p.key,u)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return $.resolve(f)}lookupMutationBatch(e,n){return $.resolve(this.ei(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,o=this.ti(s),u=o<0?0:o;return $.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return $.resolve(this.mutationQueue.length===0?Sm:this.nr-1)}getAllMutationBatches(e){return $.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new Dt(n,0),o=new Dt(n,Number.POSITIVE_INFINITY),u=[];return this.Xr.forEachInRange([s,o],f=>{const p=this.ei(f.Zr);u.push(p)}),$.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new bt(we);return n.forEach(o=>{const u=new Dt(o,0),f=new Dt(o,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([u,f],p=>{s=s.add(p.Zr)})}),$.resolve(this.ni(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,o=s.length+1;let u=s;de.isDocumentKey(u)||(u=u.child(""));const f=new Dt(new de(u),0);let p=new bt(we);return this.Xr.forEachWhile(g=>{const y=g.key.path;return!!s.isPrefixOf(y)&&(y.length===o&&(p=p.add(g.Zr)),!0)},f),$.resolve(this.ni(p))}ni(e){const n=[];return e.forEach(s=>{const o=this.ei(s);o!==null&&n.push(o)}),n}removeMutationBatch(e,n){qe(this.ri(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Xr;return $.forEach(n.mutations,o=>{const u=new Dt(o.key,n.batchId);return s=s.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.Xr=s})}sr(e){}containsKey(e,n){const s=new Dt(n,0),o=this.Xr.firstAfterOrEqual(s);return $.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,$.resolve()}ri(e,n){return this.ti(e)}ti(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ei(e){const n=this.ti(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qI{constructor(e){this.ii=e,this.docs=function(){return new it(de.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,o=this.docs.get(s),u=o?o.size:0,f=this.ii(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:f}),this.size+=f-u,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return $.resolve(s?s.document.mutableCopy():Yt.newInvalidDocument(n))}getEntries(e,n){let s=Bi();return n.forEach(o=>{const u=this.docs.get(o);s=s.insert(o,u?u.document.mutableCopy():Yt.newInvalidDocument(o))}),$.resolve(s)}getDocumentsMatchingQuery(e,n,s,o){let u=Bi();const f=n.path,p=new de(f.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(p);for(;g.hasNext();){const{key:y,value:{document:T}}=g.getNext();if(!f.isPrefixOf(y.path))break;y.path.length>f.length+1||yR(gR(T),s)<=0||(o.has(T.key)||ah(n,T))&&(u=u.insert(T.key,T.mutableCopy()))}return $.resolve(u)}getAllFromCollectionGroup(e,n,s,o){ye(9500)}si(e,n){return $.forEach(this.docs,s=>n(s))}newChangeBuffer(e){return new HI(this)}getSize(e){return $.resolve(this.size)}}class HI extends PI{constructor(e){super(),this.Br=e}applyChanges(e){const n=[];return this.changes.forEach((s,o)=>{o.isValidDocument()?n.push(this.Br.addEntry(e,o)):this.Br.removeEntry(s)}),$.waitFor(n)}getFromCache(e,n){return this.Br.getEntry(e,n)}getAllFromCache(e,n){return this.Br.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GI{constructor(e){this.persistence=e,this.oi=new Os(n=>Rm(n),Im),this.lastRemoteSnapshotVersion=Te.min(),this.highestTargetId=0,this._i=0,this.ai=new Mm,this.targetCount=0,this.ui=Ga.cr()}forEachTarget(e,n){return this.oi.forEach((s,o)=>n(o)),$.resolve()}getLastRemoteSnapshotVersion(e){return $.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return $.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),$.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this._i&&(this._i=n),$.resolve()}Tr(e){this.oi.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ui=new Ga(n),this.highestTargetId=n),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,n){return this.Tr(n),this.targetCount+=1,$.resolve()}updateTargetData(e,n){return this.Tr(n),$.resolve()}removeTargetData(e,n){return this.oi.delete(n.target),this.ai.Hr(n.targetId),this.targetCount-=1,$.resolve()}removeTargets(e,n,s){let o=0;const u=[];return this.oi.forEach((f,p)=>{p.sequenceNumber<=n&&s.get(p.targetId)===null&&(this.oi.delete(f),u.push(this.removeMatchingKeysForTargetId(e,p.targetId)),o++)}),$.waitFor(u).next(()=>o)}getTargetCount(e){return $.resolve(this.targetCount)}getTargetData(e,n){const s=this.oi.get(n)||null;return $.resolve(s)}addMatchingKeys(e,n,s){return this.ai.Gr(n,s),$.resolve()}removeMatchingKeys(e,n,s){this.ai.jr(n,s);const o=this.persistence.referenceDelegate,u=[];return o&&n.forEach(f=>{u.push(o.markPotentiallyOrphaned(e,f))}),$.waitFor(u)}removeMatchingKeysForTargetId(e,n){return this.ai.Hr(n),$.resolve()}getMatchingKeysForTargetId(e,n){const s=this.ai.Yr(n);return $.resolve(s)}containsKey(e,n){return $.resolve(this.ai.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HE{constructor(e,n){this.ci={},this.overlays={},this.li=new th(0),this.hi=!1,this.hi=!0,this.Pi=new zI,this.referenceDelegate=e(this),this.Ti=new GI(this),this.indexManager=new CI,this.remoteDocumentCache=function(o){return new qI(o)}(s=>this.referenceDelegate.Ii(s)),this.serializer=new RI(n),this.Ei=new kI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new jI,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.ci[e.toKey()];return s||(s=new BI(n,this.referenceDelegate),this.ci[e.toKey()]=s),s}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,n,s){ae("MemoryPersistence","Starting transaction:",e);const o=new FI(this.li.next());return this.referenceDelegate.di(),s(o).next(u=>this.referenceDelegate.Ai(o).next(()=>u)).toPromise().then(u=>(o.raiseOnCommittedEvent(),u))}Ri(e,n){return $.or(Object.values(this.ci).map(s=>()=>s.containsKey(e,n)))}}class FI extends vR{constructor(e){super(),this.currentSequenceNumber=e}}class Vm{constructor(e){this.persistence=e,this.Vi=new Mm,this.mi=null}static fi(e){return new Vm(e)}get gi(){if(this.mi)return this.mi;throw ye(60996)}addReference(e,n,s){return this.Vi.addReference(s,n),this.gi.delete(s.toString()),$.resolve()}removeReference(e,n,s){return this.Vi.removeReference(s,n),this.gi.add(s.toString()),$.resolve()}markPotentiallyOrphaned(e,n){return this.gi.add(n.toString()),$.resolve()}removeTarget(e,n){this.Vi.Hr(n.targetId).forEach(o=>this.gi.add(o.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next(o=>{o.forEach(u=>this.gi.add(u.toString()))}).next(()=>s.removeTargetData(e,n))}di(){this.mi=new Set}Ai(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return $.forEach(this.gi,s=>{const o=de.fromPath(s);return this.pi(e,o).next(u=>{u||n.removeEntry(o,Te.min())})}).next(()=>(this.mi=null,n.apply(e)))}updateLimboDocument(e,n){return this.pi(e,n).next(s=>{s?this.gi.delete(n.toString()):this.gi.add(n.toString())})}Ii(e){return 0}pi(e,n){return $.or([()=>$.resolve(this.Vi.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ri(e,n)])}}class Qc{constructor(e,n){this.persistence=e,this.yi=new Os(s=>AR(s.path),(s,o)=>s.isEqual(o)),this.garbageCollector=VI(this,n)}static fi(e,n){return new Qc(e,n)}di(){}Ai(e){return $.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}pr(e){const n=this.Sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(s=>n.next(o=>s+o))}Sr(e){let n=0;return this.yr(e,s=>{n++}).next(()=>n)}yr(e,n){return $.forEach(this.yi,(s,o)=>this.Dr(e,s,o).next(u=>u?$.resolve():n(o)))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.si(e,f=>this.Dr(e,f,n).next(p=>{p||(s++,u.removeEntry(f,Te.min()))})).next(()=>u.apply(e)).next(()=>s)}markPotentiallyOrphaned(e,n){return this.yi.set(n,e.currentSequenceNumber),$.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.yi.set(s,e.currentSequenceNumber),$.resolve()}removeReference(e,n,s){return this.yi.set(s,e.currentSequenceNumber),$.resolve()}updateLimboDocument(e,n){return this.yi.set(n,e.currentSequenceNumber),$.resolve()}Ii(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=wc(e.data.value)),n}Dr(e,n,s){return $.or([()=>this.persistence.Ri(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.yi.get(n);return $.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pm{constructor(e,n,s,o){this.targetId=e,this.fromCache=n,this.ds=s,this.As=o}static Rs(e,n){let s=De(),o=De();for(const u of n.docChanges)switch(u.type){case 0:s=s.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new Pm(e,n.fromCache,s,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QI{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KI{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return RS()?8:ER(Xt())>0?6:4}()}initialize(e,n){this.ys=e,this.indexManager=n,this.Vs=!0}getDocumentsMatchingQuery(e,n,s,o){const u={result:null};return this.ws(e,n).next(f=>{u.result=f}).next(()=>{if(!u.result)return this.Ss(e,n,o,s).next(f=>{u.result=f})}).next(()=>{if(u.result)return;const f=new QI;return this.bs(e,n,f).next(p=>{if(u.result=p,this.fs)return this.Ds(e,n,f,p.size)})}).next(()=>u.result)}Ds(e,n,s,o){return s.documentReadCount<this.gs?(Ca()<=Ne.DEBUG&&ae("QueryEngine","SDK will not create cache indexes for query:",xa(n),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),$.resolve()):(Ca()<=Ne.DEBUG&&ae("QueryEngine","Query:",xa(n),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.ps*o?(Ca()<=Ne.DEBUG&&ae("QueryEngine","The SDK decides to create cache indexes for query:",xa(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ai(n))):$.resolve())}ws(e,n){if(yv(n))return $.resolve(null);let s=ai(n);return this.indexManager.getIndexType(e,s).next(o=>o===0?null:(n.limit!==null&&o===1&&(n=$d(n,null,"F"),s=ai(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next(u=>{const f=De(...u);return this.ys.getDocuments(e,f).next(p=>this.indexManager.getMinOffset(e,s).next(g=>{const y=this.vs(n,p);return this.Cs(n,y,f,g.readTime)?this.ws(e,$d(n,null,"F")):this.Fs(e,y,n,g)}))})))}Ss(e,n,s,o){return yv(n)||o.isEqual(Te.min())?$.resolve(null):this.ys.getDocuments(e,s).next(u=>{const f=this.vs(n,u);return this.Cs(n,f,s,o)?$.resolve(null):(Ca()<=Ne.DEBUG&&ae("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),xa(n)),this.Fs(e,f,n,pR(o,Rl)).next(p=>p))})}vs(e,n){let s=new bt(TE(e));return n.forEach((o,u)=>{ah(e,u)&&(s=s.add(u))}),s}Cs(e,n,s,o){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const u=e.limitType==="F"?n.last():n.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}bs(e,n,s){return Ca()<=Ne.DEBUG&&ae("QueryEngine","Using full collection scan to execute query:",xa(n)),this.ys.getDocumentsMatchingQuery(e,n,Dr.min(),s)}Fs(e,n,s,o){return this.ys.getDocumentsMatchingQuery(e,s,o).next(u=>(n.forEach(f=>{u=u.insert(f.key,f)}),u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Um="LocalStore",YI=3e8;class XI{constructor(e,n,s,o){this.persistence=e,this.Ms=n,this.serializer=o,this.xs=new it(we),this.Os=new Os(u=>Rm(u),Im),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(s)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new LI(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.xs))}}function $I(r,e,n,s){return new XI(r,e,n,s)}async function GE(r,e){const n=Ae(r);return await n.persistence.runTransaction("Handle user change","readonly",s=>{let o;return n.mutationQueue.getAllMutationBatches(s).next(u=>(o=u,n.Ls(e),n.mutationQueue.getAllMutationBatches(s))).next(u=>{const f=[],p=[];let g=De();for(const y of o){f.push(y.batchId);for(const T of y.mutations)g=g.add(T.key)}for(const y of u){p.push(y.batchId);for(const T of y.mutations)g=g.add(T.key)}return n.localDocuments.getDocuments(s,g).next(y=>({ks:y,removedBatchIds:f,addedBatchIds:p}))})})}function ZI(r,e){const n=Ae(r);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const o=e.batch.keys(),u=n.Bs.newChangeBuffer({trackRemovals:!0});return function(p,g,y,T){const I=y.batch,x=I.keys();let G=$.resolve();return x.forEach(Z=>{G=G.next(()=>T.getEntry(g,Z)).next(F=>{const q=y.docVersions.get(Z);qe(q!==null,48541),F.version.compareTo(q)<0&&(I.applyToRemoteDocument(F,y),F.isValidDocument()&&(F.setReadTime(y.commitVersion),T.addEntry(F)))})}),G.next(()=>p.mutationQueue.removeMutationBatch(g,I))}(n,s,e,u).next(()=>u.apply(s)).next(()=>n.mutationQueue.performConsistencyCheck(s)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(p){let g=De();for(let y=0;y<p.mutationResults.length;++y)p.mutationResults[y].transformResults.length>0&&(g=g.add(p.batch.mutations[y].key));return g}(e))).next(()=>n.localDocuments.getDocuments(s,o))})}function FE(r){const e=Ae(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ti.getLastRemoteSnapshotVersion(n))}function WI(r,e){const n=Ae(r),s=e.snapshotVersion;let o=n.xs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const f=n.Bs.newChangeBuffer({trackRemovals:!0});o=n.xs;const p=[];e.targetChanges.forEach((T,I)=>{const x=o.get(I);if(!x)return;p.push(n.Ti.removeMatchingKeys(u,T.removedDocuments,I).next(()=>n.Ti.addMatchingKeys(u,T.addedDocuments,I)));let G=x.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(I)!==null?G=G.withResumeToken(qt.EMPTY_BYTE_STRING,Te.min()).withLastLimboFreeSnapshotVersion(Te.min()):T.resumeToken.approximateByteSize()>0&&(G=G.withResumeToken(T.resumeToken,s)),o=o.insert(I,G),function(F,q,re){return F.resumeToken.approximateByteSize()===0||q.snapshotVersion.toMicroseconds()-F.snapshotVersion.toMicroseconds()>=YI?!0:re.addedDocuments.size+re.modifiedDocuments.size+re.removedDocuments.size>0}(x,G,T)&&p.push(n.Ti.updateTargetData(u,G))});let g=Bi(),y=De();if(e.documentUpdates.forEach(T=>{e.resolvedLimboDocuments.has(T)&&p.push(n.persistence.referenceDelegate.updateLimboDocument(u,T))}),p.push(JI(u,f,e.documentUpdates).next(T=>{g=T.qs,y=T.Qs})),!s.isEqual(Te.min())){const T=n.Ti.getLastRemoteSnapshotVersion(u).next(I=>n.Ti.setTargetsMetadata(u,u.currentSequenceNumber,s));p.push(T)}return $.waitFor(p).next(()=>f.apply(u)).next(()=>n.localDocuments.getLocalViewOfDocuments(u,g,y)).next(()=>g)}).then(u=>(n.xs=o,u))}function JI(r,e,n){let s=De(),o=De();return n.forEach(u=>s=s.add(u)),e.getEntries(r,s).next(u=>{let f=Bi();return n.forEach((p,g)=>{const y=u.get(p);g.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(p)),g.isNoDocument()&&g.version.isEqual(Te.min())?(e.removeEntry(p,g.readTime),f=f.insert(p,g)):!y.isValidDocument()||g.version.compareTo(y.version)>0||g.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(g),f=f.insert(p,g)):ae(Um,"Ignoring outdated watch update for ",p,". Current version:",y.version," Watch version:",g.version)}),{qs:f,Qs:o}})}function e2(r,e){const n=Ae(r);return n.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=Sm),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function t2(r,e){const n=Ae(r);return n.persistence.runTransaction("Allocate target","readwrite",s=>{let o;return n.Ti.getTargetData(s,e).next(u=>u?(o=u,$.resolve(o)):n.Ti.allocateTargetId(s).next(f=>(o=new Sr(e,f,"TargetPurposeListen",s.currentSequenceNumber),n.Ti.addTargetData(s,o).next(()=>o))))}).then(s=>{const o=n.xs.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.xs=n.xs.insert(s.targetId,s),n.Os.set(e,s.targetId)),s})}async function tm(r,e,n){const s=Ae(r),o=s.xs.get(e),u=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",u,f=>s.persistence.referenceDelegate.removeTarget(f,o))}catch(f){if(!Wa(f))throw f;ae(Um,`Failed to update sequence numbers for target ${e}: ${f}`)}s.xs=s.xs.remove(e),s.Os.delete(o.target)}function Nv(r,e,n){const s=Ae(r);let o=Te.min(),u=De();return s.persistence.runTransaction("Execute query","readwrite",f=>function(g,y,T){const I=Ae(g),x=I.Os.get(T);return x!==void 0?$.resolve(I.xs.get(x)):I.Ti.getTargetData(y,T)}(s,f,ai(e)).next(p=>{if(p)return o=p.lastLimboFreeSnapshotVersion,s.Ti.getMatchingKeysForTargetId(f,p.targetId).next(g=>{u=g})}).next(()=>s.Ms.getDocumentsMatchingQuery(f,e,n?o:Te.min(),n?u:De())).next(p=>(n2(s,qR(e),p),{documents:p,$s:u})))}function n2(r,e,n){let s=r.Ns.get(e)||Te.min();n.forEach((o,u)=>{u.readTime.compareTo(s)>0&&(s=u.readTime)}),r.Ns.set(e,s)}class Dv{constructor(){this.activeTargetIds=YR()}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class i2{constructor(){this.xo=new Dv,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,n,s){this.Oo[e]=n}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new Dv,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r2{No(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ov="ConnectivityMonitor";class Mv{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){ae(Ov,"Network connectivity changed: AVAILABLE");for(const e of this.Qo)e(0)}qo(){ae(Ov,"Network connectivity changed: UNAVAILABLE");for(const e of this.Qo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _c=null;function nm(){return _c===null?_c=function(){return 268435456+Math.round(2147483648*Math.random())}():_c++,"0x"+_c.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Md="RestConnection",s2={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class a2{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Ko=n+"://"+e.host,this.Wo=`projects/${s}/databases/${o}`,this.Go=this.databaseId.database===jc?`project_id=${s}`:`project_id=${s}&database_id=${o}`}zo(e,n,s,o,u){const f=nm(),p=this.jo(e,n.toUriEncodedString());ae(Md,`Sending RPC '${e}' ${f}:`,p,s);const g={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(g,o,u);const{host:y}=new URL(p),T=Ol(y);return this.Jo(e,p,g,s,T).then(I=>(ae(Md,`Received RPC '${e}' ${f}: `,I),I),I=>{throw za(Md,`RPC '${e}' ${f} failed with error: `,I,"url: ",p,"request:",s),I})}Yo(e,n,s,o,u,f){return this.zo(e,n,s,o,u)}Ho(e,n,s){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+$a}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((o,u)=>e[u]=o),s&&s.headers.forEach((o,u)=>e[u]=o)}jo(e,n){const s=s2[e];return`${this.Ko}/v1/${n}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o2{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qt="WebChannelConnection";class l2 extends a2{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,s,o,u){const f=nm();return new Promise((p,g)=>{const y=new Y0;y.setWithCredentials(!0),y.listenOnce(X0.COMPLETE,()=>{try{switch(y.getLastErrorCode()){case bc.NO_ERROR:const I=y.getResponseJson();ae(Qt,`XHR for RPC '${e}' ${f} received:`,JSON.stringify(I)),p(I);break;case bc.TIMEOUT:ae(Qt,`RPC '${e}' ${f} timed out`),g(new he(J.DEADLINE_EXCEEDED,"Request time out"));break;case bc.HTTP_ERROR:const x=y.getStatus();if(ae(Qt,`RPC '${e}' ${f} failed with status:`,x,"response text:",y.getResponseText()),x>0){let G=y.getResponseJson();Array.isArray(G)&&(G=G[0]);const Z=G==null?void 0:G.error;if(Z&&Z.status&&Z.message){const F=function(re){const se=re.toLowerCase().replace(/_/g,"-");return Object.values(J).indexOf(se)>=0?se:J.UNKNOWN}(Z.status);g(new he(F,Z.message))}else g(new he(J.UNKNOWN,"Server responded with status "+y.getStatus()))}else g(new he(J.UNAVAILABLE,"Connection failed."));break;default:ye(9055,{l_:e,streamId:f,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{ae(Qt,`RPC '${e}' ${f} completed.`)}});const T=JSON.stringify(o);ae(Qt,`RPC '${e}' ${f} sending request:`,o),y.send(n,"POST",T,s,15)})}T_(e,n,s){const o=nm(),u=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],f=W0(),p=Z0(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(g.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(g.useFetchStreams=!0),this.Ho(g.initMessageHeaders,n,s),g.encodeInitMessageHeaders=!0;const T=u.join("");ae(Qt,`Creating RPC '${e}' stream ${o}: ${T}`,g);const I=f.createWebChannel(T,g);let x=!1,G=!1;const Z=new o2({Zo:q=>{G?ae(Qt,`Not sending because RPC '${e}' stream ${o} is closed:`,q):(x||(ae(Qt,`Opening RPC '${e}' stream ${o} transport.`),I.open(),x=!0),ae(Qt,`RPC '${e}' stream ${o} sending:`,q),I.send(q))},Xo:()=>I.close()}),F=(q,re,se)=>{q.listen(re,le=>{try{se(le)}catch(Oe){setTimeout(()=>{throw Oe},0)}})};return F(I,dl.EventType.OPEN,()=>{G||(ae(Qt,`RPC '${e}' stream ${o} transport opened.`),Z.__())}),F(I,dl.EventType.CLOSE,()=>{G||(G=!0,ae(Qt,`RPC '${e}' stream ${o} transport closed`),Z.u_())}),F(I,dl.EventType.ERROR,q=>{G||(G=!0,za(Qt,`RPC '${e}' stream ${o} transport errored. Name:`,q.name,"Message:",q.message),Z.u_(new he(J.UNAVAILABLE,"The operation could not be completed")))}),F(I,dl.EventType.MESSAGE,q=>{var re;if(!G){const se=q.data[0];qe(!!se,16349);const le=se,Oe=(le==null?void 0:le.error)||((re=le[0])===null||re===void 0?void 0:re.error);if(Oe){ae(Qt,`RPC '${e}' stream ${o} received error:`,Oe);const Ee=Oe.status;let Me=function(R){const O=gt[R];if(O!==void 0)return OE(O)}(Ee),M=Oe.message;Me===void 0&&(Me=J.INTERNAL,M="Unknown error status: "+Ee+" with message "+Oe.message),G=!0,Z.u_(new he(Me,M)),I.close()}else ae(Qt,`RPC '${e}' stream ${o} received:`,se),Z.c_(se)}}),F(p,$0.STAT_EVENT,q=>{q.stat===Gd.PROXY?ae(Qt,`RPC '${e}' stream ${o} detected buffering proxy`):q.stat===Gd.NOPROXY&&ae(Qt,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{Z.a_()},0),Z}}function Vd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ch(r){return new fI(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QE{constructor(e,n,s=1e3,o=1.5,u=6e4){this.xi=e,this.timerId=n,this.I_=s,this.E_=o,this.d_=u,this.A_=0,this.R_=null,this.V_=Date.now(),this.reset()}reset(){this.A_=0}m_(){this.A_=this.d_}f_(e){this.cancel();const n=Math.floor(this.A_+this.g_()),s=Math.max(0,Date.now()-this.V_),o=Math.max(0,n-s);o>0&&ae("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.A_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.R_=this.xi.enqueueAfterDelay(this.timerId,o,()=>(this.V_=Date.now(),e())),this.A_*=this.E_,this.A_<this.I_&&(this.A_=this.I_),this.A_>this.d_&&(this.A_=this.d_)}p_(){this.R_!==null&&(this.R_.skipDelay(),this.R_=null)}cancel(){this.R_!==null&&(this.R_.cancel(),this.R_=null)}g_(){return(Math.random()-.5)*this.A_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vv="PersistentStream";class KE{constructor(e,n,s,o,u,f,p,g){this.xi=e,this.y_=s,this.w_=o,this.connection=u,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=p,this.listener=g,this.state=0,this.S_=0,this.b_=null,this.D_=null,this.stream=null,this.v_=0,this.C_=new QE(e,n)}F_(){return this.state===1||this.state===5||this.M_()}M_(){return this.state===2||this.state===3}start(){this.v_=0,this.state!==4?this.auth():this.x_()}async stop(){this.F_()&&await this.close(0)}O_(){this.state=0,this.C_.reset()}N_(){this.M_()&&this.b_===null&&(this.b_=this.xi.enqueueAfterDelay(this.y_,6e4,()=>this.B_()))}L_(e){this.k_(),this.stream.send(e)}async B_(){if(this.M_())return this.close(0)}k_(){this.b_&&(this.b_.cancel(),this.b_=null)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}async close(e,n){this.k_(),this.q_(),this.C_.cancel(),this.S_++,e!==4?this.C_.reset():n&&n.code===J.RESOURCE_EXHAUSTED?(zi(n.toString()),zi("Using maximum backoff delay to prevent overloading the backend."),this.C_.m_()):n&&n.code===J.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.Q_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.i_(n)}Q_(){}auth(){this.state=1;const e=this.U_(this.S_),n=this.S_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,o])=>{this.S_===n&&this.K_(s,o)},s=>{e(()=>{const o=new he(J.UNKNOWN,"Fetching auth token failed: "+s.message);return this.W_(o)})})}K_(e,n){const s=this.U_(this.S_);this.stream=this.G_(e,n),this.stream.e_(()=>{s(()=>this.listener.e_())}),this.stream.n_(()=>{s(()=>(this.state=2,this.D_=this.xi.enqueueAfterDelay(this.w_,1e4,()=>(this.M_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(o=>{s(()=>this.W_(o))}),this.stream.onMessage(o=>{s(()=>++this.v_==1?this.z_(o):this.onNext(o))})}x_(){this.state=5,this.C_.f_(async()=>{this.state=0,this.start()})}W_(e){return ae(Vv,`close with error: ${e}`),this.stream=null,this.close(4,e)}U_(e){return n=>{this.xi.enqueueAndForget(()=>this.S_===e?n():(ae(Vv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class u2 extends KE{constructor(e,n,s,o,u,f){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,o,f),this.serializer=u}G_(e,n){return this.connection.T_("Listen",e,n)}z_(e){return this.onNext(e)}onNext(e){this.C_.reset();const n=pI(this.serializer,e),s=function(u){if(!("targetChange"in u))return Te.min();const f=u.targetChange;return f.targetIds&&f.targetIds.length?Te.min():f.readTime?oi(f.readTime):Te.min()}(e);return this.listener.j_(n,s)}H_(e){const n={};n.database=em(this.serializer),n.addTarget=function(u,f){let p;const g=f.target;if(p=Xd(g)?{documents:_I(u,g)}:{query:vI(u,g).gt},p.targetId=f.targetId,f.resumeToken.approximateByteSize()>0){p.resumeToken=PE(u,f.resumeToken);const y=Zd(u,f.expectedCount);y!==null&&(p.expectedCount=y)}else if(f.snapshotVersion.compareTo(Te.min())>0){p.readTime=Fc(u,f.snapshotVersion.toTimestamp());const y=Zd(u,f.expectedCount);y!==null&&(p.expectedCount=y)}return p}(this.serializer,e);const s=TI(this.serializer,e);s&&(n.labels=s),this.L_(n)}J_(e){const n={};n.database=em(this.serializer),n.removeTarget=e,this.L_(n)}}class c2 extends KE{constructor(e,n,s,o,u,f){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,o,f),this.serializer=u}get Y_(){return this.v_>0}start(){this.lastStreamToken=void 0,super.start()}Q_(){this.Y_&&this.Z_([])}G_(e,n){return this.connection.T_("Write",e,n)}z_(e){return qe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,qe(!e.writeResults||e.writeResults.length===0,55816),this.listener.X_()}onNext(e){qe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.C_.reset();const n=yI(e.writeResults,e.commitTime),s=oi(e.commitTime);return this.listener.ea(s,n)}ta(){const e={};e.database=em(this.serializer),this.L_(e)}Z_(e){const n={streamToken:this.lastStreamToken,writes:e.map(s=>gI(this.serializer,s))};this.L_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h2{}class f2 extends h2{constructor(e,n,s,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=o,this.na=!1}ra(){if(this.na)throw new he(J.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,n,s,o){return this.ra(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,f])=>this.connection.zo(e,Wd(n,s),o,u,f)).catch(u=>{throw u.name==="FirebaseError"?(u.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new he(J.UNKNOWN,u.toString())})}Yo(e,n,s,o,u){return this.ra(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([f,p])=>this.connection.Yo(e,Wd(n,s),o,f,p,u)).catch(f=>{throw f.name==="FirebaseError"?(f.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new he(J.UNKNOWN,f.toString())})}terminate(){this.na=!0,this.connection.terminate()}}class d2{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.ia=0,this.sa=null,this.oa=!0}_a(){this.ia===0&&(this.aa("Unknown"),this.sa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.sa=null,this.ua("Backend didn't respond within 10 seconds."),this.aa("Offline"),Promise.resolve())))}ca(e){this.state==="Online"?this.aa("Unknown"):(this.ia++,this.ia>=1&&(this.la(),this.ua(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.aa("Offline")))}set(e){this.la(),this.ia=0,e==="Online"&&(this.oa=!1),this.aa(e)}aa(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ua(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.oa?(zi(n),this.oa=!1):ae("OnlineStateTracker",n)}la(){this.sa!==null&&(this.sa.cancel(),this.sa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xs="RemoteStore";class m2{constructor(e,n,s,o,u){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.ha=[],this.Pa=new Map,this.Ta=new Set,this.Ia=[],this.Ea=u,this.Ea.No(f=>{s.enqueueAndForget(async()=>{Ms(this)&&(ae(xs,"Restarting streams for network reachability change."),await async function(g){const y=Ae(g);y.Ta.add(4),await zl(y),y.da.set("Unknown"),y.Ta.delete(4),await hh(y)}(this))})}),this.da=new d2(s,o)}}async function hh(r){if(Ms(r))for(const e of r.Ia)await e(!0)}async function zl(r){for(const e of r.Ia)await e(!1)}function YE(r,e){const n=Ae(r);n.Pa.has(e.targetId)||(n.Pa.set(e.targetId,e),zm(n)?jm(n):Ja(n).M_()&&km(n,e))}function Lm(r,e){const n=Ae(r),s=Ja(n);n.Pa.delete(e),s.M_()&&XE(n,e),n.Pa.size===0&&(s.M_()?s.N_():Ms(n)&&n.da.set("Unknown"))}function km(r,e){if(r.Aa.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Te.min())>0){const n=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ja(r).H_(e)}function XE(r,e){r.Aa.Ke(e),Ja(r).J_(e)}function jm(r){r.Aa=new lI({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>r.Pa.get(e)||null,Pt:()=>r.datastore.serializer.databaseId}),Ja(r).start(),r.da._a()}function zm(r){return Ms(r)&&!Ja(r).F_()&&r.Pa.size>0}function Ms(r){return Ae(r).Ta.size===0}function $E(r){r.Aa=void 0}async function p2(r){r.da.set("Online")}async function g2(r){r.Pa.forEach((e,n)=>{km(r,e)})}async function y2(r,e){$E(r),zm(r)?(r.da.ca(e),jm(r)):r.da.set("Unknown")}async function _2(r,e,n){if(r.da.set("Online"),e instanceof VE&&e.state===2&&e.cause)try{await async function(o,u){const f=u.cause;for(const p of u.targetIds)o.Pa.has(p)&&(await o.remoteSyncer.rejectListen(p,f),o.Pa.delete(p),o.Aa.removeTarget(p))}(r,e)}catch(s){ae(xs,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Kc(r,s)}else if(e instanceof Cc?r.Aa.Xe(e):e instanceof ME?r.Aa.ot(e):r.Aa.nt(e),!n.isEqual(Te.min()))try{const s=await FE(r.localStore);n.compareTo(s)>=0&&await function(u,f){const p=u.Aa.It(f);return p.targetChanges.forEach((g,y)=>{if(g.resumeToken.approximateByteSize()>0){const T=u.Pa.get(y);T&&u.Pa.set(y,T.withResumeToken(g.resumeToken,f))}}),p.targetMismatches.forEach((g,y)=>{const T=u.Pa.get(g);if(!T)return;u.Pa.set(g,T.withResumeToken(qt.EMPTY_BYTE_STRING,T.snapshotVersion)),XE(u,g);const I=new Sr(T.target,g,y,T.sequenceNumber);km(u,I)}),u.remoteSyncer.applyRemoteEvent(p)}(r,n)}catch(s){ae(xs,"Failed to raise snapshot:",s),await Kc(r,s)}}async function Kc(r,e,n){if(!Wa(e))throw e;r.Ta.add(1),await zl(r),r.da.set("Offline"),n||(n=()=>FE(r.localStore)),r.asyncQueue.enqueueRetryable(async()=>{ae(xs,"Retrying IndexedDB access"),await n(),r.Ta.delete(1),await hh(r)})}function ZE(r,e){return e().catch(n=>Kc(r,n,e))}async function fh(r){const e=Ae(r),n=Pr(e);let s=e.ha.length>0?e.ha[e.ha.length-1].batchId:Sm;for(;v2(e);)try{const o=await e2(e.localStore,s);if(o===null){e.ha.length===0&&n.N_();break}s=o.batchId,E2(e,o)}catch(o){await Kc(e,o)}WE(e)&&JE(e)}function v2(r){return Ms(r)&&r.ha.length<10}function E2(r,e){r.ha.push(e);const n=Pr(r);n.M_()&&n.Y_&&n.Z_(e.mutations)}function WE(r){return Ms(r)&&!Pr(r).F_()&&r.ha.length>0}function JE(r){Pr(r).start()}async function T2(r){Pr(r).ta()}async function A2(r){const e=Pr(r);for(const n of r.ha)e.Z_(n.mutations)}async function S2(r,e,n){const s=r.ha.shift(),o=Nm.from(s,e,n);await ZE(r,()=>r.remoteSyncer.applySuccessfulWrite(o)),await fh(r)}async function b2(r,e){e&&Pr(r).Y_&&await async function(s,o){if(function(f){return aI(f)&&f!==J.ABORTED}(o.code)){const u=s.ha.shift();Pr(s).O_(),await ZE(s,()=>s.remoteSyncer.rejectFailedWrite(u.batchId,o)),await fh(s)}}(r,e),WE(r)&&JE(r)}async function Pv(r,e){const n=Ae(r);n.asyncQueue.verifyOperationInProgress(),ae(xs,"RemoteStore received new credentials");const s=Ms(n);n.Ta.add(3),await zl(n),s&&n.da.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ta.delete(3),await hh(n)}async function w2(r,e){const n=Ae(r);e?(n.Ta.delete(2),await hh(n)):e||(n.Ta.add(2),await zl(n),n.da.set("Unknown"))}function Ja(r){return r.Ra||(r.Ra=function(n,s,o){const u=Ae(n);return u.ra(),new u2(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)}(r.datastore,r.asyncQueue,{e_:p2.bind(null,r),n_:g2.bind(null,r),i_:y2.bind(null,r),j_:_2.bind(null,r)}),r.Ia.push(async e=>{e?(r.Ra.O_(),zm(r)?jm(r):r.da.set("Unknown")):(await r.Ra.stop(),$E(r))})),r.Ra}function Pr(r){return r.Va||(r.Va=function(n,s,o){const u=Ae(n);return u.ra(),new c2(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)}(r.datastore,r.asyncQueue,{e_:()=>Promise.resolve(),n_:T2.bind(null,r),i_:b2.bind(null,r),X_:A2.bind(null,r),ea:S2.bind(null,r)}),r.Ia.push(async e=>{e?(r.Va.O_(),await fh(r)):(await r.Va.stop(),r.ha.length>0&&(ae(xs,`Stopping write stream with ${r.ha.length} pending writes`),r.ha=[]))})),r.Va}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bm{constructor(e,n,s,o,u){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=o,this.removalCallback=u,this.deferred=new xr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(f=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,o,u){const f=Date.now()+s,p=new Bm(e,n,f,o,u);return p.start(s),p}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new he(J.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function qm(r,e){if(zi("AsyncQueue",`${e}: ${r}`),Wa(r))return new he(J.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ua{static emptySet(e){return new Ua(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||de.comparator(n.key,s.key):(n,s)=>de.comparator(n.key,s.key),this.keyedMap=ml(),this.sortedSet=new it(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,s)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ua)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=s.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new Ua;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uv{constructor(){this.ma=new it(de.comparator)}track(e){const n=e.doc.key,s=this.ma.get(n);s?e.type!==0&&s.type===3?this.ma=this.ma.insert(n,e):e.type===3&&s.type!==1?this.ma=this.ma.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ma=this.ma.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ma=this.ma.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ma=this.ma.remove(n):e.type===1&&s.type===2?this.ma=this.ma.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ma=this.ma.insert(n,{type:2,doc:e.doc}):ye(63341,{Vt:e,fa:s}):this.ma=this.ma.insert(n,e)}ga(){const e=[];return this.ma.inorderTraversal((n,s)=>{e.push(s)}),e}}class Fa{constructor(e,n,s,o,u,f,p,g,y){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=u,this.fromCache=f,this.syncStateChanged=p,this.excludesMetadataChanges=g,this.hasCachedResults=y}static fromInitialDocuments(e,n,s,o,u){const f=[];return n.forEach(p=>{f.push({type:0,doc:p})}),new Fa(e,n,Ua.emptySet(n),f,s,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&sh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==s[o].type||!n[o].doc.isEqual(s[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R2{constructor(){this.pa=void 0,this.ya=[]}wa(){return this.ya.some(e=>e.Sa())}}class I2{constructor(){this.queries=Lv(),this.onlineState="Unknown",this.ba=new Set}terminate(){(function(n,s){const o=Ae(n),u=o.queries;o.queries=Lv(),u.forEach((f,p)=>{for(const g of p.ya)g.onError(s)})})(this,new he(J.ABORTED,"Firestore shutting down"))}}function Lv(){return new Os(r=>EE(r),sh)}async function C2(r,e){const n=Ae(r);let s=3;const o=e.query;let u=n.queries.get(o);u?!u.wa()&&e.Sa()&&(s=2):(u=new R2,s=e.Sa()?0:1);try{switch(s){case 0:u.pa=await n.onListen(o,!0);break;case 1:u.pa=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(f){const p=qm(f,`Initialization of query '${xa(e.query)}' failed`);return void e.onError(p)}n.queries.set(o,u),u.ya.push(e),e.Da(n.onlineState),u.pa&&e.va(u.pa)&&Hm(n)}async function x2(r,e){const n=Ae(r),s=e.query;let o=3;const u=n.queries.get(s);if(u){const f=u.ya.indexOf(e);f>=0&&(u.ya.splice(f,1),u.ya.length===0?o=e.Sa()?0:1:!u.wa()&&e.Sa()&&(o=2))}switch(o){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function N2(r,e){const n=Ae(r);let s=!1;for(const o of e){const u=o.query,f=n.queries.get(u);if(f){for(const p of f.ya)p.va(o)&&(s=!0);f.pa=o}}s&&Hm(n)}function D2(r,e,n){const s=Ae(r),o=s.queries.get(e);if(o)for(const u of o.ya)u.onError(n);s.queries.delete(e)}function Hm(r){r.ba.forEach(e=>{e.next()})}var im,kv;(kv=im||(im={})).Ca="default",kv.Cache="cache";class O2{constructor(e,n,s){this.query=e,this.Fa=n,this.Ma=!1,this.xa=null,this.onlineState="Unknown",this.options=s||{}}va(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new Fa(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Ma?this.Oa(e)&&(this.Fa.next(e),n=!0):this.Na(e,this.onlineState)&&(this.Ba(e),n=!0),this.xa=e,n}onError(e){this.Fa.error(e)}Da(e){this.onlineState=e;let n=!1;return this.xa&&!this.Ma&&this.Na(this.xa,e)&&(this.Ba(this.xa),n=!0),n}Na(e,n){if(!e.fromCache||!this.Sa())return!0;const s=n!=="Offline";return(!this.options.La||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Oa(e){if(e.docChanges.length>0)return!0;const n=this.xa&&this.xa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Ba(e){e=Fa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Ma=!0,this.Fa.next(e)}Sa(){return this.options.source!==im.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eT{constructor(e){this.key=e}}class tT{constructor(e){this.key=e}}class M2{constructor(e,n){this.query=e,this.Ga=n,this.za=null,this.hasCachedResults=!1,this.current=!1,this.ja=De(),this.mutatedKeys=De(),this.Ha=TE(e),this.Ja=new Ua(this.Ha)}get Ya(){return this.Ga}Za(e,n){const s=n?n.Xa:new Uv,o=n?n.Ja:this.Ja;let u=n?n.mutatedKeys:this.mutatedKeys,f=o,p=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((T,I)=>{const x=o.get(T),G=ah(this.query,I)?I:null,Z=!!x&&this.mutatedKeys.has(x.key),F=!!G&&(G.hasLocalMutations||this.mutatedKeys.has(G.key)&&G.hasCommittedMutations);let q=!1;x&&G?x.data.isEqual(G.data)?Z!==F&&(s.track({type:3,doc:G}),q=!0):this.eu(x,G)||(s.track({type:2,doc:G}),q=!0,(g&&this.Ha(G,g)>0||y&&this.Ha(G,y)<0)&&(p=!0)):!x&&G?(s.track({type:0,doc:G}),q=!0):x&&!G&&(s.track({type:1,doc:x}),q=!0,(g||y)&&(p=!0)),q&&(G?(f=f.add(G),u=F?u.add(T):u.delete(T)):(f=f.delete(T),u=u.delete(T)))}),this.query.limit!==null)for(;f.size>this.query.limit;){const T=this.query.limitType==="F"?f.last():f.first();f=f.delete(T.key),u=u.delete(T.key),s.track({type:1,doc:T})}return{Ja:f,Xa:s,Cs:p,mutatedKeys:u}}eu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,o){const u=this.Ja;this.Ja=e.Ja,this.mutatedKeys=e.mutatedKeys;const f=e.Xa.ga();f.sort((T,I)=>function(G,Z){const F=q=>{switch(q){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ye(20277,{Vt:q})}};return F(G)-F(Z)}(T.type,I.type)||this.Ha(T.doc,I.doc)),this.tu(s),o=o!=null&&o;const p=n&&!o?this.nu():[],g=this.ja.size===0&&this.current&&!o?1:0,y=g!==this.za;return this.za=g,f.length!==0||y?{snapshot:new Fa(this.query,e.Ja,u,f,e.mutatedKeys,g===0,y,!1,!!s&&s.resumeToken.approximateByteSize()>0),ru:p}:{ru:p}}Da(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ja:this.Ja,Xa:new Uv,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ru:[]}}iu(e){return!this.Ga.has(e)&&!!this.Ja.has(e)&&!this.Ja.get(e).hasLocalMutations}tu(e){e&&(e.addedDocuments.forEach(n=>this.Ga=this.Ga.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ga=this.Ga.delete(n)),this.current=e.current)}nu(){if(!this.current)return[];const e=this.ja;this.ja=De(),this.Ja.forEach(s=>{this.iu(s.key)&&(this.ja=this.ja.add(s.key))});const n=[];return e.forEach(s=>{this.ja.has(s)||n.push(new tT(s))}),this.ja.forEach(s=>{e.has(s)||n.push(new eT(s))}),n}su(e){this.Ga=e.$s,this.ja=De();const n=this.Za(e.documents);return this.applyChanges(n,!0)}ou(){return Fa.fromInitialDocuments(this.query,this.Ja,this.mutatedKeys,this.za===0,this.hasCachedResults)}}const Gm="SyncEngine";class V2{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class P2{constructor(e){this.key=e,this._u=!1}}class U2{constructor(e,n,s,o,u,f){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=f,this.au={},this.uu=new Os(p=>EE(p),sh),this.cu=new Map,this.lu=new Set,this.hu=new it(de.comparator),this.Pu=new Map,this.Tu=new Mm,this.Iu={},this.Eu=new Map,this.du=Ga.lr(),this.onlineState="Unknown",this.Au=void 0}get isPrimaryClient(){return this.Au===!0}}async function L2(r,e,n=!0){const s=oT(r);let o;const u=s.uu.get(e);return u?(s.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.ou()):o=await nT(s,e,n,!0),o}async function k2(r,e){const n=oT(r);await nT(n,e,!0,!1)}async function nT(r,e,n,s){const o=await t2(r.localStore,ai(e)),u=o.targetId,f=r.sharedClientState.addLocalQueryTarget(u,n);let p;return s&&(p=await j2(r,e,u,f==="current",o.resumeToken)),r.isPrimaryClient&&n&&YE(r.remoteStore,o),p}async function j2(r,e,n,s,o){r.Ru=(I,x,G)=>async function(F,q,re,se){let le=q.view.Za(re);le.Cs&&(le=await Nv(F.localStore,q.query,!1).then(({documents:M})=>q.view.Za(M,le)));const Oe=se&&se.targetChanges.get(q.targetId),Ee=se&&se.targetMismatches.get(q.targetId)!=null,Me=q.view.applyChanges(le,F.isPrimaryClient,Oe,Ee);return zv(F,q.targetId,Me.ru),Me.snapshot}(r,I,x,G);const u=await Nv(r.localStore,e,!0),f=new M2(e,u.$s),p=f.Za(u.documents),g=jl.createSynthesizedTargetChangeForCurrentChange(n,s&&r.onlineState!=="Offline",o),y=f.applyChanges(p,r.isPrimaryClient,g);zv(r,n,y.ru);const T=new V2(e,n,f);return r.uu.set(e,T),r.cu.has(n)?r.cu.get(n).push(e):r.cu.set(n,[e]),y.snapshot}async function z2(r,e,n){const s=Ae(r),o=s.uu.get(e),u=s.cu.get(o.targetId);if(u.length>1)return s.cu.set(o.targetId,u.filter(f=>!sh(f,e))),void s.uu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await tm(s.localStore,o.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(o.targetId),n&&Lm(s.remoteStore,o.targetId),rm(s,o.targetId)}).catch(Za)):(rm(s,o.targetId),await tm(s.localStore,o.targetId,!0))}async function B2(r,e){const n=Ae(r),s=n.uu.get(e),o=n.cu.get(s.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),Lm(n.remoteStore,s.targetId))}async function q2(r,e,n){const s=X2(r);try{const o=await function(f,p){const g=Ae(f),y=St.now(),T=p.reduce((G,Z)=>G.add(Z.key),De());let I,x;return g.persistence.runTransaction("Locally write mutations","readwrite",G=>{let Z=Bi(),F=De();return g.Bs.getEntries(G,T).next(q=>{Z=q,Z.forEach((re,se)=>{se.isValidDocument()||(F=F.add(re))})}).next(()=>g.localDocuments.getOverlayedDocuments(G,Z)).next(q=>{I=q;const re=[];for(const se of p){const le=tI(se,I.get(se.key).overlayedDocument);le!=null&&re.push(new jr(se.key,le,fE(le.value.mapValue),kn.exists(!0)))}return g.mutationQueue.addMutationBatch(G,y,re,p)}).next(q=>{x=q;const re=q.applyToLocalDocumentSet(I,F);return g.documentOverlayCache.saveOverlays(G,q.batchId,re)})}).then(()=>({batchId:x.batchId,changes:SE(I)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),function(f,p,g){let y=f.Iu[f.currentUser.toKey()];y||(y=new it(we)),y=y.insert(p,g),f.Iu[f.currentUser.toKey()]=y}(s,o.batchId,n),await Bl(s,o.changes),await fh(s.remoteStore)}catch(o){const u=qm(o,"Failed to persist write");n.reject(u)}}async function iT(r,e){const n=Ae(r);try{const s=await WI(n.localStore,e);e.targetChanges.forEach((o,u)=>{const f=n.Pu.get(u);f&&(qe(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?f._u=!0:o.modifiedDocuments.size>0?qe(f._u,14607):o.removedDocuments.size>0&&(qe(f._u,42227),f._u=!1))}),await Bl(n,s,e)}catch(s){await Za(s)}}function jv(r,e,n){const s=Ae(r);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const o=[];s.uu.forEach((u,f)=>{const p=f.view.Da(e);p.snapshot&&o.push(p.snapshot)}),function(f,p){const g=Ae(f);g.onlineState=p;let y=!1;g.queries.forEach((T,I)=>{for(const x of I.ya)x.Da(p)&&(y=!0)}),y&&Hm(g)}(s.eventManager,e),o.length&&s.au.j_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function H2(r,e,n){const s=Ae(r);s.sharedClientState.updateQueryState(e,"rejected",n);const o=s.Pu.get(e),u=o&&o.key;if(u){let f=new it(de.comparator);f=f.insert(u,Yt.newNoDocument(u,Te.min()));const p=De().add(u),g=new uh(Te.min(),new Map,new it(we),f,p);await iT(s,g),s.hu=s.hu.remove(u),s.Pu.delete(e),Fm(s)}else await tm(s.localStore,e,!1).then(()=>rm(s,e,n)).catch(Za)}async function G2(r,e){const n=Ae(r),s=e.batch.batchId;try{const o=await ZI(n.localStore,e);sT(n,s,null),rT(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await Bl(n,o)}catch(o){await Za(o)}}async function F2(r,e,n){const s=Ae(r);try{const o=await function(f,p){const g=Ae(f);return g.persistence.runTransaction("Reject batch","readwrite-primary",y=>{let T;return g.mutationQueue.lookupMutationBatch(y,p).next(I=>(qe(I!==null,37113),T=I.keys(),g.mutationQueue.removeMutationBatch(y,I))).next(()=>g.mutationQueue.performConsistencyCheck(y)).next(()=>g.documentOverlayCache.removeOverlaysForBatchId(y,T,p)).next(()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,T)).next(()=>g.localDocuments.getDocuments(y,T))})}(s.localStore,e);sT(s,e,n),rT(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await Bl(s,o)}catch(o){await Za(o)}}function rT(r,e){(r.Eu.get(e)||[]).forEach(n=>{n.resolve()}),r.Eu.delete(e)}function sT(r,e,n){const s=Ae(r);let o=s.Iu[s.currentUser.toKey()];if(o){const u=o.get(e);u&&(n?u.reject(n):u.resolve(),o=o.remove(e)),s.Iu[s.currentUser.toKey()]=o}}function rm(r,e,n=null){r.sharedClientState.removeLocalQueryTarget(e);for(const s of r.cu.get(e))r.uu.delete(s),n&&r.au.Vu(s,n);r.cu.delete(e),r.isPrimaryClient&&r.Tu.Hr(e).forEach(s=>{r.Tu.containsKey(s)||aT(r,s)})}function aT(r,e){r.lu.delete(e.path.canonicalString());const n=r.hu.get(e);n!==null&&(Lm(r.remoteStore,n),r.hu=r.hu.remove(e),r.Pu.delete(n),Fm(r))}function zv(r,e,n){for(const s of n)s instanceof eT?(r.Tu.addReference(s.key,e),Q2(r,s)):s instanceof tT?(ae(Gm,"Document no longer in limbo: "+s.key),r.Tu.removeReference(s.key,e),r.Tu.containsKey(s.key)||aT(r,s.key)):ye(19791,{mu:s})}function Q2(r,e){const n=e.key,s=n.path.canonicalString();r.hu.get(n)||r.lu.has(s)||(ae(Gm,"New document in limbo: "+n),r.lu.add(s),Fm(r))}function Fm(r){for(;r.lu.size>0&&r.hu.size<r.maxConcurrentLimboResolutions;){const e=r.lu.values().next().value;r.lu.delete(e);const n=new de(tt.fromString(e)),s=r.du.next();r.Pu.set(s,new P2(n)),r.hu=r.hu.insert(n,s),YE(r.remoteStore,new Sr(ai(vE(n.path)),s,"TargetPurposeLimboResolution",th.le))}}async function Bl(r,e,n){const s=Ae(r),o=[],u=[],f=[];s.uu.isEmpty()||(s.uu.forEach((p,g)=>{f.push(s.Ru(g,e,n).then(y=>{var T;if((y||n)&&s.isPrimaryClient){const I=y?!y.fromCache:(T=n==null?void 0:n.targetChanges.get(g.targetId))===null||T===void 0?void 0:T.current;s.sharedClientState.updateQueryState(g.targetId,I?"current":"not-current")}if(y){o.push(y);const I=Pm.Rs(g.targetId,y);u.push(I)}}))}),await Promise.all(f),s.au.j_(o),await async function(g,y){const T=Ae(g);try{await T.persistence.runTransaction("notifyLocalViewChanges","readwrite",I=>$.forEach(y,x=>$.forEach(x.ds,G=>T.persistence.referenceDelegate.addReference(I,x.targetId,G)).next(()=>$.forEach(x.As,G=>T.persistence.referenceDelegate.removeReference(I,x.targetId,G)))))}catch(I){if(!Wa(I))throw I;ae(Um,"Failed to update sequence numbers: "+I)}for(const I of y){const x=I.targetId;if(!I.fromCache){const G=T.xs.get(x),Z=G.snapshotVersion,F=G.withLastLimboFreeSnapshotVersion(Z);T.xs=T.xs.insert(x,F)}}}(s.localStore,u))}async function K2(r,e){const n=Ae(r);if(!n.currentUser.isEqual(e)){ae(Gm,"User change. New user:",e.toKey());const s=await GE(n.localStore,e);n.currentUser=e,function(u,f){u.Eu.forEach(p=>{p.forEach(g=>{g.reject(new he(J.CANCELLED,f))})}),u.Eu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Bl(n,s.ks)}}function Y2(r,e){const n=Ae(r),s=n.Pu.get(e);if(s&&s._u)return De().add(s.key);{let o=De();const u=n.cu.get(e);if(!u)return o;for(const f of u){const p=n.uu.get(f);o=o.unionWith(p.view.Ya)}return o}}function oT(r){const e=Ae(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=iT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Y2.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=H2.bind(null,e),e.au.j_=N2.bind(null,e.eventManager),e.au.Vu=D2.bind(null,e.eventManager),e}function X2(r){const e=Ae(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=G2.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=F2.bind(null,e),e}class Yc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=ch(e.databaseInfo.databaseId),this.sharedClientState=this.pu(e),this.persistence=this.yu(e),await this.persistence.start(),this.localStore=this.wu(e),this.gcScheduler=this.Su(e,this.localStore),this.indexBackfillerScheduler=this.bu(e,this.localStore)}Su(e,n){return null}bu(e,n){return null}wu(e){return $I(this.persistence,new KI,e.initialUser,this.serializer)}yu(e){return new HE(Vm.fi,this.serializer)}pu(e){return new i2}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Yc.provider={build:()=>new Yc};class $2 extends Yc{constructor(e){super(),this.cacheSizeBytes=e}Su(e,n){qe(this.persistence.referenceDelegate instanceof Qc,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new OI(s,e.asyncQueue,n)}yu(e){const n=this.cacheSizeBytes!==void 0?rn.withCacheSize(this.cacheSizeBytes):rn.DEFAULT;return new HE(s=>Qc.fi(s,n),this.serializer)}}class sm{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>jv(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=K2.bind(null,this.syncEngine),await w2(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new I2}()}createDatastore(e){const n=ch(e.databaseInfo.databaseId),s=function(u){return new l2(u)}(e.databaseInfo);return function(u,f,p,g){return new f2(u,f,p,g)}(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return function(s,o,u,f,p){return new m2(s,o,u,f,p)}(this.localStore,this.datastore,e.asyncQueue,n=>jv(this.syncEngine,n,0),function(){return Mv.C()?new Mv:new r2}())}createSyncEngine(e,n){return function(o,u,f,p,g,y,T){const I=new U2(o,u,f,p,g,y);return T&&(I.Au=!0),I}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(o){const u=Ae(o);ae(xs,"RemoteStore shutting down."),u.Ta.add(5),await zl(u),u.Ea.shutdown(),u.da.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}sm.provider={build:()=>new sm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z2{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.vu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.vu(this.observer.error,e):zi("Uncaught Error in snapshot listener:",e.toString()))}Cu(){this.muted=!0}vu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ur="FirestoreClient";class W2{constructor(e,n,s,o,u){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=o,this.user=Kt.UNAUTHENTICATED,this.clientId=nE.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(s,async f=>{ae(Ur,"Received user=",f.uid),await this.authCredentialListener(f),this.user=f}),this.appCheckCredentials.start(s,f=>(ae(Ur,"Received new app check token=",f),this.appCheckCredentialListener(f,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new xr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=qm(n,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function Pd(r,e){r.asyncQueue.verifyOperationInProgress(),ae(Ur,"Initializing OfflineComponentProvider");const n=r.configuration;await e.initialize(n);let s=n.initialUser;r.setCredentialChangeListener(async o=>{s.isEqual(o)||(await GE(e.localStore,o),s=o)}),e.persistence.setDatabaseDeletedListener(()=>r.terminate()),r._offlineComponents=e}async function Bv(r,e){r.asyncQueue.verifyOperationInProgress();const n=await J2(r);ae(Ur,"Initializing OnlineComponentProvider"),await e.initialize(n,r.configuration),r.setCredentialChangeListener(s=>Pv(e.remoteStore,s)),r.setAppCheckTokenChangeListener((s,o)=>Pv(e.remoteStore,o)),r._onlineComponents=e}async function J2(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){ae(Ur,"Using user provided OfflineComponentProvider");try{await Pd(r,r._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(o){return o.name==="FirebaseError"?o.code===J.FAILED_PRECONDITION||o.code===J.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(n))throw n;za("Error using user provided cache. Falling back to memory cache: "+n),await Pd(r,new Yc)}}else ae(Ur,"Using default OfflineComponentProvider"),await Pd(r,new $2(void 0));return r._offlineComponents}async function lT(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(ae(Ur,"Using user provided OnlineComponentProvider"),await Bv(r,r._uninitializedComponentsProvider._online)):(ae(Ur,"Using default OnlineComponentProvider"),await Bv(r,new sm))),r._onlineComponents}function eC(r){return lT(r).then(e=>e.syncEngine)}async function tC(r){const e=await lT(r),n=e.eventManager;return n.onListen=L2.bind(null,e.syncEngine),n.onUnlisten=z2.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=k2.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=B2.bind(null,e.syncEngine),n}function nC(r,e,n={}){const s=new xr;return r.asyncQueue.enqueueAndForget(async()=>function(u,f,p,g,y){const T=new Z2({next:x=>{T.Cu(),f.enqueueAndForget(()=>x2(u,I)),x.fromCache&&g.source==="server"?y.reject(new he(J.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(x)},error:x=>y.reject(x)}),I=new O2(p,T,{includeMetadataChanges:!0,La:!0});return C2(u,I)}(await tC(r),r.asyncQueue,e,n,s)),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uT(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qv=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cT(r,e,n){if(!n)throw new he(J.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function iC(r,e,n,s){if(e===!0&&s===!0)throw new he(J.INVALID_ARGUMENT,`${r} and ${n} cannot be used together.`)}function Hv(r){if(!de.isDocumentKey(r))throw new he(J.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function Gv(r){if(de.isDocumentKey(r))throw new he(J.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function Qm(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=function(s){return s.constructor?s.constructor.name:null}(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":ye(12329,{type:typeof r})}function Ns(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new he(J.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Qm(r);throw new he(J.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hT="firestore.googleapis.com",Fv=!0;class Qv{constructor(e){var n,s;if(e.host===void 0){if(e.ssl!==void 0)throw new he(J.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=hT,this.ssl=Fv}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:Fv;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=qE;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<NI)throw new he(J.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}iC("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=uT((s=e.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),function(u){if(u.timeoutSeconds!==void 0){if(isNaN(u.timeoutSeconds))throw new he(J.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (must not be NaN)`);if(u.timeoutSeconds<5)throw new he(J.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (minimum allowed value is 5)`);if(u.timeoutSeconds>30)throw new he(J.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(s,o){return s.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class dh{constructor(e,n,s,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Qv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new he(J.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new he(J.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Qv(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new aR;switch(s.type){case"firstParty":return new cR(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new he(J.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const s=qv.get(n);s&&(ae("ComponentProvider","Removing Datastore"),qv.delete(n),s.terminate())}(this),Promise.resolve()}}function rC(r,e,n,s={}){var o;r=Ns(r,dh);const u=Ol(e),f=r._getSettings(),p=Object.assign(Object.assign({},f),{emulatorOptions:r._getEmulatorOptions()}),g=`${e}:${n}`;u&&(a0(`https://${g}`),o0("Firestore",!0)),f.host!==hT&&f.host!==g&&za("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const y=Object.assign(Object.assign({},f),{host:g,ssl:u,emulatorOptions:s});if(!ws(y,p)&&(r._setSettings(y),s.mockUserToken)){let T,I;if(typeof s.mockUserToken=="string")T=s.mockUserToken,I=Kt.MOCK_USER;else{T=yS(s.mockUserToken,(o=r._app)===null||o===void 0?void 0:o.options.projectId);const x=s.mockUserToken.sub||s.mockUserToken.user_id;if(!x)throw new he(J.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");I=new Kt(x)}r._authCredentials=new oR(new eE(T,I))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mh{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new mh(this.firestore,e,this._query)}}class xn{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Nr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new xn(this.firestore,e,this._key)}}class Nr extends mh{constructor(e,n,s){super(e,n,vE(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new xn(this.firestore,null,new de(e))}withConverter(e){return new Nr(this.firestore,e,this._path)}}function sC(r,e,...n){if(r=Bt(r),cT("collection","path",e),r instanceof dh){const s=tt.fromString(e,...n);return Gv(s),new Nr(r,null,s)}{if(!(r instanceof xn||r instanceof Nr))throw new he(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(tt.fromString(e,...n));return Gv(s),new Nr(r.firestore,null,s)}}function Km(r,e,...n){if(r=Bt(r),arguments.length===1&&(e=nE.newId()),cT("doc","path",e),r instanceof dh){const s=tt.fromString(e,...n);return Hv(s),new xn(r,null,new de(s))}{if(!(r instanceof xn||r instanceof Nr))throw new he(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(tt.fromString(e,...n));return Hv(s),new xn(r.firestore,r instanceof Nr?r.converter:null,new de(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kv="AsyncQueue";class Yv{constructor(e=Promise.resolve()){this.zu=[],this.ju=!1,this.Hu=[],this.Ju=null,this.Yu=!1,this.Zu=!1,this.Xu=[],this.C_=new QE(this,"async_queue_retry"),this.ec=()=>{const s=Vd();s&&ae(Kv,"Visibility state changed to "+s.visibilityState),this.C_.p_()},this.tc=e;const n=Vd();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.ec)}get isShuttingDown(){return this.ju}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.nc(),this.rc(e)}enterRestrictedMode(e){if(!this.ju){this.ju=!0,this.Zu=e||!1;const n=Vd();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.ec)}}enqueue(e){if(this.nc(),this.ju)return new Promise(()=>{});const n=new xr;return this.rc(()=>this.ju&&this.Zu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.zu.push(e),this.sc()))}async sc(){if(this.zu.length!==0){try{await this.zu[0](),this.zu.shift(),this.C_.reset()}catch(e){if(!Wa(e))throw e;ae(Kv,"Operation failed with retryable error: "+e)}this.zu.length>0&&this.C_.f_(()=>this.sc())}}rc(e){const n=this.tc.then(()=>(this.Yu=!0,e().catch(s=>{throw this.Ju=s,this.Yu=!1,zi("INTERNAL UNHANDLED ERROR: ",Xv(s)),s}).then(s=>(this.Yu=!1,s))));return this.tc=n,n}enqueueAfterDelay(e,n,s){this.nc(),this.Xu.indexOf(e)>-1&&(n=0);const o=Bm.createAndSchedule(this,e,n,s,u=>this.oc(u));return this.Hu.push(o),o}nc(){this.Ju&&ye(47125,{_c:Xv(this.Ju)})}verifyOperationInProgress(){}async ac(){let e;do e=this.tc,await e;while(e!==this.tc)}uc(e){for(const n of this.Hu)if(n.timerId===e)return!0;return!1}cc(e){return this.ac().then(()=>{this.Hu.sort((n,s)=>n.targetTimeMs-s.targetTimeMs);for(const n of this.Hu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.ac()})}lc(e){this.Xu.push(e)}oc(e){const n=this.Hu.indexOf(e);this.Hu.splice(n,1)}}function Xv(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}class ql extends dh{constructor(e,n,s,o){super(e,n,s,o),this.type="firestore",this._queue=new Yv,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Yv(e),this._firestoreClient=void 0,await e}}}function aC(r,e){const n=typeof r=="object"?r:h0(),s=typeof r=="string"?r:jc,o=fm(n,"firestore").getImmediate({identifier:s});if(!o._initialized){const u=pS("firestore");u&&rC(o,...u)}return o}function fT(r){if(r._terminated)throw new he(J.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||oC(r),r._firestoreClient}function oC(r){var e,n,s;const o=r._freezeSettings(),u=function(p,g,y,T){return new wR(p,g,y,T.host,T.ssl,T.experimentalForceLongPolling,T.experimentalAutoDetectLongPolling,uT(T.experimentalLongPollingOptions),T.useFetchStreams,T.isUsingEmulator)}(r._databaseId,((e=r._app)===null||e===void 0?void 0:e.options.appId)||"",r._persistenceKey,o);r._componentsProvider||!((n=o.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((s=o.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(r._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),r._firestoreClient=new W2(r._authCredentials,r._appCheckCredentials,r._queue,u,r._componentsProvider&&function(p){const g=p==null?void 0:p._online.build();return{_offline:p==null?void 0:p._offline.build(g),_online:g}}(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qa{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Qa(qt.fromBase64String(e))}catch(n){throw new he(J.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Qa(qt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ph{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new he(J.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new zt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ym{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xm{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new he(J.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new he(J.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return we(this._lat,e._lat)||we(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $m{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(s,o){if(s.length!==o.length)return!1;for(let u=0;u<s.length;++u)if(s[u]!==o[u])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lC=/^__.*__$/;class uC{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new jr(e,this.data,this.fieldMask,n,this.fieldTransforms):new kl(e,this.data,n,this.fieldTransforms)}}class dT{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new jr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function mT(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ye(40011,{hc:r})}}class Zm{constructor(e,n,s,o,u,f){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=o,u===void 0&&this.Pc(),this.fieldTransforms=u||[],this.fieldMask=f||[]}get path(){return this.settings.path}get hc(){return this.settings.hc}Tc(e){return new Zm(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ic(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),o=this.Tc({path:s,Ec:!1});return o.dc(e),o}Ac(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),o=this.Tc({path:s,Ec:!1});return o.Pc(),o}Rc(e){return this.Tc({path:void 0,Ec:!0})}Vc(e){return Xc(e,this.settings.methodName,this.settings.mc||!1,this.path,this.settings.fc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Pc(){if(this.path)for(let e=0;e<this.path.length;e++)this.dc(this.path.get(e))}dc(e){if(e.length===0)throw this.Vc("Document fields must not be empty");if(mT(this.hc)&&lC.test(e))throw this.Vc('Document fields cannot begin and end with "__"')}}class cC{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||ch(e)}gc(e,n,s,o=!1){return new Zm({hc:e,methodName:n,fc:s,path:zt.emptyPath(),Ec:!1,mc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function pT(r){const e=r._freezeSettings(),n=ch(r._databaseId);return new cC(r._databaseId,!!e.ignoreUndefinedProperties,n)}function hC(r,e,n,s,o,u={}){const f=r.gc(u.merge||u.mergeFields?2:0,e,n,o);Wm("Data must be an object, but it was:",f,s);const p=gT(s,f);let g,y;if(u.merge)g=new pn(f.fieldMask),y=f.fieldTransforms;else if(u.mergeFields){const T=[];for(const I of u.mergeFields){const x=am(e,I,n);if(!f.contains(x))throw new he(J.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);_T(T,x)||T.push(x)}g=new pn(T),y=f.fieldTransforms.filter(I=>g.covers(I.field))}else g=null,y=f.fieldTransforms;return new uC(new sn(p),g,y)}class gh extends Ym{_toFieldTransform(e){if(e.hc!==2)throw e.hc===1?e.Vc(`${this._methodName}() can only appear at the top level of your update data`):e.Vc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof gh}}function fC(r,e,n,s){const o=r.gc(1,e,n);Wm("Data must be an object, but it was:",o,s);const u=[],f=sn.empty();kr(s,(g,y)=>{const T=Jm(e,g,n);y=Bt(y);const I=o.Ac(T);if(y instanceof gh)u.push(T);else{const x=yh(y,I);x!=null&&(u.push(T),f.set(T,x))}});const p=new pn(u);return new dT(f,p,o.fieldTransforms)}function dC(r,e,n,s,o,u){const f=r.gc(1,e,n),p=[am(e,s,n)],g=[o];if(u.length%2!=0)throw new he(J.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let x=0;x<u.length;x+=2)p.push(am(e,u[x])),g.push(u[x+1]);const y=[],T=sn.empty();for(let x=p.length-1;x>=0;--x)if(!_T(y,p[x])){const G=p[x];let Z=g[x];Z=Bt(Z);const F=f.Ac(G);if(Z instanceof gh)y.push(G);else{const q=yh(Z,F);q!=null&&(y.push(G),T.set(G,q))}}const I=new pn(y);return new dT(T,I,f.fieldTransforms)}function yh(r,e){if(yT(r=Bt(r)))return Wm("Unsupported field value:",e,r),gT(r,e);if(r instanceof Ym)return function(s,o){if(!mT(o.hc))throw o.Vc(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Vc(`${s._methodName}() is not currently supported inside arrays`);const u=s._toFieldTransform(o);u&&o.fieldTransforms.push(u)}(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.Ec&&e.hc!==4)throw e.Vc("Nested arrays are not supported");return function(s,o){const u=[];let f=0;for(const p of s){let g=yh(p,o.Rc(f));g==null&&(g={nullValue:"NULL_VALUE"}),u.push(g),f++}return{arrayValue:{values:u}}}(r,e)}return function(s,o){if((s=Bt(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return XR(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const u=St.fromDate(s);return{timestampValue:Fc(o.serializer,u)}}if(s instanceof St){const u=new St(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Fc(o.serializer,u)}}if(s instanceof Xm)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Qa)return{bytesValue:PE(o.serializer,s._byteString)};if(s instanceof xn){const u=o.databaseId,f=s.firestore._databaseId;if(!f.isEqual(u))throw o.Vc(`Document reference is for database ${f.projectId}/${f.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:Om(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof $m)return function(f,p){return{mapValue:{fields:{[cE]:{stringValue:hE},[zc]:{arrayValue:{values:f.toArray().map(y=>{if(typeof y!="number")throw p.Vc("VectorValues must only contain numeric values.");return Cm(p.serializer,y)})}}}}}}(s,o);throw o.Vc(`Unsupported field value: ${Qm(s)}`)}(r,e)}function gT(r,e){const n={};return rE(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):kr(r,(s,o)=>{const u=yh(o,e.Ic(s));u!=null&&(n[s]=u)}),{mapValue:{fields:n}}}function yT(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof St||r instanceof Xm||r instanceof Qa||r instanceof xn||r instanceof Ym||r instanceof $m)}function Wm(r,e,n){if(!yT(n)||!function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)}(n)){const s=Qm(n);throw s==="an object"?e.Vc(r+" a custom object"):e.Vc(r+" "+s)}}function am(r,e,n){if((e=Bt(e))instanceof ph)return e._internalPath;if(typeof e=="string")return Jm(r,e);throw Xc("Field path arguments must be of type string or ",r,!1,void 0,n)}const mC=new RegExp("[~\\*/\\[\\]]");function Jm(r,e,n){if(e.search(mC)>=0)throw Xc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,n);try{return new ph(...e.split("."))._internalPath}catch{throw Xc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,n)}}function Xc(r,e,n,s,o){const u=s&&!s.isEmpty(),f=o!==void 0;let p=`Function ${e}() called with invalid data`;n&&(p+=" (via `toFirestore()`)"),p+=". ";let g="";return(u||f)&&(g+=" (found",u&&(g+=` in field ${s}`),f&&(g+=` in document ${o}`),g+=")"),new he(J.INVALID_ARGUMENT,p+r+g)}function _T(r,e){return r.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vT{constructor(e,n,s,o,u){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new xn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new pC(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(ET("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class pC extends vT{data(){return super.data()}}function ET(r,e){return typeof e=="string"?Jm(r,e):e instanceof ph?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gC(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new he(J.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class yC{convertValue(e,n="none"){switch(Vr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ht(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Mr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ye(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return kr(e,(o,u)=>{s[o]=this.convertValue(u,n)}),s}convertVectorValue(e){var n,s,o;const u=(o=(s=(n=e.fields)===null||n===void 0?void 0:n[zc].arrayValue)===null||s===void 0?void 0:s.values)===null||o===void 0?void 0:o.map(f=>ht(f.doubleValue));return new $m(u)}convertGeoPoint(e){return new Xm(ht(e.latitude),ht(e.longitude))}convertArray(e,n){return(e.values||[]).map(s=>this.convertValue(s,n))}convertServerTimestamp(e,n){switch(n){case"previous":const s=ih(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(Il(e));default:return null}}convertTimestamp(e){const n=Or(e);return new St(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=tt.fromString(e);qe(BE(s),9688,{name:e});const o=new Cl(s.get(1),s.get(3)),u=new de(s.popFirst(5));return o.isEqual(n)||zi(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _C(r,e,n){let s;return s=r?r.toFirestore(e):e,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vc{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class vC extends vT{constructor(e,n,s,o,u,f){super(e,n,s,o,f),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new xc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(ET("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}}class xc extends vC{data(e={}){return super.data(e)}}class EC{constructor(e,n,s,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new vc(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(s=>{e.call(n,new xc(this._firestore,this._userDataWriter,s.key,s,new vc(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new he(J.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(o,u){if(o._snapshot.oldDocs.isEmpty()){let f=0;return o._snapshot.docChanges.map(p=>{const g=new xc(o._firestore,o._userDataWriter,p.doc.key,p.doc,new vc(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);return p.doc,{type:"added",doc:g,oldIndex:-1,newIndex:f++}})}{let f=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(p=>u||p.type!==3).map(p=>{const g=new xc(o._firestore,o._userDataWriter,p.doc.key,p.doc,new vc(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,T=-1;return p.type!==0&&(y=f.indexOf(p.doc.key),f=f.delete(p.doc.key)),p.type!==1&&(f=f.add(p.doc),T=f.indexOf(p.doc.key)),{type:TC(p.type),doc:g,oldIndex:y,newIndex:T}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function TC(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ye(61501,{type:r})}}class AC extends yC{constructor(e){super(),this.firestore=e}convertBytes(e){return new Qa(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new xn(this.firestore,null,n)}}function SC(r){r=Ns(r,mh);const e=Ns(r.firestore,ql),n=fT(e),s=new AC(e);return gC(r._query),nC(n,r._query).then(o=>new EC(e,s,r,o))}function bC(r,e,n,...s){r=Ns(r,xn);const o=Ns(r.firestore,ql),u=pT(o);let f;return f=typeof(e=Bt(e))=="string"||e instanceof ph?dC(u,"updateDoc",r._key,e,n,s):fC(u,"updateDoc",r._key,e),ep(o,[f.toMutation(r._key,kn.exists(!0))])}function wC(r){return ep(Ns(r.firestore,ql),[new xm(r._key,kn.none())])}function RC(r,e){const n=Ns(r.firestore,ql),s=Km(r),o=_C(r.converter,e);return ep(n,[hC(pT(r.firestore),"addDoc",s._key,o,r.converter!==null,{}).toMutation(s._key,kn.exists(!1))]).then(()=>s)}function ep(r,e){return function(s,o){const u=new xr;return s.asyncQueue.enqueueAndForget(async()=>q2(await eC(s),o,u)),u.promise}(fT(r),e)}(function(e,n=!0){(function(o){$a=o})(Ka),ka(new Rs("firestore",(s,{instanceIdentifier:o,options:u})=>{const f=s.getProvider("app").getImmediate(),p=new ql(new lR(s.getProvider("auth-internal")),new hR(f,s.getProvider("app-check-internal")),function(y,T){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new he(J.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Cl(y.options.projectId,T)}(f,o),f);return u=Object.assign({useFetchStreams:n},u),p._setSettings(u),p},"PUBLIC").setMultipleInstances(!0)),Rr(ev,tv,e),Rr(ev,tv,"esm2017")})();const IC={apiKey:"AIzaSyBUv0GHD-JOVo-QOJKKe411BVaVhdS9MfE",authDomain:"appauth-252bc.firebaseapp.com",projectId:"appauth-252bc",storageBucket:"appauth-252bc.firebasestorage.app",messagingSenderId:"742248457265",appId:"1:742248457265:web:81ebad55e7905591a8a110",measurementId:"G-LTGXWX16HQ"},TT=c0(IC),om=nR(TT),tp=aC(TT),AT=sC(tp,"products"),CC=r=>{const e=r.data();return{id:r.id,name:e.name||"",description:e.description||"",imageUrl:e.imageUrl||"",category:e.category||"Otra",gender:e.gender||"Unisex",author:e.author||"",sizes:Array.isArray(e.sizes)?e.sizes.filter(n=>typeof n=="number"):[]}},xC=async()=>{try{return(await SC(AT)).docs.map(CC)}catch(r){throw console.error("Error fetching products from Firestore:",r),new Error("No se pudieron cargar los productos desde la base de datos.")}},NC=async r=>{try{const e=await RC(AT,r);return{...r,id:e.id}}catch(e){throw console.error("Error adding product to Firestore:",e),new Error("Error al aadir el producto a la base de datos.")}},DC=async(r,e)=>{try{const n=Km(tp,"products",r);await bC(n,e)}catch(n){throw console.error("Error updating product in Firestore:",n),new Error("Error al actualizar el producto en la base de datos.")}},OC=async r=>{try{const e=Km(tp,"products",r);await wC(e)}catch(e){throw console.error("Error deleting product from Firestore:",e),new Error("Error al eliminar el producto de la base de datos.")}},MC="https://script.google.com/macros/s/AKfycbzadV7VtzQdtCnuZBOhHQjp6gbS1IsBfDAYfLWFnV-N0pQCRonLYRfuSuZifx74QEzNZQ/exec",VC=async()=>await xC(),PC=async r=>{console.log("Enviando pedido a Google Apps Script:",r);try{const e=await fetch(MC,{method:"POST",mode:"cors",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({data:JSON.stringify(r)}).toString()}),n=await e.text();let s;try{s=JSON.parse(n)}catch{return console.error("Respuesta de Apps Script no es JSON vlido:",n),{success:!1,message:`Error de comunicacin con el servidor de pedidos. Respuesta (primeros 150 caracteres): ${n.substring(0,150)}...`}}return e.ok&&s.success?(console.log("Pedido enviado con xito a Google Sheets:",s),{success:!0,message:s.message||"Pedido realizado con xito! Nos comunicaremos pronto contigo.",orderId:s.orderId}):(console.error("Error al enviar el pedido a Google Sheets. Respuesta del script:",s),{success:!1,message:s.message||"Hubo un problema al procesar tu pedido con el servidor.",scriptErrorDetails:s.scriptErrorDetails})}catch(e){console.error("Error de red al enviar el pedido:",e);const n=e instanceof Error?e.message:String(e);let s=`No se pudo conectar con el servidor de pedidos. Verifica tu conexin a internet. Detalle: ${n}`;return n.toLowerCase().includes("failed to fetch")&&(s="Error crtico al contactar el servidor de pedidos. El servidor podra estar inaccesible o hay un problema de CORS no manejado por el servidor para errores."),{success:!1,message:s}}},UC=({className:r})=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:r||"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"})}),LC=({cartItemCount:r,onCartClick:e,onLogoClick:n,searchTerm:s,onSearchChange:o,genderOptions:u,selectedGender:f,onGenderChange:p,authorOptions:g,selectedAuthor:y,onAuthorChange:T})=>{const I="p-2 rounded-md bg-white text-gray-900 border border-gray-300 focus:ring-2 focus:ring-secondary focus:border-secondary shadow-sm w-full sm:w-auto text-sm placeholder-gray-500";return S.jsx("nav",{className:"bg-primary shadow-lg sticky top-0 z-50",children:S.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[S.jsxs("div",{className:"flex items-center justify-between h-16",children:[S.jsx("div",{className:"flex items-center",children:S.jsx("button",{onClick:n,className:"flex-shrink-0 text-white text-2xl font-bold hover:opacity-80 transition-opacity",children:"Millanel Resistencia"})}),S.jsx("div",{className:"flex items-center",children:S.jsxs("button",{onClick:e,className:"relative p-1 rounded-full text-gray-200 hover:text-white focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-primary focus:ring-white transition-colors","aria-label":"Ver carrito",children:[S.jsx(UC,{className:"h-7 w-7"}),r>0&&S.jsx("span",{className:"absolute -top-1 -right-1 inline-flex items-center justify-center px-2 py-1 text-xs font-bold leading-none text-red-100 bg-red-600 rounded-full",children:r})]})})]}),S.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center space-y-2 sm:space-y-0 sm:space-x-3 pb-3 pt-1",children:[S.jsx("input",{type:"search",placeholder:"Buscar por nombre o autor...",value:s,onChange:x=>o(x.target.value),className:`${I} flex-grow`,"aria-label":"Buscar productos"}),S.jsxs("div",{className:"flex space-x-3",children:[S.jsx("select",{value:f,onChange:x=>p(x.target.value),className:`${I} sm:min-w-[150px]`,"aria-label":"Filtrar por gnero",children:u.map(x=>S.jsx("option",{value:x,children:x},x))}),S.jsx("select",{value:y,onChange:x=>T(x.target.value),className:`${I} sm:min-w-[180px]`,"aria-label":"Filtrar por autor",children:g.map(x=>S.jsx("option",{value:x,children:x},x))})]})]})]})})},Ra={30:11e3,60:14e3,100:2e4},kC=["Fragancia","Otra"],jC=({product:r,onAddToCart:e})=>{const n=()=>r.sizes.find(y=>Ra[y]!==void 0)||0,[s,o]=Ot.useState(n()),u=Ot.useMemo(()=>!s||Ra[s]===void 0?0:Ra[s],[s]),f=()=>{s>0&&Ra[s]!==void 0&&e(r,s,u)};Ot.useEffect(()=>{const g=n();(s===0&&g!==0||s!==0&&Ra[s]===void 0)&&o(g)},[r.sizes,s]);const p=r.sizes.filter(g=>Ra[g]!==void 0);return S.jsxs("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden flex flex-col transition-all duration-300 hover:shadow-2xl h-full",children:[S.jsx("img",{className:"w-full h-48 object-cover bg-gray-200",src:r.imageUrl||"https://via.placeholder.com/300x200.png?text=Sin+Imagen",alt:r.name,onError:g=>g.currentTarget.src="https://via.placeholder.com/300x200.png?text=Error+Img"}),S.jsxs("div",{className:"p-6 flex flex-col flex-grow",children:[S.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-1",children:r.name}),S.jsxs("p",{className:"text-sm text-gray-500 mb-1",children:["Por: ",r.author]}),S.jsxs("p",{className:"text-sm text-gray-500 mb-2",children:["Gnero: ",r.gender]}),S.jsx("p",{className:"text-sm text-gray-600 flex-grow mb-3",children:r.description}),p.length>0?S.jsxs("div",{className:"mb-4",children:[S.jsx("p",{className:"text-sm font-medium text-gray-700 mb-1",children:"Tamao:"}),S.jsx("div",{className:"flex space-x-2 flex-wrap gap-y-2",children:p.map(g=>S.jsxs("button",{onClick:()=>o(g),className:`px-3 py-1 border rounded-md text-sm font-medium transition-colors
                    ${s===g?"bg-primary text-white border-primary ring-2 ring-primary ring-offset-1":"bg-gray-100 text-gray-700 border-gray-300 hover:bg-gray-200"}`,children:[g,"ml"]},g))})]}):S.jsx("p",{className:"text-sm text-red-500 mb-4",children:"No hay tamaos con precios definidos para este producto."}),S.jsxs("div",{className:"flex justify-between items-center mt-auto",children:[S.jsx("p",{className:"text-2xl font-bold text-primary",children:u>0?`$${u.toFixed(2)}`:"N/D"}),S.jsx("button",{onClick:f,disabled:!s||u===0,className:"bg-accent hover:bg-purple-600 text-white font-semibold py-2 px-4 rounded-lg shadow-md hover:shadow-lg transition-all duration-200 transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-opacity-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Aadir"})]})]})]})},$v=({products:r,onAddToCart:e})=>r.length===0?S.jsx("p",{className:"text-center text-gray-500 py-10 text-lg",children:"No se encontraron productos que coincidan con tu bsqueda o filtros."}):S.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[S.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-8 text-center",children:"Nuestras Fragancias"}),S.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:r.map(n=>S.jsx(jC,{product:n,onAddToCart:e},n.id))})]}),zC=({className:r})=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:r||"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:S.jsx("path",{fillRule:"evenodd",d:"M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z",clipRule:"evenodd"})}),BC=({className:r})=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:r||"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:S.jsx("path",{fillRule:"evenodd",d:"M5 10a1 1 0 011-1h8a1 1 0 110 2H6a1 1 0 01-1-1z",clipRule:"evenodd"})}),ST=({className:r})=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:r||"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:S.jsx("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd"})}),qC=({item:r,onUpdateQuantity:e,onRemoveItem:n})=>{const s=o=>{o>=1?e(r.id,r.selectedSize,o):o===0&&n(r.id,r.selectedSize)};return S.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 bg-white rounded-lg shadow mb-2",children:[S.jsx("img",{src:r.imageUrl,alt:r.name,className:"w-16 h-16 object-cover rounded-md mr-4"}),S.jsxs("div",{className:"flex-grow",children:[S.jsx("h4",{className:"text-md font-semibold text-gray-800",children:r.name}),S.jsxs("p",{className:"text-sm text-gray-500",children:["Tamao: ",r.selectedSize,"ml"]}),S.jsxs("p",{className:"text-sm text-gray-500",children:["$",r.price.toFixed(2)," c/u"]})]}),S.jsxs("div",{className:"flex items-center mx-4",children:[S.jsx("button",{onClick:()=>s(r.quantity-1),className:"p-1 rounded-full text-primary hover:bg-gray-200 disabled:opacity-50",disabled:r.quantity<=1&&r.quantity!==0,"aria-label":"Disminuir cantidad",children:S.jsx(BC,{})}),S.jsx("span",{className:"mx-2 text-md w-8 text-center",children:r.quantity}),S.jsx("button",{onClick:()=>s(r.quantity+1),className:"p-1 rounded-full text-primary hover:bg-gray-200","aria-label":"Aumentar cantidad",children:S.jsx(zC,{})})]}),S.jsxs("p",{className:"text-md font-semibold text-gray-700 w-24 text-right",children:["$",(r.price*r.quantity).toFixed(2)]}),S.jsx("button",{onClick:()=>n(r.id,r.selectedSize),className:"ml-4 text-red-500 hover:text-red-700","aria-label":"Eliminar item",children:S.jsx(ST,{className:"h-6 w-6"})})]})},HC=({onSubmit:r})=>{const[e,n]=Ot.useState({name:"",phone:"",email:"",address:""}),[s,o]=Ot.useState({}),u=T=>{n({...e,[T.target.name]:T.target.value}),s[T.target.name]&&o({...s,[T.target.name]:void 0})},f=()=>{const T={};return e.name.trim()||(T.name="El nombre es obligatorio."),e.phone.trim()?/^\+?[0-9\s-()]{7,20}$/.test(e.phone)||(T.phone="El formato del telfono no es vlido."):T.phone="El telfono es obligatorio.",e.email.trim()?/\S+@\S+\.\S+/.test(e.email)||(T.email="El formato del correo electrnico no es vlido."):T.email="El correo electrnico es obligatorio.",e.address.trim()||(T.address="La direccin es obligatoria."),o(T),Object.keys(T).length===0},p=T=>{T.preventDefault(),f()&&r(e)},g="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary focus:border-primary sm:text-sm",y="text-red-500 text-xs mt-1";return S.jsxs("form",{onSubmit:p,className:"space-y-4 mt-6 p-6 bg-gray-50 rounded-lg shadow",children:[S.jsx("h3",{className:"text-xl font-semibold text-gray-700 mb-4",children:"Informacin de Contacto y Envo"}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Nombre Completo"}),S.jsx("input",{type:"text",name:"name",id:"name",value:e.name,onChange:u,className:g,required:!0}),s.name&&S.jsx("p",{className:y,children:s.name})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700",children:"Telfono"}),S.jsx("input",{type:"tel",name:"phone",id:"phone",value:e.phone,onChange:u,className:g,required:!0}),s.phone&&S.jsx("p",{className:y,children:s.phone})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Correo Electrnico"}),S.jsx("input",{type:"email",name:"email",id:"email",value:e.email,onChange:u,className:g,required:!0}),s.email&&S.jsx("p",{className:y,children:s.email})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:"address",className:"block text-sm font-medium text-gray-700",children:"Direccin de Entrega"}),S.jsx("textarea",{name:"address",id:"address",rows:3,value:e.address,onChange:u,className:g,required:!0}),s.address&&S.jsx("p",{className:y,children:s.address})]}),S.jsx("button",{type:"submit",className:"w-full bg-primary hover:bg-blue-700 text-white font-bold py-3 px-4 rounded-lg shadow-md hover:shadow-lg transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-opacity-50",children:"Realizar Pedido"})]})},Al=()=>S.jsxs("div",{className:"flex justify-center items-center py-8",children:[S.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"}),S.jsx("p",{className:"ml-3 text-lg text-primary",children:"Cargando..."})]}),GC=({cartItems:r,onUpdateQuantity:e,onRemoveItem:n,onPlaceOrder:s,onClose:o,isSubmittingOrder:u})=>{const f=r.reduce((p,g)=>p+g.price*g.quantity,0);return S.jsx("div",{className:"fixed inset-0 bg-gray-800 bg-opacity-75 flex items-center justify-center z-50 p-4 overflow-y-auto",children:S.jsxs("div",{className:"bg-neutral rounded-xl shadow-2xl w-full max-w-2xl max-h-[90vh] flex flex-col",children:[S.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-300",children:[S.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Tu Carrito"}),S.jsx("button",{onClick:o,className:"text-gray-500 hover:text-gray-700 transition-colors text-2xl","aria-label":"Cerrar carrito",children:""})]}),S.jsxs("div",{className:"p-6 overflow-y-auto flex-grow",children:[u&&S.jsx(Al,{}),!u&&S.jsx(S.Fragment,{children:r.length===0?S.jsx("p",{className:"text-center text-gray-600 py-8 text-lg",children:"Tu carrito est vaco."}):S.jsxs(S.Fragment,{children:[S.jsx("div",{className:"space-y-3 mb-6",children:r.map(p=>S.jsx(qC,{item:p,onUpdateQuantity:e,onRemoveItem:n},`${p.id}-${p.selectedSize}`))}),S.jsx("div",{className:"py-4 border-t border-gray-200",children:S.jsxs("div",{className:"flex justify-between items-center text-xl font-semibold text-gray-800",children:[S.jsx("span",{children:"Total:"}),S.jsxs("span",{children:["$",f.toFixed(2)]})]})}),S.jsx("div",{className:"my-4 p-3 bg-blue-100 border-l-4 border-blue-500 text-blue-700 rounded-md shadow-sm",children:S.jsxs("p",{className:"text-sm",children:[S.jsx("strong",{children:"Importante:"})," Una vez realizado el pedido, revisaremos el stock disponible de los productos seleccionados. Nos pondremos en contacto contigo a la brevedad para confirmar y coordinar la entrega."]})}),S.jsx(HC,{onSubmit:s})]})})]}),!u&&r.length>0&&S.jsx("div",{className:"p-6 border-t border-gray-300 bg-gray-50 rounded-b-xl",children:S.jsx("button",{onClick:o,className:"w-full bg-gray-200 hover:bg-gray-300 text-gray-700 font-semibold py-3 px-4 rounded-lg transition-colors",children:"Seguir Comprando"})}),!u&&r.length===0&&S.jsx("div",{className:"p-6 border-t border-gray-300 bg-gray-50 rounded-b-xl text-center",children:S.jsx("button",{onClick:o,className:"bg-primary hover:opacity-80 text-white font-semibold py-3 px-6 rounded-lg transition-colors",children:"Ver Productos"})})]})})},Ia=({title:r,message:e,onClose:n,onConfirm:s,confirmText:o="Confirmar",type:u="info"})=>{let f="text-gray-800",p="bg-primary hover:bg-pink-600",g="text-white";return u==="success"?(f="text-green-600",p="bg-green-500 hover:bg-green-600"):u==="error"?(f="text-red-600",p="bg-red-500 hover:bg-red-600"):u==="warning"&&(f="text-amber-600",p="bg-red-500 hover:bg-red-600"),S.jsx("div",{className:"fixed inset-0 bg-gray-800 bg-opacity-75 flex items-center justify-center z-50 p-4",children:S.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 w-full max-w-md mx-auto",children:[S.jsx("h3",{className:`text-2xl font-bold mb-4 ${f}`,children:r}),S.jsx("p",{className:"text-gray-700 mb-6 whitespace-pre-wrap",children:e}),S.jsxs("div",{className:"flex justify-end space-x-3",children:[s&&u==="warning"&&S.jsx("button",{onClick:n,className:"bg-gray-200 hover:bg-gray-300 text-gray-700 font-semibold py-2 px-4 rounded-lg transition-colors",children:"Cancelar"}),S.jsx("button",{onClick:s||n,className:` ${p} ${g} font-semibold py-2 px-4 rounded-lg transition-colors`,children:s?o:"Cerrar"})]})]})})},FC=({className:r})=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:r||"h-5 w-5",viewBox:"0 0 24 24",fill:"currentColor",children:S.jsx("path",{d:"M.057 24l1.687-6.163c-1.041-1.804-1.588-3.849-1.587-5.946.003-6.556 5.338-11.891 11.893-11.891 3.181.001 6.167 1.24 8.413 3.488 2.245 2.248 3.481 5.236 3.48 8.414-.003 6.557-5.338 11.892-11.893 11.892-1.99-.001-3.951-.5-5.688-1.448l-6.305 1.654zm6.597-3.807c1.676.995 3.276 1.591 5.392 1.592 5.448 0 9.886-4.434 9.889-9.885.002-5.462-4.415-9.89-9.881-9.892-5.452 0-9.887 4.434-9.889 9.884-.001 2.225.651 3.891 1.746 5.634l-.999 3.648 3.71  -.994zM12 6.421c-3.082 0-5.587 2.505-5.587 5.587s2.505 5.587 5.587 5.587c3.083 0 5.587-2.505 5.587-5.587s-2.504-5.587-5.587-5.587zm0 9.975c-2.42 0-4.388-1.968-4.388-4.388s1.968-4.388 4.388-4.388 4.388 1.968 4.388 4.388-1.968 4.388-4.388 4.388zm0-1.098c1.813 0 3.29-1.477 3.29-3.29s-1.477-3.29-3.29-3.29-3.29 1.477-3.29 3.29 1.477 3.29 3.29 3.29z"})}),QC=({className:r})=>S.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:r||"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),KC=({className:r})=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:r||"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:S.jsx("path",{d:"M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"})}),YC=({products:r,onEditProduct:e,onDeleteProduct:n,disabled:s=!1})=>r.length===0?S.jsx("p",{className:"text-center text-gray-500 py-10",children:"No hay productos para mostrar. Puede aadir productos nuevos."}):S.jsx("div",{className:"overflow-x-auto bg-white shadow-md rounded-lg",children:S.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[S.jsx("thead",{className:"bg-gray-50",children:S.jsxs("tr",{children:[S.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Imagen"}),S.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nombre"}),S.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Autor"}),S.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Categora"}),S.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Gnero"}),S.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tamaos (ml)"}),S.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),S.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.map(o=>S.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[S.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:S.jsx("img",{src:o.imageUrl||"https://via.placeholder.com/50x50.png?text=Sin+Img",alt:o.name,className:"w-12 h-12 object-cover rounded-md",onError:u=>u.currentTarget.src="https://via.placeholder.com/50x50.png?text=Error"})}),S.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:S.jsx("div",{className:"text-sm font-medium text-gray-900",children:o.name})}),S.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:S.jsx("div",{className:"text-sm text-gray-500",children:o.author})}),S.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:S.jsx("div",{className:"text-sm text-gray-500",children:o.category})}),S.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:S.jsx("div",{className:"text-sm text-gray-500",children:o.gender})}),S.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:S.jsx("div",{className:"text-sm text-gray-500",children:o.sizes.join(", ")})}),S.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[S.jsx("button",{onClick:()=>e(o),className:"text-indigo-600 hover:text-indigo-900 mr-3 p-1 disabled:opacity-50 disabled:cursor-not-allowed",title:"Editar Producto",disabled:s,children:S.jsx(KC,{className:"h-5 w-5"})}),S.jsx("button",{onClick:()=>n(o),className:"text-red-600 hover:text-red-900 p-1 disabled:opacity-50 disabled:cursor-not-allowed",title:"Eliminar Producto",disabled:s,children:S.jsx(ST,{className:"h-5 w-5"})})]})]},o.id))})]})}),Zv={id:void 0,name:"",description:"",imageUrl:"",category:"Fragancia",gender:"Unisex",author:"",sizes:[]},XC=({product:r,onSave:e,onCancel:n,isLoading:s})=>{const[o,u]=Ot.useState(r?{...r,id:r.id}:Zv),[f,p]=Ot.useState((r==null?void 0:r.sizes.join(", "))||""),[g,y]=Ot.useState({});Ot.useEffect(()=>{r?(u({...r}),p(r.sizes.join(", "))):(u(Zv),p("")),y({})},[r]);const T=q=>{const{name:re,value:se}=q.target;u(le=>({...le,[re]:se})),g[re]&&y(le=>({...le,[re]:void 0}))},I=q=>{p(q.target.value),g.sizes&&y(re=>({...re,sizes:void 0}))},x=()=>{const q={};if(o.name.trim()||(q.name="El nombre es obligatorio."),o.author.trim()||(q.author="El autor es obligatorio."),o.description.trim()||(q.description="La descripcin es obligatoria."),!o.imageUrl.trim())q.imageUrl="La URL de la imagen es obligatoria.";else try{new URL(o.imageUrl)}catch{q.imageUrl="La URL de la imagen no es vlida."}return f.split(",").map(se=>parseInt(se.trim(),10)).filter(se=>!isNaN(se)&&se>0).length===0&&f.trim()!==""&&f.trim()!=="0"?q.sizes="Los tamaos deben ser nmeros positivos separados por comas (ej: 30,60,100) o dejar vaco si no aplica. Si un tamao es 0, ingrese solo '0'.":f.trim(),y(q),Object.keys(q).length===0},G=async q=>{if(q.preventDefault(),!x())return;const re=f.split(",").map(le=>parseInt(le.trim(),10)).filter(le=>!isNaN(le)&&le>=0),se={name:o.name,description:o.description,imageUrl:o.imageUrl,category:o.category,gender:o.gender,author:o.author,sizes:re};o.id?await e({...se,id:o.id}):await e(se)},Z="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary focus:border-primary sm:text-sm",F="text-red-500 text-xs mt-1";return S.jsxs("form",{onSubmit:G,className:"space-y-6 p-6 bg-white shadow-lg rounded-lg max-w-2xl mx-auto",children:[S.jsx("h2",{className:"text-2xl font-semibold text-gray-800 mb-6",children:o.id?"Editar Producto":"Aadir Nuevo Producto"}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Nombre del Producto"}),S.jsx("input",{type:"text",name:"name",id:"name",value:o.name,onChange:T,className:Z}),g.name&&S.jsx("p",{className:F,children:g.name})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:"author",className:"block text-sm font-medium text-gray-700",children:"Autor"}),S.jsx("input",{type:"text",name:"author",id:"author",value:o.author,onChange:T,className:Z}),g.author&&S.jsx("p",{className:F,children:g.author})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700",children:"Descripcin"}),S.jsx("textarea",{name:"description",id:"description",rows:3,value:o.description,onChange:T,className:Z}),g.description&&S.jsx("p",{className:F,children:g.description})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:"imageUrl",className:"block text-sm font-medium text-gray-700",children:"URL de la Imagen"}),S.jsx("input",{type:"url",name:"imageUrl",id:"imageUrl",value:o.imageUrl,onChange:T,className:Z}),g.imageUrl&&S.jsx("p",{className:F,children:g.imageUrl})]}),S.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[S.jsxs("div",{children:[S.jsx("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-700",children:"Categora"}),S.jsx("select",{name:"category",id:"category",value:o.category,onChange:T,className:Z,children:kC.map(q=>S.jsx("option",{value:q,children:q},q))})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:"gender",className:"block text-sm font-medium text-gray-700",children:"Gnero"}),S.jsxs("select",{name:"gender",id:"gender",value:o.gender,onChange:T,className:Z,children:[S.jsx("option",{value:"Femenina",children:"Femenina"}),S.jsx("option",{value:"Masculina",children:"Masculina"}),S.jsx("option",{value:"Unisex",children:"Unisex"})]})]})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:"sizes",className:"block text-sm font-medium text-gray-700",children:"Tamaos (ml, separados por coma)"}),S.jsx("input",{type:"text",name:"sizes",id:"sizes",value:f,onChange:I,className:Z,placeholder:"Ej: 30,60,100 o 0 si aplica"}),g.sizes&&S.jsx("p",{className:F,children:g.sizes}),S.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Dejar vaco si no tiene tamaos. Usar '0' para productos sin tamao especfico pero con precio nico (ej. un accesorio)."})]}),S.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[S.jsx("button",{type:"button",onClick:n,disabled:s,className:"bg-gray-200 hover:bg-gray-300 text-gray-700 font-semibold py-2 px-4 rounded-lg shadow-sm transition-colors disabled:opacity-70",children:"Cancelar"}),S.jsx("button",{type:"submit",disabled:s,className:"bg-primary hover:bg-pink-600 text-white font-semibold py-2 px-4 rounded-lg shadow-md hover:shadow-lg transition-colors disabled:opacity-70 flex items-center justify-center min-w-[120px]",children:s?S.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-t-2 border-b-2 border-white"}):o.id?"Guardar Cambios":"Crear Producto"})]})]})},$C=({currentView:r,products:e,editingProduct:n,dispatch:s,onLogout:o,onSaveProduct:u,isLoading:f,error:p})=>{const g=()=>{s({type:"ADMIN_SELECT_PRODUCT_FOR_EDIT",payload:null})};return S.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-8 min-h-screen bg-gray-50",children:[S.jsxs("div",{className:"flex justify-between items-center mb-8 pb-4 border-b border-gray-300",children:[S.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Administracin"}),S.jsx("button",{onClick:o,className:"bg-red-500 hover:bg-red-600 text-white font-semibold py-2 px-4 rounded-lg shadow-md transition-colors",children:"Cerrar Sesin y Volver"})]}),p&&r!=="admin_product_form"&&S.jsx("div",{className:"my-4 p-3 bg-red-100 border-l-4 border-red-500 text-red-700 rounded-md shadow-sm",children:S.jsxs("p",{children:[S.jsx("strong",{children:"Error:"})," ",p]})}),f&&r!=="admin_product_form"&&S.jsx(Al,{}),r==="admin_product_list"&&!n&&S.jsxs(S.Fragment,{children:[S.jsx("h2",{className:"text-2xl font-semibold text-gray-700 mb-4",children:"Lista de Productos"}),S.jsx("button",{onClick:g,disabled:f,className:"mb-6 bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-6 rounded-lg shadow-md transition-colors disabled:opacity-70",children:"Aadir Nuevo Producto"}),S.jsx(YC,{products:e,onEditProduct:y=>s({type:"ADMIN_SELECT_PRODUCT_FOR_EDIT",payload:y}),onDeleteProduct:y=>s({type:"ADMIN_CONFIRM_DELETE_PRODUCT",payload:y}),disabled:f})]}),r==="admin_product_form"&&S.jsx(XC,{product:n,onSave:u,onCancel:()=>{s({type:"ADMIN_SELECT_PRODUCT_FOR_EDIT",payload:null}),s({type:"SET_VIEW",payload:"admin_product_list"})},isLoading:f})]})},ZC=({dispatch:r,authError:e,authLoading:n})=>{const[s,o]=Ot.useState(""),[u,f]=Ot.useState(""),p=async g=>{g.preventDefault(),r({type:"FIREBASE_LOGIN_REQUEST"});try{const y=await Bb(om,s,u);r({type:"FIREBASE_LOGIN_SUCCESS",payload:y.user})}catch(y){const T=y;let I="Ocurri un error al iniciar sesin.";if(T.code)switch(T.code){case"auth/invalid-email":I="El formato del correo electrnico no es vlido.";break;case"auth/user-not-found":case"auth/wrong-password":case"auth/invalid-credential":I="Correo electrnico o contrasea incorrectos.";break;default:I=`Error: ${T.message}`}r({type:"FIREBASE_LOGIN_FAILURE",payload:I})}};return S.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100 py-12 px-4 sm:px-6 lg:px-8",children:S.jsxs("div",{className:"max-w-md w-full space-y-8 bg-white p-10 rounded-xl shadow-2xl",children:[S.jsx("div",{children:S.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Acceso de Administrador"})}),S.jsxs("form",{className:"mt-8 space-y-6",onSubmit:p,children:[S.jsx("input",{type:"hidden",name:"remember",defaultValue:"true"}),S.jsxs("div",{className:"rounded-md shadow-sm -space-y-px",children:[S.jsxs("div",{children:[S.jsx("label",{htmlFor:"email-address",className:"sr-only",children:"Correo Electrnico"}),S.jsx("input",{id:"email-address",name:"email",type:"email",autoComplete:"email",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-3 border border-gray-300 bg-white text-gray-900 placeholder-gray-500 rounded-t-md focus:outline-none focus:ring-primary focus:border-primary focus:z-10 sm:text-sm",placeholder:"Correo Electrnico",value:s,onChange:g=>o(g.target.value)})]}),S.jsx("div",{children:S.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-3 border border-gray-300 bg-white text-gray-900 placeholder-gray-500 rounded-b-md focus:outline-none focus:ring-primary focus:border-primary focus:z-10 sm:text-sm",placeholder:"Contrasea",value:u,onChange:g=>f(g.target.value)})})]}),e&&S.jsx("p",{className:"text-sm text-red-600 text-center bg-red-100 p-2 rounded-md",children:e}),S.jsx("div",{children:S.jsx("button",{type:"submit",disabled:n,className:"group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-primary hover:bg-pink-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary disabled:opacity-70",children:n?S.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-t-2 border-b-2 border-white"}):"Ingresar"})})]}),S.jsx("div",{className:"text-sm text-center",children:S.jsx("button",{onClick:()=>r({type:"SET_VIEW",payload:"products"}),className:"mt-4 font-medium text-gray-600 hover:text-gray-800",children:"Volver a la tienda"})})]})})},lm=["Todos los Gneros","Masculina","Femenina","Unisex"],La="Todos los Autores",Wv="+5493624123456",WC="Hola, estoy interesado/a en sus productos.",JC={products:[],cart:[],currentView:"products",isLoadingProducts:!0,isSubmittingOrder:!1,error:null,confirmationMessage:null,searchTerm:"",selectedGender:lm[0],selectedAuthor:La,availableAuthors:[La],editingProduct:null,productToDelete:null,currentUser:null,authLoading:!0,authError:null,isAdminOperationLoading:!1,adminOperationError:null};function ex(r,e){switch(e.type){case"SET_PRODUCTS_LOADING":return{...r,isLoadingProducts:e.payload,error:null};case"SET_PRODUCTS_SUCCESS":{const n=Array.from(new Set(e.payload.map(o=>o.author))).sort(),s=[La,...n];return{...r,products:e.payload,isLoadingProducts:!1,availableAuthors:s,adminOperationError:null}}case"SET_PRODUCTS_ERROR":return{...r,error:e.payload,isLoadingProducts:!1,currentView:"error"};case"ADD_TO_CART":{const{product:n,selectedSize:s,priceForSize:o}=e.payload;return r.cart.find(f=>f.id===n.id&&f.selectedSize===s)?{...r,cart:r.cart.map(f=>f.id===n.id&&f.selectedSize===s?{...f,quantity:f.quantity+1}:f)}:{...r,cart:[...r.cart,{...n,quantity:1,selectedSize:s,price:o}]}}case"UPDATE_CART_QUANTITY":{const{productId:n,selectedSize:s,quantity:o}=e.payload;return o<=0?{...r,cart:r.cart.filter(u=>!(u.id===n&&u.selectedSize===s))}:{...r,cart:r.cart.map(u=>u.id===n&&u.selectedSize===s?{...u,quantity:o}:u)}}case"REMOVE_FROM_CART":{const{productId:n,selectedSize:s}=e.payload;return{...r,cart:r.cart.filter(o=>!(o.id===n&&o.selectedSize===s))}}case"CLEAR_CART":return{...r,cart:[]};case"SET_VIEW":{const n=r.currentView.startsWith("admin_")&&!e.payload.startsWith("admin_");return e.payload.startsWith("admin_")&&e.payload!=="admin_login"&&!r.currentUser?{...r,currentView:"admin_login",authError:"Debes iniciar sesin para acceder."}:{...r,currentView:e.payload,error:r.currentView==="cart"&&e.payload!=="cart"?null:r.error,confirmationMessage:e.payload==="products"?null:r.confirmationMessage,editingProduct:n?null:r.editingProduct,productToDelete:n?null:r.productToDelete,authError:e.payload==="admin_login"?null:r.authError,adminOperationError:null}}case"SET_ORDER_SUBMITTING":return{...r,isSubmittingOrder:e.payload,error:null};case"SET_ORDER_SUCCESS":return{...r,confirmationMessage:e.payload,currentView:"confirmation",cart:[]};case"SET_ORDER_ERROR":return{...r,error:e.payload};case"CLEAR_ERROR":return{...r,error:null};case"CLEAR_CONFIRMATION":return{...r,confirmationMessage:null,currentView:"products"};case"SET_SEARCH_TERM":return{...r,searchTerm:e.payload};case"SET_SELECTED_GENDER":return{...r,selectedGender:e.payload};case"SET_SELECTED_AUTHOR":return{...r,selectedAuthor:e.payload};case"RESET_AUTHOR_FILTER_IF_NEEDED":return r.selectedAuthor!==La&&!r.availableAuthors.includes(r.selectedAuthor)?{...r,selectedAuthor:La}:r;case"ADMIN_ADD_PRODUCT":return{...r,products:[...r.products,e.payload],currentView:"admin_product_list",editingProduct:null,isAdminOperationLoading:!1,adminOperationError:null};case"ADMIN_UPDATE_PRODUCT":return{...r,products:r.products.map(n=>n.id===e.payload.id?e.payload:n),currentView:"admin_product_list",editingProduct:null,isAdminOperationLoading:!1,adminOperationError:null};case"ADMIN_DELETE_PRODUCT":return{...r,products:r.products.filter(n=>n.id!==e.payload),productToDelete:null,isAdminOperationLoading:!1,adminOperationError:null};case"ADMIN_SELECT_PRODUCT_FOR_EDIT":return{...r,editingProduct:e.payload,currentView:"admin_product_form",adminOperationError:null};case"ADMIN_CONFIRM_DELETE_PRODUCT":return{...r,productToDelete:e.payload};case"ADMIN_CANCEL_DELETE_PRODUCT":return{...r,productToDelete:null};case"SET_AUTH_LOADING":return{...r,authLoading:e.payload};case"SET_CURRENT_USER":return{...r,currentUser:e.payload,authLoading:!1,authError:null};case"SET_AUTH_ERROR":return{...r,authError:e.payload,authLoading:!1};case"FIREBASE_LOGIN_REQUEST":return{...r,authLoading:!0,authError:null};case"FIREBASE_LOGIN_SUCCESS":return{...r,currentUser:e.payload,currentView:"admin_product_list",authLoading:!1,authError:null};case"FIREBASE_LOGIN_FAILURE":return{...r,currentUser:null,authError:e.payload,authLoading:!1};case"FIREBASE_LOGOUT_REQUEST":return{...r,authLoading:!0};case"FIREBASE_LOGOUT_SUCCESS":return{...r,currentUser:null,currentView:"products",authLoading:!1,authError:null,editingProduct:null,productToDelete:null,isAdminOperationLoading:!1,adminOperationError:null};case"SET_ADMIN_OPERATION_LOADING":return{...r,isAdminOperationLoading:e.payload,adminOperationError:e.payload?null:r.adminOperationError};case"SET_ADMIN_OPERATION_ERROR":return{...r,adminOperationError:e.payload,isAdminOperationLoading:!1};case"CLEAR_ADMIN_OPERATION_ERROR":return{...r,adminOperationError:null};default:return r}}const tx=()=>{const[r,e]=Ot.useReducer(ex,JC);Ot.useEffect(()=>{e({type:"SET_AUTH_LOADING",payload:!0});const F=Gb(om,q=>{e({type:"SET_CURRENT_USER",payload:q}),!q&&r.currentView.startsWith("admin_")&&r.currentView!=="admin_login"&&e({type:"SET_VIEW",payload:"admin_login"})});return()=>F()},[]);const n=Ot.useCallback(async()=>{e({type:"SET_PRODUCTS_LOADING",payload:!0});try{const F=await VC();e({type:"SET_PRODUCTS_SUCCESS",payload:F})}catch(F){console.error("Error al cargar productos:",F);const q=F instanceof Error?F.message:"No se pudieron cargar los productos. Intntalo de nuevo ms tarde.";e({type:"SET_PRODUCTS_ERROR",payload:q})}},[]);Ot.useEffect(()=>{n()},[n]),Ot.useEffect(()=>{e({type:"RESET_AUTHOR_FILTER_IF_NEEDED"})},[r.availableAuthors]);const s=Ot.useMemo(()=>{let F=r.products;return r.searchTerm.trim()!==""&&(F=F.filter(q=>q.name.toLowerCase().includes(r.searchTerm.toLowerCase())||q.author.toLowerCase().includes(r.searchTerm.toLowerCase()))),r.selectedGender!==lm[0]&&(F=F.filter(q=>q.gender===r.selectedGender)),r.selectedAuthor!==La&&(F=F.filter(q=>q.author===r.selectedAuthor)),F},[r.products,r.searchTerm,r.selectedGender,r.selectedAuthor]),o=(F,q,re)=>{e({type:"ADD_TO_CART",payload:{product:F,selectedSize:q,priceForSize:re}})},u=(F,q)=>{e({type:"REMOVE_FROM_CART",payload:{productId:F,selectedSize:q}})},f=(F,q,re)=>{e({type:"UPDATE_CART_QUANTITY",payload:{productId:F,selectedSize:q,quantity:re}})},p=async F=>{e({type:"SET_ORDER_SUBMITTING",payload:!0});const q={items:r.cart,customerInfo:F,totalAmount:r.cart.reduce((re,se)=>re+se.price*se.quantity,0),orderDate:new Date().toISOString()};try{const re=await PC(q);if(re.success){const se=`Tu pedido ha sido registrado con xito.
ID de Pedido: ${re.orderId||"N/A"}

Nos pondremos en contacto contigo a la brevedad para coordinar la entrega.`;e({type:"SET_ORDER_SUCCESS",payload:{title:"Pedido Confirmado!",message:se,orderId:re.orderId}})}else{let se=re.message||"Ocurri un error al realizar el pedido.";re.scriptErrorDetails&&(se+=`
Detalles del error del script: Nombre: ${re.scriptErrorDetails.name||"N/A"}, Mensaje: ${re.scriptErrorDetails.message||"N/A"}`),e({type:"SET_ORDER_ERROR",payload:se})}}catch(re){e({type:"SET_ORDER_ERROR",payload:re.message||"Error de conexin al realizar el pedido."})}finally{e({type:"SET_ORDER_SUBMITTING",payload:!1})}},g=r.cart.reduce((F,q)=>F+q.quantity,0),y=()=>{r.currentUser?e({type:"SET_VIEW",payload:"admin_product_list"}):e({type:"SET_VIEW",payload:"admin_login"})},T=`https://wa.me/${Wv.replace(/\D/g,"")}?text=${encodeURIComponent(WC)}`,I=async()=>{e({type:"FIREBASE_LOGOUT_REQUEST"});try{await Fb(om),e({type:"FIREBASE_LOGOUT_SUCCESS"})}catch(F){console.error("Error al cerrar sesin:",F),e({type:"FIREBASE_LOGOUT_SUCCESS"}),e({type:"SET_AUTH_ERROR",payload:"Error al cerrar sesin. Intenta de nuevo."})}},x=async F=>{e({type:"SET_ADMIN_OPERATION_LOADING",payload:!0}),e({type:"CLEAR_ADMIN_OPERATION_ERROR"});try{if("id"in F&&F.id)await DC(F.id,F),e({type:"ADMIN_UPDATE_PRODUCT",payload:F});else{const q=await NC(F);e({type:"ADMIN_ADD_PRODUCT",payload:q})}}catch(q){console.error("Error guardando producto:",q);const re=q instanceof Error?q.message:"No se pudo guardar el producto.";e({type:"SET_ADMIN_OPERATION_ERROR",payload:re})}},G=async F=>{e({type:"SET_ADMIN_OPERATION_LOADING",payload:!0}),e({type:"CLEAR_ADMIN_OPERATION_ERROR"});try{await OC(F),e({type:"ADMIN_DELETE_PRODUCT",payload:F})}catch(q){console.error("Error eliminando producto:",q);const re=q instanceof Error?q.message:"No se pudo eliminar el producto.";e({type:"SET_ADMIN_OPERATION_ERROR",payload:re})}finally{e({type:"ADMIN_CANCEL_DELETE_PRODUCT"})}},Z=()=>{if(r.authLoading&&!r.currentUser&&(r.currentView==="admin_login"||r.currentView.startsWith("admin_")))return S.jsx(Al,{});if(r.currentView==="admin_login")return S.jsx(ZC,{dispatch:e,authError:r.authError,authLoading:r.authLoading});if(r.currentView.startsWith("admin_"))return r.currentUser?S.jsx($C,{currentView:r.currentView,products:r.products,editingProduct:r.editingProduct,dispatch:e,onLogout:I,onSaveProduct:x,isLoading:r.isAdminOperationLoading,error:r.adminOperationError}):(e({type:"SET_VIEW",payload:"admin_login"}),S.jsx(Al,{}));if(r.isLoadingProducts&&r.products.length===0&&r.currentView!=="error")return S.jsx(Al,{});switch(r.currentView){case"products":case"error":return S.jsx($v,{products:s,onAddToCart:o});default:return S.jsx($v,{products:s,onAddToCart:o})}};return S.jsxs("div",{className:"min-h-screen flex flex-col bg-neutral",children:[!r.currentView.startsWith("admin_")&&S.jsx(LC,{cartItemCount:g,onCartClick:()=>e({type:"SET_VIEW",payload:"cart"}),onLogoClick:()=>e({type:"SET_VIEW",payload:"products"}),searchTerm:r.searchTerm,onSearchChange:F=>e({type:"SET_SEARCH_TERM",payload:F}),genderOptions:lm,selectedGender:r.selectedGender,onGenderChange:F=>e({type:"SET_SELECTED_GENDER",payload:F}),authorOptions:r.availableAuthors,selectedAuthor:r.selectedAuthor,onAuthorChange:F=>e({type:"SET_SELECTED_AUTHOR",payload:F})}),S.jsx("main",{className:"flex-grow",children:Z()}),!r.currentView.startsWith("admin_")&&S.jsx("footer",{className:"bg-gray-800 text-gray-300 p-6",children:S.jsxs("div",{className:"max-w-7xl mx-auto flex flex-col md:flex-row justify-between items-center space-y-4 md:space-y-0",children:[S.jsxs("div",{className:"text-center md:text-left",children:[S.jsxs("p",{children:[" ",new Date().getFullYear()," Millanel Resistencia."]}),S.jsx("p",{children:"Todos los derechos reservados."})]}),S.jsxs("div",{className:"flex items-center space-x-3",children:[S.jsx(FC,{className:"h-5 w-5 text-green-400"}),S.jsx("a",{href:T,target:"_blank",rel:"noopener noreferrer",className:"hover:text-green-300 transition-colors",children:Wv})]}),S.jsx("button",{onClick:y,className:"p-2 rounded-full hover:bg-gray-700 transition-colors","aria-label":"Acceso de Administrador",title:"Acceso de Administrador",children:S.jsx(QC,{className:"h-6 w-6 text-gray-400 hover:text-white"})})]})}),r.currentView==="cart"&&S.jsx(GC,{cartItems:r.cart,onUpdateQuantity:f,onRemoveItem:u,onPlaceOrder:p,onClose:()=>e({type:"SET_VIEW",payload:"products"}),isSubmittingOrder:r.isSubmittingOrder}),r.currentView==="confirmation"&&r.confirmationMessage&&S.jsx(Ia,{title:r.confirmationMessage.title,message:r.confirmationMessage.message,type:"success",onClose:()=>e({type:"CLEAR_CONFIRMATION"})}),r.error&&r.currentView!=="cart"&&r.currentView!=="error"&&!r.isSubmittingOrder&&S.jsx(Ia,{title:"Error",message:r.error,type:"error",onClose:()=>{e({type:"CLEAR_ERROR"}),r.currentView!=="products"&&r.currentView!=="confirmation"&&e({type:"SET_VIEW",payload:"products"})}}),r.error&&r.currentView==="error"&&!r.isLoadingProducts&&r.products.length===0&&!r.isSubmittingOrder&&S.jsx(Ia,{title:"Error de Carga",message:r.error,type:"error",onClose:()=>{e({type:"CLEAR_ERROR"}),n()}}),r.error&&r.currentView==="cart"&&!r.isSubmittingOrder&&S.jsx(Ia,{title:"Error en el Pedido",message:r.error,type:"error",onClose:()=>e({type:"CLEAR_ERROR"})}),r.adminOperationError&&r.currentView.startsWith("admin_")&&S.jsx(Ia,{title:"Error de Administracin",message:r.adminOperationError,type:"error",onClose:()=>e({type:"CLEAR_ADMIN_OPERATION_ERROR"})}),r.productToDelete&&r.currentView.startsWith("admin_")&&r.currentUser&&S.jsx(Ia,{title:"Confirmar Eliminacin",message:`Ests seguro de que deseas eliminar el producto "${r.productToDelete.name}"? Esta accin no se puede deshacer.`,type:"warning",onClose:()=>e({type:"ADMIN_CANCEL_DELETE_PRODUCT"}),onConfirm:()=>{r.productToDelete&&G(r.productToDelete.id)},confirmText:"Eliminar"})]})},bT=document.getElementById("root");if(!bT)throw new Error("No se pudo encontrar el elemento raz para montar la aplicacin.");const nx=aS.createRoot(bT);nx.render(S.jsx(WA.StrictMode,{children:S.jsx(tx,{})}));
